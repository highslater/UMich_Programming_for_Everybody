<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hevea 2.09" />
<style type="text/css">
.c000{color:black}
.c001{font-family:monospace}
.c002{font-family:monospace;font-size:medium;color:black}
.c003{font-family:sans-serif}
.c004{font-size:large;color:blue}
.c005{font-size:medium}
.c006{font-size:medium;color:black}
.c007{font-style:italic}
.c008{font-style:italic;font-size:medium;color:black}
.c009{font-weight:bold}
.c010{font-weight:bold;font-size:medium;color:black}
.c011{vertical-align:top;text-align:left;}
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
</style>
<title>book</title>
</head>
<body>
<!--HEVEA command line is: /usr/bin/hevea -O -e latexonly png.hva htmlonly book -->
<!--CUT STYLE book--><!--CUT DEF chapter 1 --><p><span style="font-size:x-large">Python for Informatics: Exploring Information</span></p><p><span style="font-size:large">Charles Severance</span></p><p>Version 2.7.0</p>
<!--TOC chapter id="sec1" Preface-->
<h1 class="chapter" id="sec1">Chapter&#XA0;0&#XA0;&#XA0;Preface</h1><!--SEC END --><!--TOC section id="sec2" Python for Informatics: Remixing an Open Book-->
<h2 class="section" id="sec2">Python for Informatics: Remixing an Open Book</h2><!--SEC END --><p>It is quite natural for academics who are continuously told to 
&#X201C;publish or perish&#X201D; to want to always create something from scratch
that is their own fresh creation. This book is an 
experiment in not starting from scratch, but instead &#X201C;remixing&#X201D;
the book titled
<em>Think Python: How to Think Like
a Computer Scientist</em>
written by Allen B. Downey, Jeff Elkner, and others.</p><p>In December of 2009, I was preparing to teach
<span class="c009">SI502 - Networked Programming</span> at the University of Michigan
for the fifth semester in a row and decided it was time
to write a Python textbook that focused on exploring data
instead of understanding algorithms and abstractions.
My goal in SI502 is to teach people lifelong data handling 
skills using Python. Few of my
students were planning to be professional 
computer programmers. Instead, they
planned to be librarians, managers, lawyers, biologists, economists, etc., 
who happened to want to skillfully use technology in their chosen field.</p><p>I never seemed to find the perfect data-oriented Python
book for my course, so I set out 
to write just such a book. Luckily at a faculty meeting three weeks
before I was about to start my new book from scratch over 
the holiday break, 
Dr. Atul Prakash showed me the <em>Think Python</em> book which he had
used to teach his Python course that semester. 
It is a well-written Computer Science text with a focus on 
short, direct explanations and ease of learning. </p><p>The overall book structure
has been changed to get to doing data analysis problems as quickly as
possible and have a series of running examples and exercises 
about data analysis from the very beginning. </p><p>Chapters 2&#X2013;10 are similar to the <em>Think Python</em> book,
but there have been major changes. Number-oriented examples and
exercises have been replaced with data-oriented exercises.
Topics are presented in the order needed to build increasingly
sophisticated data analysis solutions. Some topics like <span class="c001">try</span> and
<span class="c001">except</span> are pulled forward and presented as part of the chapter
on conditionals. Functions are given very light treatment until 
they are needed to handle program complexity rather than introduced 
as an early lesson in abstraction. Nearly all user-defined functions
have been removed from the example code and exercises outside of Chapter 4.
The word &#X201C;recursion&#X201D;<sup><a id="text1" href="#note1">1</a></sup>
does not appear in the book at all.</p><p>In chapters 1 and 11&#X2013;16, all of the material is brand new, focusing
on real-world uses and simple examples of Python for data analysis 
including regular expressions for searching and parsing, 
automating tasks on your computer, retrieving data across 
the network, scraping web pages for data, 
using web services, parsing XML and JSON data, and creating 
and using databases using Structured Query Language.</p><p>The ultimate goal of all of these changes is a shift from a 
Computer Science to an Informatics
focus is to only include topics into a first technology 
class that can be useful even if one chooses not to 
become a professional programmer.</p><p>Students who find this book interesting and want to further explore
should look at Allen B. Downey&#X2019;s <em>Think Python</em> book. Because there
is a lot of overlap between the two books,
students will quickly pick up skills in the additional
areas of technical programming and algorithmic thinking 
that are covered in <em>Think Python</em>.
And given that the books have a similar writing style, they should be 
able to move quickly through <em>Think Python</em> with a minimum of effort.</p><p><a id="hevea_default0"></a>
<a id="hevea_default1"></a>
<a id="hevea_default2"></a>
As the copyright holder of <em>Think Python</em>,
Allen has given me permission to change the book&#X2019;s license 
on the material from his book that remains in this book
from the
GNU Free Documentation License 
to the more recent
Creative Commons Attribution &#X2014; Share Alike
license.
This follows a general shift in open documentation licenses moving 
from the GFDL to the CC-BY-SA (e.g., Wikipedia).
Using the CC-BY-SA license maintains the book&#X2019;s 
strong copyleft tradition while making it even more straightforward 
for new authors to reuse this material as they see fit.</p><p>I feel that this book serves an example of why open 
materials are so important to the future of education,
and want to thank Allen B. Downey and Cambridge University
Press for their forward-looking decision to make the book available
under an open copyright. I hope they are pleased with the 
results of my efforts and I hope that you the reader are pleased with
<em>our</em> collective efforts.</p><p>I would like to thank Allen B. Downey and Lauren Cowles for their help,
patience, and guidance in dealing with and resolving the copyright 
issues around this book.</p><p>Charles Severance<br />
www.dr-chuck.com<br />
Ann Arbor, MI, USA<br />
September 9, 2013</p><p>Charles Severance is a 
Clinical Associate Professor 
at the University of Michigan School of Information.</p>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note1" href="#text1">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Except, of course, for this line.</div>
</dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec3" Why should you learn to write programs?-->
<h1 class="chapter" id="sec3">Chapter&#XA0;1&#XA0;&#XA0;Why should you learn to write programs?</h1><!--SEC END --><p>Writing programs (or programming) is a very creative 
and rewarding activity. You can write programs for 
many reasons, ranging from making your living to solving
a difficult data analysis problem to having fun to helping
someone else solve a problem. This book assumes that 
<em>everyone</em> needs to know how to program, and that once 
you know how to program you will figure out what you want 
to do with your newfound skills. </p><p>We are surrounded in our daily lives with computers ranging 
from laptops to cell phones. We can think of these computers
as our &#X201C;personal assistants&#X201D; who can take care of many things
on our behalf. The hardware in our current-day computers 
is essentially built to continuously ask us the question, 
&#X201C;What would you like me to do next?&#X201D;</p><div class="center"><img src="book001.png" /></div><p>Programmers add an operating system and a set of applications
to the hardware and we end up with a Personal Digital
Assistant that is quite helpful and capable of helping
us do many different things.</p><p>Our computers are fast and have vast amounts of memory and 
could be very helpful to us if we only knew the language to
speak to explain to the computer what we would like it to 
&#X201C;do next&#X201D;. If we knew this language, we could tell the 
computer to do tasks on our behalf that were repetitive. 
Interestingly, the kinds of things computers can do best
are often the kinds of things that we humans find boring
and mind-numbing.</p><p>For example, look at the first three paragraphs of this
chapter and tell me the most commonly used word and how
many times the word is used. While you were able to read
and understand the words in a few seconds, counting them
is almost painful because it is not the kind of problem 
that human minds are designed to solve. For a computer
the opposite is true, reading and understanding text 
from a piece of paper is hard for a computer to do 
but counting the words and telling you how many times
the most used word was used is very easy for the
computer:</p><pre class="verbatim"><span class="c004">python words.py
Enter file:words.txt
to 16
</span></pre><p><span class="c006">Our &#X201C;personal information analysis assistant&#X201D; quickly 
told us that the word &#X201C;to&#X201D; was used sixteen times in the
first three paragraphs of this chapter.</span></p><p><span class="c006">This very fact that computers are good at things 
that humans are not is why you need to become
skilled at talking &#X201C;computer language&#X201D;. Once you learn
this new language, you can delegate mundane tasks
to your partner (the computer), leaving more time 
for you to do the 
things that you are uniquely suited for. You bring 
creativity, intuition, and inventiveness to this
partnership. </span></p><span class="c005">
</span><!--TOC section id="sec4" <span class="c000"><span class="c005">Creativity and motivation</span></span>-->
<h2 class="section" id="sec4"><span class="c006">1.1&#XA0;&#XA0;Creativity and motivation</span></h2><!--SEC END --><p><span class="c006">While this book is not intended for professional programmers, professional
programming can be a very rewarding job both financially and personally.
Building useful, elegant, and clever programs for others to use is a very
creative activity. Your computer or Personal Digital Assistant (PDA) 
usually contains many different programs from many different groups of 
programmers, each competing for your attention and interest. They try 
their best to meet your needs and give you a great user experience in the
process. In some situations, when you choose a piece of software, the 
programmers are directly compensated because of your choice.</span></p><p><span class="c006">If we think of programs as the creative output of groups of programmers,
perhaps the following figure is a more sensible version of our PDA:</span></p><div class="center"><span class="c006"><img src="book002.png" /></span></div><p><span class="c006">For now, our primary motivation is not to make money or please end users, but
instead for us to be more productive in handling the data and 
information that we will encounter in our lives.
When you first start, you will be both the programmer and the end user of
your programs. As you gain skill as a programmer and
programming feels more creative to you, your thoughts may turn
toward developing programs for others.</span></p><span class="c005">
</span><!--TOC section id="sec5" <span class="c000"><span class="c005">Computer hardware architecture</span></span>-->
<h2 class="section" id="sec5"><span class="c006">1.2&#XA0;&#XA0;Computer hardware architecture</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default3"></a><span class="c005">
</span><a id="hevea_default4"></a></p><p><span class="c006">Before we start learning the language we 
speak to give instructions to computers to 
develop software, we need to learn a small amount about 
how computers are built. If you were to take
apart your computer or cell phone and look deep
inside, you would find the following parts:</span></p><div class="center"><span class="c006"><img src="book003.png" /></span></div><p><span class="c006">The high-level definitions of these parts are as follows:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">The <span class="c009">Central Processing Unit</span> (or CPU) is 
the part of the computer that is built to be obsessed 
with &#X201C;what is next?&#X201D; If your computer is rated
at 3.0 Gigahertz, it means that the CPU will ask &#X201C;What next?&#X201D;
three billion times per second. You are going to have to 
learn how to talk fast to keep up with the CPU.</span></li><li class="li-itemize"><span class="c006">The <span class="c009">Main Memory</span> is used to store information
that the CPU needs in a hurry. The main memory is nearly as 
fast as the CPU. But the information stored in the main
memory vanishes when the computer is turned off.</span></li><li class="li-itemize"><span class="c006">The <span class="c009">Secondary Memory</span> is also used to store
information, but it is much slower than the main memory.
The advantage of the secondary memory is that it can
store information even when there is no power to the
computer. Examples of secondary memory are disk drives
or flash memory (typically found in USB sticks and portable
music players).</span></li><li class="li-itemize"><span class="c006">The <span class="c009">Input and Output Devices</span> are simply our
screen, keyboard, mouse, microphone, speaker, touchpad, etc. 
They are all of the ways we interact with the computer.</span></li><li class="li-itemize"><span class="c006">These days, most computers also have a
<span class="c009">Network Connection</span> to retrieve information over a network.
We can think of the network as a very slow place to store and
retrieve data that might not always be &#X201C;up&#X201D;. So in a sense,
the network is a slower and at times unreliable form of
<span class="c009">Secondary Memory</span>.</span></li></ul><p><span class="c006">While most of the detail of how these components work is best left 
to computer builders, it helps to have some terminology
so we can talk about these different parts as we write our programs.</span></p><p><span class="c006">As a programmer, your job is to use and orchestrate 
each of these resources to solve the problem that you need to solve
and analyze the data you get from the solution. As a programmer you will 
mostly be &#X201C;talking&#X201D; to the CPU and telling it what to 
do next. Sometimes you will tell the CPU to use the main memory,
secondary memory, network, or the input/output devices.</span></p><div class="center"><span class="c006"><img src="book004.png" /></span></div><p><span class="c006">You need to be the person who answers the CPU&#X2019;s &#X201C;What next?&#X201D; 
question. But it would be very uncomfortable to shrink you 
down to 5mm tall and insert you into the computer just so you 
could issue a command three billion times per second. So instead,
you must write down your instructions in advance.
We call these stored instructions a <span class="c009">program</span> and the act 
of writing these instructions down and getting the instructions to 
be correct <span class="c009">programming</span>.</span></p><span class="c005">
</span><!--TOC section id="sec6" <span class="c000"><span class="c005">Understanding programming</span></span>-->
<h2 class="section" id="sec6"><span class="c006">1.3&#XA0;&#XA0;Understanding programming</span></h2><!--SEC END --><p><span class="c006">In the rest of this book, we will try to turn you into a person
who is skilled in the art of programming. In the end you will be a 
<span class="c009">programmer</span> &#X2014; perhaps not a professional programmer, but 
at least you will have the skills to look at a data/information
analysis problem and develop a program to solve the problem.</span></p><p><a id="hevea_default5"></a></p><p><span class="c006">In a sense, you need two skills to be a programmer:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">First, you need to know the programming language (Python) -
you need to know the vocabulary and the grammar. You need to be able 
to spell the words in this new language properly and know how to construct 
well-formed &#X201C;sentences&#X201D; in this new language.</span></li><li class="li-itemize"><span class="c006">Second, you need to &#X201C;tell a story&#X201D;. In writing a story,
you combine words and sentences to convey an idea to the reader. 
There is a skill and art in constructing the story, and skill in
story writing is improved by doing some writing and getting some
feedback. In programming, our program is the &#X201C;story&#X201D; and the 
problem you are trying to solve is the &#X201C;idea&#X201D;.</span></li></ul><p><span class="c006">Once you learn one programming language such as Python, you will 
find it much easier to learn a second programming language such
as JavaScript or C++. The new programming language has very different 
vocabulary and grammar but the problem-solving skills 
will be the same across all programming languages.</span></p><p><span class="c006">You will learn the &#X201C;vocabulary&#X201D; and &#X201C;sentences&#X201D; of Python pretty quickly.
It will take longer for you to be able to write a coherent program
to solve a brand-new problem. We teach programming much like we teach
writing. We start reading and explaining programs, then we write 
simple programs, and then we write increasingly complex programs over time.
At some point you &#X201C;get your muse&#X201D; and see the patterns on your own
and can see more naturally how to take a problem and 
write a program that solves that problem. And once you get 
to that point, programming becomes a very pleasant and creative process. </span></p><p><span class="c006">We start with the vocabulary and structure of Python programs. Be patient
as the simple examples remind you of when you started reading for the first
time. </span></p><span class="c005">
</span><!--TOC section id="sec7" <span class="c000"><span class="c005">Words and sentences</span></span>-->
<h2 class="section" id="sec7"><span class="c006">1.4&#XA0;&#XA0;Words and sentences</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default6"></a><span class="c005">
</span><a id="hevea_default7"></a></p><p><span class="c006">Unlike human languages, the Python vocabulary is actually pretty small.
We call this &#X201C;vocabulary&#X201D; the &#X201C;reserved words&#X201D;. These are words that
have very special meaning to Python. When Python sees these words in 
a Python program, they have one and only one meaning to Python. Later
as you write programs you will make up your own words that have meaning to 
you called <span class="c009">variables</span>. You will have great latitude in choosing
your names for your variables, but you cannot use any of Python&#X2019;s 
reserved words as a name for a variable.</span></p><p><span class="c006">When we train a dog, we use special words like
&#X201C;sit&#X201D;, &#X201C;stay&#X201D;, and &#X201C;fetch&#X201D;. When you talk to a dog and
don&#X2019;t use any of the reserved words, they just look at you with a 
quizzical look on their face until you say a reserved word. 
For example, if you say, 
&#X201C;I wish more people would walk to improve their overall health&#X201D;, 
what most dogs likely hear is,
&#X201C;blah blah blah <span class="c009">walk</span> blah blah blah blah.&#X201D;
That is because &#X201C;walk&#X201D; is a reserved word in dog language. Many
might suggest that the language between humans and cats has no
reserved words</span><sup><a id="text2" href="#note2"><span class="c006">1</span></a></sup><span class="c006">.</span></p><p><span class="c006">The reserved words in the language where humans talk to 
Python include the following:</span></p><pre class="verbatim"><span class="c004">and       del       from      not       while    
as        elif      global    or        with     
assert    else      if        pass      yield    
break     except    import    print              
class     exec      in        raise              
continue  finally   is        return             
def       for       lambda    try
</span></pre><p><span class="c006">That is it, and unlike a dog, Python is already completely trained.
When you say &#X201C;try&#X201D;, Python will try every time you say it without
fail.</span></p><p><span class="c006">We will learn these reserved words and how they are used in good time,
but for now we will focus on the Python equivalent of &#X201C;speak&#X201D; (in 
human-to-dog language). The nice thing about telling Python to speak
is that we can even tell it what to say by giving it a message in quotes:</span></p><pre class="verbatim"><span class="c004">print 'Hello world!'
</span></pre><p><span class="c006">And we have even written our first syntactically correct Python sentence.
Our sentence starts with the reserved word <span class="c009">print</span> followed
by a string of text of our choosing enclosed in single quotes.</span></p><span class="c005">
</span><!--TOC section id="sec8" <span class="c000"><span class="c005">Conversing with Python</span></span>-->
<h2 class="section" id="sec8"><span class="c006">1.5&#XA0;&#XA0;Conversing with Python</span></h2><!--SEC END --><p><span class="c006">Now that we have a word and a simple sentence that we know in Python,
we need to know how to start a conversation with Python to test 
our new language skills.</span></p><p><span class="c006">Before you can converse with Python, you must first install the Python
software on your computer and learn how to start Python on your 
computer. That is too much detail for this chapter so I suggest
that you consult <span class="c001">www.pythonlearn.com</span> where I have detailed
instructions and screencasts of setting up and starting Python 
on Macintosh and Windows systems. At some point, you will be in 
a terminal or command window and you will type <span class="c009">python</span> and 
the Python interpreter will start executing in interactive mode
and appear somewhat as follows:
</span><a id="hevea_default8"></a></p><pre class="verbatim"><span class="c004">Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; 
</span></pre><p><span class="c006">The <span class="c001">&gt;&gt;&gt;</span> prompt is the Python interpreter&#X2019;s way of asking you, &#X201C;What
do you want me to do next?&#X201D; Python is ready to have a conversation with
you. All you have to know is how to speak the Python language.</span></p><p><span class="c006">Let&#X2019;s say for example that you did not know even the simplest Python language
words or sentences. You might want to use the standard line that astronauts 
use when they land on a faraway planet and try to speak with the inhabitants
of the planet:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; I come in peace, please take me to your leader
  File "&lt;stdin&gt;", line 1
    I come in peace, please take me to your leader
         ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</span></pre><p><span class="c006">This is not going so well. Unless you think of something quickly,
the inhabitants of the planet are likely to stab you with their spears, 
put you on a spit, roast you over a fire, and eat you for dinner.</span></p><p><span class="c006">Luckily you brought a copy of this book on your travels, and you thumb to
this very page and try again:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print 'Hello world!'
Hello world!
</span></pre><p><span class="c006">This is looking much better, so you try to communicate some
more:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print 'You must be the legendary god that comes from the sky'
You must be the legendary god that comes from the sky
&gt;&gt;&gt; print 'We have been waiting for you for a long time'
We have been waiting for you for a long time
&gt;&gt;&gt; print 'Our legend says you will be very tasty with mustard'
Our legend says you will be very tasty with mustard
&gt;&gt;&gt; print 'We will have a feast tonight unless you say
  File "&lt;stdin&gt;", line 1
    print 'We will have a feast tonight unless you say
                                                     ^
SyntaxError: EOL while scanning string literal
&gt;&gt;&gt; 
</span></pre><p><span class="c006">The conversation was going so well for a while and then you
made the tiniest mistake using the Python language and Python 
brought the spears back out.</span></p><p><span class="c006">At this point, you should also realize that while Python 
is amazingly complex and powerful and very picky about 
the syntax you use to communicate with it, Python is <em>not</em> intelligent. You are really just having a conversation
with yourself, but using proper syntax.</span></p><p><span class="c006">In a sense, when you use a program written by someone else
the conversation is between you and those other
programmers with Python acting as an intermediary. Python
is a way for the creators of programs to express how the 
conversation is supposed to proceed. And
in just a few more chapters, you will be one of those
programmers using Python to talk to the users of your program.</span></p><p><span class="c006">Before we leave our first conversation with the Python 
interpreter, you should probably know the proper way
to say &#X201C;good-bye&#X201D; when interacting with the inhabitants
of Planet Python:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; good-bye
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
NameError: name 'good' is not defined

&gt;&gt;&gt; if you don't mind, I need to leave
  File "&lt;stdin&gt;", line 1
    if you don't mind, I need to leave
             ^
SyntaxError: invalid syntax

&gt;&gt;&gt; quit()
</span></pre><p><span class="c006">You will notice that the error is different for the first two
incorrect attempts. The second error is different because 
<span class="c009">if</span> is a reserved word and Python saw the reserved word
and thought we were trying to say something but got the syntax
of the sentence wrong.</span></p><p><span class="c006">The proper way to say &#X201C;good-bye&#X201D; to Python is to enter 
<span class="c009">quit()</span> at the interactive chevron <span class="c001">&gt;&gt;&gt;</span> prompt.
It would have probably taken you quite a while to guess that 
one, so having a book handy probably will turn out 
to be helpful.</span></p><span class="c005">
</span><!--TOC section id="sec9" <span class="c000"><span class="c005">Terminology: interpreter and compiler</span></span>-->
<h2 class="section" id="sec9"><span class="c006">1.6&#XA0;&#XA0;Terminology: interpreter and compiler</span></h2><!--SEC END --><p><span class="c006">Python is a <span class="c009">high-level</span> language intended to be relatively
straightforward for humans to read and write and for computers
to read and process. Other high-level languages include Java, C++,
PHP, Ruby, Basic, Perl, JavaScript, and many more. The actual hardware
inside the Central Processing Unit (CPU) does not understand any
of these high-level languages.</span></p><p><span class="c006">The CPU understands a language we call <span class="c009">machine language</span>. Machine
language is very simple and frankly very tiresome to write because it 
is represented all in zeros and ones:</span></p><pre class="verbatim"><span class="c004">01010001110100100101010000001111
11100110000011101010010101101101
...
</span></pre><p><span class="c006">Machine language seems quite simple on the surface, given that there 
are only zeros and ones, but its syntax is even more complex
and far more intricate than Python. So very few programmers ever write
machine language. Instead we build various translators to allow
programmers to write in high-level languages like Python or JavaScript
and these translators convert the programs to machine language for actual
execution by the CPU.</span></p><p><span class="c006">Since machine language is tied to the computer hardware, machine language
is not <span class="c009">portable</span> across different types of hardware. Programs written in 
high-level languages can be moved between different computers by using a 
different interpreter on the new machine or recompiling the code to create
a machine language version of the program for the new machine.</span></p><p><span class="c006">These programming language translators fall into two general categories:
(1) interpreters and (2) compilers.</span></p><p><span class="c006">An <span class="c009">interpreter</span> reads the source code of the program as written by the
programmer, parses the source code, and interprets the instructions on the fly.
Python is an interpreter and when we are running Python interactively, 
we can type a line of Python (a sentence) and Python processes it immediately
and is ready for us to type another line of Python. </span></p><p><span class="c006">Some of the lines of Python tell Python that you want it to remember some 
value for later. We need to pick a name for that value to be remembered and
we can use that symbolic name to retrieve the value later. We use the 
term <span class="c009">variable</span> to refer to the labels we use to refer to this stored data.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 6
&gt;&gt;&gt; print x
6
&gt;&gt;&gt; y = x * 7
&gt;&gt;&gt; print y
42
&gt;&gt;&gt; 
</span></pre><p><span class="c006">In this example, we ask Python to remember the value six and use the label <span class="c009">x</span>
so we can retrieve the value later. We verify that Python has actually remembered
the value using <span class="c009">print</span>. Then we ask Python to retrieve <span class="c009">x</span> and multiply
it by seven and put the newly computed value in <span class="c009">y</span>. Then we ask Python to print out
the value currently in <span class="c009">y</span>.</span></p><p><span class="c006">Even though we are typing these commands into Python one line at a time, Python
is treating them as an ordered sequence of statements with later statements able
to retrieve data created in earlier statements. We are writing our first 
simple paragraph with four sentences in a logical and meaningful order.</span></p><p><span class="c006">It is the nature of an <span class="c009">interpreter</span> to be able to have an interactive conversation
as shown above. A <span class="c009">compiler</span> needs to be handed the entire program in a file, and then 
it runs a process to translate the high-level source code into machine language
and then the compiler puts the resulting machine language into a file for later
execution.</span></p><p><span class="c006">If you have a Windows system, often these executable machine language programs have a
suffix of &#X201C;.exe&#X201D; or &#X201C;.dll&#X201D; which stand for &#X201C;executable&#X201D; and &#X201C;dynamic link
library&#X201D; respectively. In Linux and Macintosh, there is no suffix that uniquely marks
a file as executable.</span></p><p><span class="c006">If you were to open an executable file in a text editor, it would look 
completely crazy and be unreadable:</span></p><pre class="verbatim"><span class="c004">^?ELF^A^A^A^@^@^@^@^@^@^@^@^@^B^@^C^@^A^@^@^@\xa0\x82
^D^H4^@^@^@\x90^]^@^@^@^@^@^@4^@ ^@^G^@(^@$^@!^@^F^@
^@^@4^@^@^@4\x80^D^H4\x80^D^H\xe0^@^@^@\xe0^@^@^@^E
^@^@^@^D^@^@^@^C^@^@^@^T^A^@^@^T\x81^D^H^T\x81^D^H^S
^@^@^@^S^@^@^@^D^@^@^@^A^@^@^@^A\^D^HQVhT\x83^D^H\xe8
....
</span></pre><p><span class="c006">It is not easy to read or write machine language, so it is nice that we have
<span class="c009">interpreters</span> and <span class="c009">compilers</span> that allow us to write in high-level
languages like Python or C.</span></p><p><span class="c006">Now at this point in our discussion of compilers and interpreters, you should 
be wondering a bit about the Python interpreter itself. What language is 
it written in? Is it written in a compiled language? When we type
&#X201C;python&#X201D;, what exactly is happening?</span></p><p><span class="c006">The Python interpreter is written in a high-level language called &#X201C;C&#X201D;. 
You can look at the actual source code for the Python interpreter by
going to <span class="c001">www.python.org</span> and working your way to their source code.
So Python is a program itself and it is compiled into machine code.
When you installed Python on your computer (or the vendor installed it),
you copied a machine-code copy of the translated Python program onto your
system. In Windows, the executable machine code for Python itself is likely
in a file with a name like:</span></p><pre class="verbatim"><span class="c004">C:\Python27\python.exe
</span></pre><p><span class="c006">That is more than you really need to know to be a Python programmer, but
sometimes it pays to answer those little nagging questions right at 
the beginning.</span></p><span class="c005">
</span><!--TOC section id="sec10" <span class="c000"><span class="c005">Writing a program</span></span>-->
<h2 class="section" id="sec10"><span class="c006">1.7&#XA0;&#XA0;Writing a program</span></h2><!--SEC END --><p><span class="c006">Typing commands into the Python interpreter is a great way to experiment 
with Python&#X2019;s features, but it is not recommended for solving more complex problems.</span></p><p><span class="c006">When we want to write a program, 
we use a text editor to write the Python instructions into a file,
which is called a <span class="c009">script</span>. By
convention, Python scripts have names that end with <span class="c001">.py</span>.</span></p><p><a id="hevea_default9"></a></p><p><span class="c006">To execute the script, you have to tell the Python interpreter 
the name of the file. In a Unix or Windows command window, 
you would type <span class="c001">python hello.py</span> as follows:</span></p><pre class="verbatim"><span class="c004">csev$ cat hello.py
print 'Hello world!'
csev$ python hello.py
Hello world!
csev$
</span></pre><p><span class="c006">The &#X201C;csev$&#X201D; is the operating system prompt, and the &#X201C;cat hello.py&#X201D; is 
showing us that the file &#X201C;hello.py&#X201D; has a one-line Python program to print
a string.</span></p><p><span class="c006">We call the Python interpreter and tell it to read its source code from
the file &#X201C;hello.py&#X201D; instead of prompting us for lines of Python code
interactively.</span></p><p><span class="c006">You will notice that there was no need to have <span class="c009">quit()</span> at the end of
the Python program in the file. When Python is reading your source code
from a file, it knows to stop when it reaches the end of the file.</span></p><span class="c005">
</span><!--TOC section id="sec11" <span class="c000"><span class="c005">What is a program?</span></span>-->
<h2 class="section" id="sec11"><span class="c006">1.8&#XA0;&#XA0;What is a program?</span></h2><!--SEC END --><p><span class="c006">The definition of a <span class="c009">program</span> at its most basic is a sequence
of Python statements that have been crafted to do something.
Even our simple <span class="c009">hello.py</span> script is a program. It is a one-line
program and is not particularly useful, but in the strictest definition,
it is a Python program.</span></p><p><span class="c006">It might be easiest to understand what a program is by thinking about a problem 
that a program might be built to solve, and then looking at a program
that would solve that problem.</span></p><p><span class="c006">Lets say you are doing Social Computing research on Facebook posts and 
you are interested in the most frequently used word in a series of posts.
You could print out the stream of Facebook posts and pore over the text
looking for the most common word, but that would take a long time and be very 
mistake prone. You would be smart to write a Python program to handle the
task quickly and accurately so you can spend the weekend doing something 
fun.</span></p><p><span class="c006">For example, look at the following text about a clown and a car. Look at the 
text and figure out the most common word and how many times it occurs.</span></p><pre class="verbatim"><span class="c004">the clown ran after the car and the car ran into the tent 
and the tent fell down on the clown and the car 
</span></pre><p><span class="c006">Then imagine that you are doing this task looking at millions of lines of 
text. Frankly it would be quicker for you to learn Python and write a 
Python program to count the words than it would be to manually 
scan the words.</span></p><p><span class="c006">The even better news is that I already came up with a simple program to 
find the most common word in a text file. I wrote it,
tested it, and now I am giving it to you to use so you can save some time.</span></p><pre class="verbatim"><span class="c004">name = raw_input('Enter file:')
handle = open(name, 'r')
text = handle.read()
words = text.split()
counts = dict()

for word in words:
   counts[word] = counts.get(word,0) + 1

bigcount = None
bigword = None
for word,count in counts.items():
    if bigcount is None or count &gt; bigcount:
        bigword = word
        bigcount = count

print bigword, bigcount
</span></pre><p><span class="c006">You don&#X2019;t even need to know Python to use this program. You will need to get through 
Chapter 10 of this book to fully understand the awesome Python techniques that were
used to make the program. You are the end user, you simply use the program and marvel
at its cleverness and how it saved you so much manual effort.
You simply type the code 
into a file called <span class="c009">words.py</span> and run it or you download the source 
code from <span class="c001">http://www.pythonlearn.com/code/</span> and run it.</span></p><p><a id="hevea_default10"></a><span class="c006">
This is a good example of how Python and the Python language are acting as an intermediary
between you (the end user) and me (the programmer). Python is a way for us to exchange useful
instruction sequences (i.e., programs) in a common language that can be used by anyone who 
installs Python on their computer. So neither of us are talking <em>to Python</em>,
instead we are communicating with each other <em>through</em> Python.</span></p><span class="c005">
</span><!--TOC section id="sec12" <span class="c000"><span class="c005">The building blocks of programs</span></span>-->
<h2 class="section" id="sec12"><span class="c006">1.9&#XA0;&#XA0;The building blocks of programs</span></h2><!--SEC END --><p><span class="c006">In the next few chapters, we will learn more about the vocabulary, sentence structure,
paragraph structure, and story structure of Python. We will learn about the powerful
capabilities of Python and how to compose those capabilities together to create useful
programs.</span></p><p><span class="c006">There are some low-level conceptual patterns that we use to construct programs. These
constructs are not just for Python programs, they are part of every programming language
from machine language up to the high-level languages.</span></p><dl class="description"><dt class="dt-description"><span class="c010">input:</span></dt><dd class="dd-description"><span class="c006"> Get data from the &#X201C;outside world&#X201D;. This might be 
reading data from a file, or even some kind of sensor like 
a microphone or GPS. In our initial programs, our input will come from the user
typing data on the keyboard.</span></dd><dt class="dt-description"><span class="c010">output:</span></dt><dd class="dd-description"><span class="c006"> Display the results of the program on a screen
or store them in a file or perhaps write them to a device like a
speaker to play music or speak text.</span></dd><dt class="dt-description"><span class="c010">sequential execution:</span></dt><dd class="dd-description"><span class="c006"> Perform statements one after
another in the order they are encountered in the script.</span></dd><dt class="dt-description"><span class="c010">conditional execution:</span></dt><dd class="dd-description"><span class="c006"> Check for certain conditions and
then execute or skip a sequence of statements.</span></dd><dt class="dt-description"><span class="c010">repeated execution:</span></dt><dd class="dd-description"><span class="c006"> Perform some set of statements 
repeatedly, usually with
some variation.</span></dd><dt class="dt-description"><span class="c010">reuse:</span></dt><dd class="dd-description"><span class="c006"> Write a set of instructions once and give them a name
and then reuse those instructions as needed throughout your program.</span></dd></dl><p><span class="c006">It sounds almost too simple to be true, and of course it is never
so simple. It is like saying that walking is simply
&#X201C;putting one foot in front of the other&#X201D;. The &#X201C;art&#X201D; 
of writing a program is composing and weaving these
basic elements together many times over to produce something
that is useful to its users.</span></p><p><span class="c006">The word counting program above directly uses all of 
these patterns except for one.</span></p><span class="c005">
</span><!--TOC section id="sec13" <span class="c000"><span class="c005">What could possibly go wrong?</span></span>-->
<h2 class="section" id="sec13"><span class="c006">1.10&#XA0;&#XA0;What could possibly go wrong?</span></h2><!--SEC END --><p><span class="c006">As we saw in our earliest conversations with Python, we must
communicate very precisely when we write Python code. The smallest
deviation or mistake will cause Python to give up looking at your
program.</span></p><p><span class="c006">Beginning programmers often take the fact that Python leaves no
room for errors as evidence that Python is mean, hateful, and cruel.
While Python seems to like everyone else, Python knows them 
personally and holds a grudge against them. Because of this grudge,
Python takes our perfectly written programs and rejects them as 
&#X201C;unfit&#X201D; just to torment us.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; primt 'Hello world!'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world!'
                       ^
SyntaxError: invalid syntax
&gt;&gt;&gt; primt 'Hello world'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world'
                      ^
SyntaxError: invalid syntax
&gt;&gt;&gt; I hate you Python!
  File "&lt;stdin&gt;", line 1
    I hate you Python!
         ^
SyntaxError: invalid syntax
&gt;&gt;&gt; if you come out of there, I would teach you a lesson
  File "&lt;stdin&gt;", line 1
    if you come out of there, I would teach you a lesson
              ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</span></pre><p><span class="c006">There is little to be gained by arguing with Python. It is just a tool.
It has no emotions and it is happy and ready to serve you whenever you
need it. Its error messages sound harsh, but they are just Python&#X2019;s
call for help. It has looked at what you typed, and it simply cannot
understand what you have entered.</span></p><p><span class="c006">Python is much more like a dog, loving you unconditionally, having a few
key words that it understands, looking you with a sweet look on its
face (<span class="c001">&gt;&gt;&gt;</span>), and waiting for you to say something it understands.
When Python says &#X201C;SyntaxError: invalid syntax&#X201D;, it is simply wagging
its tail and saying, &#X201C;You seemed to say something but I just don&#X2019;t
understand what you meant, but please keep talking to me (<span class="c001">&gt;&gt;&gt;</span>).&#X201D;</span></p><p><span class="c006">As your programs become increasingly sophisticated, you will encounter three 
general types of errors:</span></p><dl class="description"><dt class="dt-description"><span class="c010">Syntax errors:</span></dt><dd class="dd-description"><span class="c006"> These are the first errors you will make and the easiest
to fix. A syntax error means that you have violated the &#X201C;grammar&#X201D; rules of Python.
Python does its best to point right at the line and character where 
it noticed it was confused. The only tricky bit of syntax errors is that sometimes
the mistake that needs fixing is actually earlier in the program than where Python
<em>noticed</em> it was confused. So the line and character that Python indicates in 
a syntax error may just be a starting point for your investigation.</span></dd><dt class="dt-description"><span class="c010">Logic errors:</span></dt><dd class="dd-description"><span class="c006"> A logic error is when your program has good syntax but there is a mistake 
in the order of the statements or perhaps a mistake in how the statements relate to one another.
A good example of a logic error might be, &#X201C;take a drink from your water bottle, put it 
in your backpack, walk to the library, and then put the top back on the bottle.&#X201D;</span></dd><dt class="dt-description"><span class="c010">Semantic errors:</span></dt><dd class="dd-description"><span class="c006"> A semantic error is when your description of the steps to take 
is syntactically perfect and in the right order, but there is simply a mistake in 
the program. The program is perfectly correct but it does not do what
you <em>intended</em> for it to do. A simple example would
be if you were giving a person directions to a restaurant and said, &#X201C;...when you reach
the intersection with the gas station, turn left and go one mile and the restaurant
is a red building on your left.&#X201D; Your friend is very late and calls you to tell you that
they are on a farm and walking around behind a barn, with no sign of a restaurant. 
Then you say &#X201C;did you turn left or right at the gas station?&#X201D; and 
they say, &#X201C;I followed your directions perfectly, I have 
them written down, it says turn left and go one mile at the gas station.&#X201D; Then you say,
&#X201C;I am very sorry, because while my instructions were syntactically correct, they 
sadly contained a small but undetected semantic error.&#X201D;. </span></dd></dl><p><span class="c006">Again in all three types of errors, Python is merely trying its hardest to 
do exactly what you have asked.</span></p><span class="c005">
</span><!--TOC section id="sec14" <span class="c000"><span class="c005">The learning journey</span></span>-->
<h2 class="section" id="sec14"><span class="c006">1.11&#XA0;&#XA0;The learning journey</span></h2><!--SEC END --><p><span class="c006">As you progress through the rest of the book, don&#X2019;t be afraid if the concepts 
don&#X2019;t seem to fit together well the first time. When you were learning to speak, 
it was not a problem for your first few years that you just made cute gurgling noises.
And it was OK if it took six months for you to move from simple vocabulary to 
simple sentences and took 5-6 more years to move from sentences to paragraphs, and a
few more years to be able to write an interesting complete short story on your own.</span></p><p><span class="c006">We want you to learn Python much more rapidly, so we teach it all at the same time
over the next few chapters. 
But it is like learning a new language that takes time to absorb and understand
before it feels natural.
That leads to some confusion as we visit and revisit
topics to try to get you to see the big picture while we are defining the tiny
fragments that make up that big picture. While the book is written linearly, and
if you are taking a course it will progress in a linear fashion, don&#X2019;t hesitate
to be very nonlinear in how you approach the material. Look forwards and backwards
and read with a light touch. By skimming more advanced material without 
fully understanding the details, you can get a better understanding of the &#X201C;why?&#X201D; 
of programming. By reviewing previous material and even redoing earlier 
exercises, you will realize that you actually learned a lot of material even 
if the material you are currently staring at seems a bit impenetrable.</span></p><p><span class="c006">Usually when you are learning your first programming language, there are a few
wonderful &#X201C;Ah Hah!&#X201D; moments where you can look up from pounding away at some rock
with a hammer and chisel and step away and see that you are indeed building 
a beautiful sculpture.</span></p><p><span class="c006">If something seems particularly hard, there is usually no value in staying up all 
night and staring at it. Take a break, take a nap, have a snack, explain what you 
are having a problem with to someone (or perhaps your dog), and then come back to it with
fresh eyes. I assure you that once you learn the programming concepts in the book
you will look back and see that it was all really easy and elegant and it simply 
took you a bit of time to absorb it.</span></p><span class="c005">
</span><!--TOC section id="sec15" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec15"><span class="c006">1.12&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">bug:</span></dt><dd class="dd-description"><span class="c006"> An error in a program.
</span><a id="hevea_default11"></a></dd><dt class="dt-description"><span class="c010">central processing unit:</span></dt><dd class="dd-description"><span class="c006"> The heart of any computer. It is what
runs the software that we write; also called &#X201C;CPU&#X201D; or &#X201C;the processor&#X201D;.
</span><a id="hevea_default12"></a><span class="c005">
</span><a id="hevea_default13"></a></dd><dt class="dt-description"><span class="c010">compile:</span></dt><dd class="dd-description"><span class="c006"> To translate a program written in a high-level language
into a low-level language all at once, in preparation for later
execution.
</span><a id="hevea_default14"></a></dd><dt class="dt-description"><span class="c010">high-level language:</span></dt><dd class="dd-description"><span class="c006"> A programming language like Python that
is designed to be easy for humans to read and write.
</span><a id="hevea_default15"></a></dd><dt class="dt-description"><span class="c010">interactive mode:</span></dt><dd class="dd-description"><span class="c006"> A way of using the Python interpreter by
typing commands and expressions at the prompt.
</span><a id="hevea_default16"></a></dd><dt class="dt-description"><span class="c010">interpret:</span></dt><dd class="dd-description"><span class="c006"> To execute a program in a high-level language
by translating it one line at a time.
</span><a id="hevea_default17"></a></dd><dt class="dt-description"><span class="c010">low-level language:</span></dt><dd class="dd-description"><span class="c006"> A programming language that is designed
to be easy for a computer to execute; also called &#X201C;machine code&#X201D; or
&#X201C;assembly language&#X201D;.
</span><a id="hevea_default18"></a></dd><dt class="dt-description"><span class="c010">machine code:</span></dt><dd class="dd-description"><span class="c006"> The lowest-level language for software, which 
is the language that is directly executed by the central processing unit 
(CPU).
</span><a id="hevea_default19"></a></dd><dt class="dt-description"><span class="c010">main memory:</span></dt><dd class="dd-description"><span class="c006"> Stores programs and data. Main memory loses 
its information when the power is turned off.
</span><a id="hevea_default20"></a></dd><dt class="dt-description"><span class="c010">parse:</span></dt><dd class="dd-description"><span class="c006"> To examine a program and analyze the syntactic structure.
</span><a id="hevea_default21"></a></dd><dt class="dt-description"><span class="c010">portability:</span></dt><dd class="dd-description"><span class="c006"> A property of a program that can run on more
than one kind of computer.
</span><a id="hevea_default22"></a></dd><dt class="dt-description"><span class="c010">print statement:</span></dt><dd class="dd-description"><span class="c006"> An instruction that causes the Python
interpreter to display a value on the screen.
</span><a id="hevea_default23"></a><span class="c005">
</span><a id="hevea_default24"></a></dd><dt class="dt-description"><span class="c010">problem solving:</span></dt><dd class="dd-description"><span class="c006"> The process of formulating a problem, finding
a solution, and expressing the solution.
</span><a id="hevea_default25"></a></dd><dt class="dt-description"><span class="c010">program:</span></dt><dd class="dd-description"><span class="c006"> A set of instructions that specifies a computation.
</span><a id="hevea_default26"></a></dd><dt class="dt-description"><span class="c010">prompt:</span></dt><dd class="dd-description"><span class="c006"> When a program displays a message and pauses for the 
user to type some input to the program.
</span><a id="hevea_default27"></a></dd><dt class="dt-description"><span class="c010">secondary memory:</span></dt><dd class="dd-description"><span class="c006"> Stores programs and data and retains its 
information even when the power is turned off. Generally slower 
than main memory. Examples of secondary memory include disk 
drives and flash memory in USB sticks.
</span><a id="hevea_default28"></a></dd><dt class="dt-description"><span class="c010">semantics:</span></dt><dd class="dd-description"><span class="c006"> The meaning of a program.
</span><a id="hevea_default29"></a></dd><dt class="dt-description"><span class="c010">semantic error:</span></dt><dd class="dd-description"><span class="c006"> An error in a program that makes it do something
other than what the programmer intended.
</span><a id="hevea_default30"></a></dd><dt class="dt-description"><span class="c010">source code:</span></dt><dd class="dd-description"><span class="c006"> A program in a high-level language.
</span><a id="hevea_default31"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec16" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec16"><span class="c006">1.13&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
What is the function of the secondary memory in a computer?</em></span><p><span class="c006"><em>a) Execute all of the computation and logic of the program<br />
b) Retrieve web pages over the Internet<br />
c) Store information for the long term &#X2013; even beyond a power cycle<br />
d) Take input from the user 
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
What is a program?
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
What is the difference between a compiler and an interpreter?
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
Which of the following contains &#X201C;machine code&#X201D;?</em></span><p><span class="c006"><em>a) The Python interpreter<br />
b) The keyboard<br />
c) Python source file<br />
d) A word processing document
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
What is wrong with the following code:</em></span><pre class="verbatim"><span class="c004"><em>&gt;&gt;&gt; primt 'Hello world!'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world!'
                       ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;6</span>&#XA0;&#XA0;<em>
Where in the computer is a variable such as &#X201C;X&#X201D; stored 
after the following Python line finishes?</em></span><pre class="verbatim"><span class="c004"><em>x = 123
</em></span></pre><p><span class="c006"><em>a) Central processing unit<br />
b) Main Memory<br />
c) Secondary Memory<br />
d) Input Devices<br />
e) Output Devices
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;7</span>&#XA0;&#XA0;<em>
What will the following program print out:</em></span><pre class="verbatim"><span class="c004"><em>x = 43
x = x + 1
print x
</em></span></pre><p><span class="c006"><em>a) 43<br />
b) 44<br />
c) x + 1<br />
d) Error because x = x + 1 is not possible mathematically
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;8</span>&#XA0;&#XA0;<em>
Explain each of the following using an example of a human capability: 
(1) Central processing unit, (2) Main Memory, (3) Secondary Memory, 
(4) Input Device, and
(5) Output Device.
For example, &#X201C;What is the human equivalent to a Central Processing Unit&#X201D;? 
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;9</span>&#XA0;&#XA0;<em>
How do you fix a &#X201C;Syntax Error&#X201D;?
</em></span></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note2" href="#text2"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext"><span class="c001">http://xkcd.com/231/</span></div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec17" <span class="c000"><span class="c005">Variables, expressions, and statements</span></span>-->
<h1 class="chapter" id="sec17"><span class="c006">Chapter&#XA0;2&#XA0;&#XA0;Variables, expressions, and statements</span></h1><!--SEC END --><span class="c005">
</span><!--TOC section id="sec18" <span class="c000"><span class="c005">Values and types</span></span>-->
<h2 class="section" id="sec18"><span class="c006">2.1&#XA0;&#XA0;Values and types</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default32"></a><span class="c005">
</span><a id="hevea_default33"></a><span class="c005">
</span><a id="hevea_default34"></a></p><p><span class="c006">A <span class="c009">value</span> is one of the basic things a program works with,
like a letter or a
number. The values we have seen so far
are <span class="c001">1</span>, <span class="c001">2</span>, and
<code>'Hello, World!'</code></span></p><p><span class="c006">These values belong to different <span class="c009">types</span>:
<span class="c001">2</span> is an integer, and <code>'Hello, World!'</code> is a <span class="c009">string</span>,
so called because it contains a &#X201C;string&#X201D; of letters.
You (and the interpreter) can identify
strings because they are enclosed in quotation marks.</span></p><p><a id="hevea_default35"></a></p><p><span class="c006">The <span class="c001">print</span> statement also works for integers. We use the 
<span class="c001">python</span> command to start the interpreter.</span></p><pre class="verbatim"><span class="c004">python
&gt;&gt;&gt; print 4
4
</span></pre><p><span class="c006">If you are not sure what type a value has, the interpreter can tell you.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type('Hello, World!')
&lt;type 'str'&gt;
&gt;&gt;&gt; type(17)
&lt;type 'int'&gt;
</span></pre><p><span class="c006">Not surprisingly, strings belong to the type <span class="c001">str</span> and
integers belong to the type <span class="c001">int</span>. Less obviously, numbers
with a decimal point belong to a type called <span class="c001">float</span>,
because these numbers are represented in a
format called <span class="c009">floating point</span>.</span></p><p><a id="hevea_default36"></a><span class="c005">
</span><a id="hevea_default37"></a><span class="c005">
</span><a id="hevea_default38"></a><span class="c005">
</span><a id="hevea_default39"></a><span class="c005">
</span><a id="hevea_default40"></a><span class="c005">
</span><a id="hevea_default41"></a><span class="c005">
</span><a id="hevea_default42"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type(3.2)
&lt;type 'float'&gt;
</span></pre><p><span class="c006">What about values like <code>'17'</code> and <code>'3.2'</code>?
They look like numbers, but they are in quotation marks like
strings.</span></p><p><a id="hevea_default43"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type('17')
&lt;type 'str'&gt;
&gt;&gt;&gt; type('3.2')
&lt;type 'str'&gt;
</span></pre><p><span class="c006">They&#X2019;re strings.</span></p><p><span class="c006">When you type a large integer, you might be tempted to use commas
between groups of three digits, as in <span class="c001">1,000,000</span>. This is not a
legal integer in Python, but it is legal:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print 1,000,000
1 0 0
</span></pre><p><span class="c006">Well, that&#X2019;s not what we expected at all! Python interprets <span class="c001">1,000,000</span> as a comma-separated sequence of integers, which it
prints with spaces between.</span></p><p><a id="hevea_default44"></a><span class="c005">
</span><a id="hevea_default45"></a><span class="c005">
</span><a id="hevea_default46"></a></p><p><span class="c006">This is the first example we have seen of a semantic error: the code
runs without producing an error message, but it doesn&#X2019;t do the
&#X201C;right&#X201D; thing.</span></p><span class="c005">
</span><!--TOC section id="sec19" <span class="c000"><span class="c005">Variables</span></span>-->
<h2 class="section" id="sec19"><span class="c006">2.2&#XA0;&#XA0;Variables</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default47"></a><span class="c005">
</span><a id="hevea_default48"></a><span class="c005">
</span><a id="hevea_default49"></a></p><p><span class="c006">One of the most powerful features of a programming language is the
ability to manipulate <span class="c009">variables</span>. A variable is a name that
refers to a value.</span></p><p><span class="c006">An <span class="c009">assignment statement</span> creates new variables and gives
them values:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; message = 'And now for something completely different'
&gt;&gt;&gt; n = 17
&gt;&gt;&gt; pi = 3.1415926535897931
</span></pre><p><span class="c006">This example makes three assignments. The first assigns a string
to a new variable named <span class="c001">message</span>;
the second assigns the integer <span class="c001">17</span> to <span class="c001">n</span>; the third
assigns the (approximate) value of &#X3C0; to <span class="c001">pi</span>.</span></p><p><span class="c006">To display the value of a variable, you can use a print statement:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print n
17
&gt;&gt;&gt; print pi
3.14159265359
</span></pre><p><span class="c006">The type of a variable is the type of the value it refers to.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type(message)
&lt;type 'str'&gt;
&gt;&gt;&gt; type(n)
&lt;type 'int'&gt;
&gt;&gt;&gt; type(pi)
&lt;type 'float'&gt;
</span></pre><span class="c005">
</span><!--TOC section id="sec20" <span class="c000"><span class="c005">Variable names and keywords</span></span>-->
<h2 class="section" id="sec20"><span class="c006">2.3&#XA0;&#XA0;Variable names and keywords</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default50"></a></p><p><span class="c006">Programmers generally choose names for their variables that
are meaningful and document what the variable is used for.</span></p><p><span class="c006">Variable names can be arbitrarily long. They can contain
both letters and numbers, but they cannot start with a number.
It is legal to use uppercase letters, but it is a good idea
to begin variable names with a lowercase letter (you&#X2019;ll
see why later).</span></p><p><span class="c006">The underscore character (<code>_</code>) can appear in a name.
It is often used in names with multiple words, such as
<code>my_name</code> or <code>airspeed_of_unladen_swallow</code>.
Variable names can start with an underscore character, but
we generally avoid doing this unless we are writing library 
code for others to use.</span></p><p><a id="hevea_default51"></a></p><p><span class="c006">If you give a variable an illegal name, you get a syntax error:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 76trombones = 'big parade'
SyntaxError: invalid syntax
&gt;&gt;&gt; more@ = 1000000
SyntaxError: invalid syntax
&gt;&gt;&gt; class = 'Advanced Theoretical Zymurgy'
SyntaxError: invalid syntax
</span></pre><p><span class="c006"><span class="c001">76trombones</span> is illegal because it begins with a number.
<span class="c001">more@</span> is illegal because it contains an illegal character, <span class="c001">@</span>. But what&#X2019;s wrong with <span class="c001">class</span>?</span></p><p><span class="c006">It turns out that <span class="c001">class</span> is one of Python&#X2019;s <span class="c009">keywords</span>. The
interpreter uses keywords to recognize the structure of the program,
and they cannot be used as variable names.</span></p><p><a id="hevea_default52"></a></p><p><span class="c006">Python reserves 31 keywords</span><sup><a id="text3" href="#note3"><span class="c006">1</span></a></sup><span class="c006"> for its use:</span></p><pre class="verbatim"><span class="c004">and       del       from      not       while    
as        elif      global    or        with     
assert    else      if        pass      yield    
break     except    import    print              
class     exec      in        raise              
continue  finally   is        return             
def       for       lambda    try
</span></pre><p><span class="c006">You might want to keep this list handy. If the interpreter complains
about one of your variable names and you don&#X2019;t know why, see if it
is on this list.</span></p><span class="c005">
</span><!--TOC section id="sec21" <span class="c000"><span class="c005">Statements</span></span>-->
<h2 class="section" id="sec21"><span class="c006">2.4&#XA0;&#XA0;Statements</span></h2><!--SEC END --><p><span class="c006">A <span class="c009">statement</span> is a unit of code that the Python interpreter can
execute. We have seen two kinds of statements: print
and assignment.</span></p><p><a id="hevea_default53"></a><span class="c005">
</span><a id="hevea_default54"></a><span class="c005">
</span><a id="hevea_default55"></a></p><p><span class="c006">When you type a statement in interactive mode, the interpreter
executes it and displays the result, if there is one.</span></p><p><span class="c006">A script usually contains a sequence of statements. If there
is more than one statement, the results appear one at a time
as the statements execute.</span></p><p><span class="c006">For example, the script</span></p><pre class="verbatim"><span class="c004">print 1
x = 2
print x
</span></pre><p><span class="c006">produces the output</span></p><pre class="verbatim"><span class="c004">1
2
</span></pre><p><span class="c006">The assignment statement produces no output.</span></p><span class="c005">
</span><!--TOC section id="sec22" <span class="c000"><span class="c005">Operators and operands</span></span>-->
<h2 class="section" id="sec22"><span class="c006">2.5&#XA0;&#XA0;Operators and operands</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default56"></a><span class="c005">
</span><a id="hevea_default57"></a><span class="c005">
</span><a id="hevea_default58"></a><span class="c005">
</span><a id="hevea_default59"></a></p><p><span class="c006"><span class="c009">Operators</span> are special symbols that represent computations like
addition and multiplication. The values the operator is applied to
are called <span class="c009">operands</span>.</span></p><p><span class="c006">The operators <span class="c001">+</span>, <span class="c001">-</span>, <span class="c001">*</span>, <span class="c001">/</span>, and <span class="c001">**</span>
perform addition, subtraction, multiplication, division, and
exponentiation, as in the following examples:</span></p><pre class="verbatim"><span class="c004">20+32   hour-1   hour*60+minute   minute/60   5**2   (5+9)*(15-7)
</span></pre><p><span class="c006">The division operator might not do what you expect:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; minute = 59
&gt;&gt;&gt; minute/60
0
</span></pre><p><span class="c006">The value of <span class="c001">minute</span> is 59, and in conventional arithmetic 59
divided by 60 is 0.98333, not 0. The reason for the discrepancy is
that Python is performing <span class="c009">floor division</span></span><sup><a id="text4" href="#note4"><span class="c006">2</span></a></sup><span class="c006">.</span></p><p><a id="hevea_default60"></a><span class="c005">
</span><a id="hevea_default61"></a><span class="c005">
</span><a id="hevea_default62"></a><span class="c005">
</span><a id="hevea_default63"></a><span class="c005">
</span><a id="hevea_default64"></a></p><p><span class="c006">When both of the operands are integers, the result is also an
integer; floor division chops off the fractional
part, so in this example it truncates the answer to zero.</span></p><p><span class="c006">If either of the operands is a floating-point number, Python performs
floating-point division, and the result is a <span class="c001">float</span>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; minute/60.0
0.98333333333333328
</span></pre><span class="c005">
</span><!--TOC section id="sec23" <span class="c000"><span class="c005">Expressions</span></span>-->
<h2 class="section" id="sec23"><span class="c006">2.6&#XA0;&#XA0;Expressions</span></h2><!--SEC END --><p><span class="c006">An <span class="c009">expression</span> is a combination of values, variables, and operators.
A value all by itself is considered an expression, and so is
a variable, so the following are all legal expressions
(assuming that the variable <span class="c001">x</span> has been assigned a value):</span></p><p><a id="hevea_default65"></a><span class="c005">
</span><a id="hevea_default66"></a></p><pre class="verbatim"><span class="c004">17
x
x + 17
</span></pre><p><span class="c006">If you type an expression in interactive mode, the interpreter
<span class="c009">evaluates</span> it and displays the result:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 1 + 1
2
</span></pre><p><span class="c006">But in a script, an expression all by itself doesn&#X2019;t
do anything! This is a common
source of confusion for beginners.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Type the following statements in the Python interpreter to see
what they do:</em></span><pre class="verbatim"><span class="c004"><em>5
x = 5
x + 1
</em></span></pre></div><span class="c005">
</span><!--TOC section id="sec24" <span class="c000"><span class="c005">Order of operations</span></span>-->
<h2 class="section" id="sec24"><span class="c006">2.7&#XA0;&#XA0;Order of operations</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default67"></a><span class="c005">
</span><a id="hevea_default68"></a><span class="c005">
</span><a id="hevea_default69"></a></p><p><span class="c006">When more than one operator appears in an expression, the order of
evaluation depends on the <span class="c009">rules of precedence</span>. For
mathematical operators, Python follows mathematical convention.
The acronym <span class="c009">PEMDAS</span> is a useful way to
remember the rules:</span></p><p><a id="hevea_default70"></a></p><ul class="itemize"><li class="li-itemize"><span class="c006"><span class="c009">P</span>arentheses have the highest precedence and can be used 
to force an expression to evaluate in the order you want. Since
expressions in parentheses are evaluated first, <span class="c001">2 * (3-1)</span> is 4,
and <span class="c001">(1+1)**(5-2)</span> is 8. You can also use parentheses to make an
expression easier to read, as in <span class="c001">(minute * 100) / 60</span>, even
if it doesn&#X2019;t change the result.</span></li><li class="li-itemize"><span class="c006"><span class="c009">E</span>xponentiation has the next highest precedence, so
<span class="c001">2**1+1</span> is 3, not 4, and <span class="c001">3*1**3</span> is 3, not 27.</span></li><li class="li-itemize"><span class="c006"><span class="c009">M</span>ultiplication and <span class="c009">D</span>ivision have the same precedence,
which is higher than <span class="c009">A</span>ddition and <span class="c009">S</span>ubtraction, which also
have the same precedence. So <span class="c001">2*3-1</span> is 5, not 4, and
<span class="c001">6+4/2</span> is 8, not 5.</span></li><li class="li-itemize"><span class="c006">Operators with the same precedence are evaluated from left to 
right. So the expression <span class="c001">5-3-1</span> is 1, not 3, because the
<span class="c001">5-3</span> happens first and then <span class="c001">1</span> is subtracted from <span class="c001">2</span>.</span></li></ul><p><span class="c006">When in doubt, always put parentheses in your expressions to make sure
the computations are performed in the order you intend.</span></p><span class="c005">
</span><!--TOC section id="sec25" <span class="c000"><span class="c005">Modulus operator</span></span>-->
<h2 class="section" id="sec25"><span class="c006">2.8&#XA0;&#XA0;Modulus operator</span></h2><!--SEC END --><p><a id="hevea_default71"></a><span class="c005">
</span><a id="hevea_default72"></a></p><p><span class="c006">The <span class="c009">modulus operator</span> works on integers and yields the remainder
when the first operand is divided by the second. In Python, the
modulus operator is a percent sign (<code>%</code>). The syntax is the same
as for other operators:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; quotient = 7 / 3
&gt;&gt;&gt; print quotient
2
&gt;&gt;&gt; remainder = 7 % 3
&gt;&gt;&gt; print remainder
1
</span></pre><p><span class="c006">So 7 divided by 3 is 2 with 1 left over.</span></p><p><span class="c006">The modulus operator turns out to be surprisingly useful. For
example, you can check whether one number is divisible by another&#X2014;if
<span class="c001">x % y</span> is zero, then <span class="c001">x</span> is divisible by <span class="c001">y</span>.</span></p><p><a id="hevea_default73"></a></p><p><span class="c006">You can also extract the right-most digit
or digits from a number. For example, <span class="c001">x % 10</span> yields the
right-most digit of <span class="c001">x</span> (in base 10). Similarly, <span class="c001">x % 100</span>
yields the last two digits.</span></p><span class="c005">
</span><!--TOC section id="sec26" <span class="c000"><span class="c005">String operations</span></span>-->
<h2 class="section" id="sec26"><span class="c006">2.9&#XA0;&#XA0;String operations</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default74"></a><span class="c005">
</span><a id="hevea_default75"></a></p><p><span class="c006">The <span class="c001">+</span> operator works with strings, but it
is not addition in the mathematical sense. Instead it performs
<span class="c009">concatenation</span>, which means joining the strings by
linking them end to end. For example:</span></p><p><a id="hevea_default76"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; first = 10
&gt;&gt;&gt; second = 15
&gt;&gt;&gt; print first+second
25
&gt;&gt;&gt; first = '100'
&gt;&gt;&gt; second = '150'
&gt;&gt;&gt; print first + second
100150
</span></pre><p><span class="c006">The output of this program is <span class="c001">100150</span>.</span></p><span class="c005">
</span><!--TOC section id="sec27" <span class="c000"><span class="c005">Asking the user for input</span></span>-->
<h2 class="section" id="sec27"><span class="c006">2.10&#XA0;&#XA0;Asking the user for input</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default77"></a></p><p><span class="c006">Sometimes we would like to take the value for a variable from the user
via their keyboard.
Python provides a built-in function called <code>raw_input</code> that gets
input from the keyboard</span><sup><a id="text5" href="#note5"><span class="c006">3</span></a></sup><span class="c006">. When this function is called, the program stops and
waits for the user to type something. When the user presses <span class="c003">Return</span> or <span class="c003">Enter</span>, the program resumes and <code>raw_input</code>
returns what the user typed as a string.</span></p><p><a id="hevea_default78"></a><span class="c005">
</span><a id="hevea_default79"></a><span class="c005">
</span><a id="hevea_default80"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; input = raw_input()
Some silly stuff
&gt;&gt;&gt; print input
Some silly stuff
</span></pre><p><span class="c006">Before getting input from the user, it is a good idea to print a
prompt telling the user what to input. You can pass a string
to <code>raw_input</code> to be displayed to the user before pausing
for input:</span></p><p><a id="hevea_default81"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; name = raw_input('What is your name?\n')
What is your name?
Chuck
&gt;&gt;&gt; print name
Chuck
</span></pre><p><span class="c006">The sequence <code>\n</code> at the end of the prompt represents a <span class="c009">newline</span>,
which is a special character that causes a line break.
That&#X2019;s why the user&#X2019;s input appears below the prompt.</span></p><p><a id="hevea_default82"></a></p><p><span class="c006">If you expect the user to type an integer, you can try to convert
the return value to <span class="c001">int</span> using the <span class="c001">int()</span> function:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; prompt = 'What...is the airspeed velocity of an unladen swallow?\n'
&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
17
&gt;&gt;&gt; int(speed)
17
&gt;&gt;&gt; int(speed) + 5
22
</span></pre><p><span class="c006">But if the user types something other than a string of digits,
you get an error:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
What do you mean, an African or a European swallow?
&gt;&gt;&gt; int(speed)
ValueError: invalid literal for int()
</span></pre><p><span class="c006">We will see how to handle this kind of error later.</span></p><p><a id="hevea_default83"></a><span class="c005">
</span><a id="hevea_default84"></a></p><span class="c005">
</span><!--TOC section id="sec28" <span class="c000"><span class="c005">Comments</span></span>-->
<h2 class="section" id="sec28"><span class="c006">2.11&#XA0;&#XA0;Comments</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default85"></a></p><p><span class="c006">As programs get bigger and more complicated, they get more difficult
to read. Formal languages are dense, and it is often difficult to
look at a piece of code and figure out what it is doing, or why.</span></p><p><span class="c006">For this reason, it is a good idea to add notes to your programs to explain
in natural language what the program is doing. These notes are called
<span class="c009">comments</span>, and in Python they start with the <code>#</code> symbol:</span></p><pre class="verbatim"><span class="c004"># compute the percentage of the hour that has elapsed
percentage = (minute * 100) / 60
</span></pre><p><span class="c006">In this case, the comment appears on a line by itself. You can also put
comments at the end of a line:</span></p><pre class="verbatim"><span class="c004">percentage = (minute * 100) / 60     # percentage of an hour
</span></pre><p><span class="c006">Everything from the <span class="c001">#</span> to the end of the line is ignored&#X2014;it
has no effect on the program.</span></p><p><span class="c006">Comments are most useful when they document non-obvious features of
the code. It is reasonable to assume that the reader can figure out
<em>what</em> the code does; it is much more useful to explain <em>why</em>.</span></p><p><span class="c006">This comment is redundant with the code and useless:</span></p><pre class="verbatim"><span class="c004">v = 5     # assign 5 to v
</span></pre><p><span class="c006">This comment contains useful information that is not in the code:</span></p><pre class="verbatim"><span class="c004">v = 5     # velocity in meters/second. 
</span></pre><p><span class="c006">Good variable names can reduce the need for comments, but
long names can make complex expressions hard to read, so there is
a trade-off.</span></p><span class="c005">
</span><!--TOC section id="sec29" <span class="c000"><span class="c005">Choosing mnemonic variable names</span></span>-->
<h2 class="section" id="sec29"><span class="c006">2.12&#XA0;&#XA0;Choosing mnemonic variable names</span></h2><!--SEC END --><p><a id="hevea_default86"></a></p><p><span class="c006">As long as you follow the simple rules of variable naming, and avoid
reserved words, you have a lot of choice when you name your variables.
In the beginning, this choice can be confusing both when you read a 
program and when you write your own programs. For example, the
following three programs are identical in terms of what they accomplish,
but very different when you read them and try to understand them.</span></p><pre class="verbatim"><span class="c004">a = 35.0
b = 12.50
c = a * b
print c

hours = 35.0
rate = 12.50
pay = hours * rate
print pay

x1q3z9ahd = 35.0
x1q3z9afd = 12.50
x1q3p9afd = x1q3z9ahd * x1q3z9afd
print x1q3p9afd
</span></pre><p><span class="c006">The Python interpreter sees all three of these programs as <em>exactly the 
same</em> but humans see and understand these programs quite differently. 
Humans will most quickly understand the <span class="c009">intent</span> 
of the second program because the 
programmer has chosen variable names that reflect their intent
regarding what data will be stored in each variable.</span></p><p><span class="c006">We call these wisely chosen variable names &#X201C;mnemonic variable names&#X201D;. The
word <em>mnemonic</em></span><sup><a id="text6" href="#note6"><span class="c006">4</span></a></sup><span class="c006"> 
means &#X201C;memory aid&#X201D;.
We choose mnemonic variable names to help us remember why we created the variable
in the first place.</span></p><p><span class="c006">While this all sounds great, and it is a very good idea to use mnemonic variable
names, mnemonic variable names can get in the way of a beginning programmer&#X2019;s 
ability to parse and understand code. This is because beginning programmers 
have not yet memorized the reserved words (there are only 31 of them) and sometimes
variables with names that are too descriptive start to look like 
part of the language and not just well-chosen variable names.</span></p><p><span class="c006">Take a quick look at the following Python sample code which loops through some data. 
We will cover loops soon, but for now try to just puzzle through what this means:</span></p><pre class="verbatim"><span class="c004">for word in words:
    print word
</span></pre><p><span class="c006">What is happening here? Which of the tokens (for, word, in, etc.) are reserved words
and which are just variable names? Does Python understand at a fundamental level 
the notion of words? Beginning programmers have 
trouble separating what parts of the
code <em>must</em> be the same as this example and what parts of the code are simply
choices made by the programmer.</span></p><p><span class="c006">The following code is equivalent to the above code:</span></p><pre class="verbatim"><span class="c004">for slice in pizza:
    print slice
</span></pre><p><span class="c006">It is easier for the beginning programmer to look at this code and know which 
parts are reserved words defined by Python and which parts are simply variable
names chosen by the programmer. It is pretty clear that Python has no fundamental
understanding of pizza and slices and the fact that a pizza consists of a set
of one or more slices.</span></p><p><span class="c006">But if our program is truly about reading data and looking for words in the data,
<span class="c001">pizza</span> and <span class="c001">slice</span> are very un-mnemonic variable names. Choosing them 
as variable names distracts from the meaning of the program.</span></p><p><span class="c006">After a pretty short period of time, you will know the most common reserved words
and you will start to see the reserved words jumping out at you:</span></p><p><span class="c002"><span class="c009">for</span> word <span class="c009">in</span> words<span class="c009">:<br />
<code> </code>print</span> word </span></p><p><span class="c006">The parts of the code that are defined by 
Python (<span class="c001">for</span>, <span class="c001">in</span>, <span class="c001">print</span>, and <span class="c001">:</span>) are in bold
and the programmer-chosen variables (<span class="c001">word</span> and <span class="c001">words</span>) are not in bold. 
Many text editors are aware of Python
syntax and will color reserved words differently to give you clues to keep 
your variables and reserved words separate.
After a while you will begin to read Python and quickly determine what
is a variable and what is a reserved word.</span></p><span class="c005">
</span><!--TOC section id="sec30" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec30"><span class="c006">2.13&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default87"></a></p><p><span class="c006">At this point, the syntax error you are most likely to make is
an illegal variable name, like <span class="c001">class</span> and <span class="c001">yield</span>, which
are keywords, or <code>odd~job</code> and <code>US$</code>, which contain
illegal characters.</span></p><p><a id="hevea_default88"></a><span class="c005">
</span><a id="hevea_default89"></a></p><p><span class="c006">If you put a space in a variable name, Python thinks it is two
operands without an operator:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; bad name = 5
SyntaxError: invalid syntax
</span></pre><p><span class="c006">For syntax errors, the error messages don&#X2019;t help much.
The most common messages are <span class="c001">SyntaxError: invalid syntax</span> and
<span class="c001">SyntaxError: invalid token</span>, neither of which is very informative.</span></p><p><a id="hevea_default90"></a><span class="c005">
</span><a id="hevea_default91"></a><span class="c005">
</span><a id="hevea_default92"></a><span class="c005">
</span><a id="hevea_default93"></a><span class="c005">
</span><a id="hevea_default94"></a></p><p><span class="c006">The runtime error you are most likely to make is a &#X201C;use before
def;&#X201D; that is, trying to use a variable before you have assigned
a value. This can happen if you spell a variable name wrong:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; principal = 327.68
&gt;&gt;&gt; interest = principle * rate
NameError: name 'principle' is not defined
</span></pre><p><span class="c006">Variables names are case sensitive, so <span class="c001">LaTeX</span> is not the
same as <span class="c001">latex</span>.</span></p><p><a id="hevea_default95"></a><span class="c005">
</span><a id="hevea_default96"></a><span class="c005">
</span><a id="hevea_default97"></a></p><p><span class="c006">At this point, the most likely cause of a semantic error is
the order of operations. For example, to evaluate 1/2 &#X3C0;,
you might be tempted to write</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 1.0 / 2.0 * pi
</span></pre><p><span class="c006">But the division happens first, so you would get &#X3C0; / 2, which
is not the same thing! There is no way for Python
to know what you meant to write, so in this case you don&#X2019;t
get an error message; you just get the wrong answer.</span></p><p><a id="hevea_default98"></a></p><span class="c005">
</span><!--TOC section id="sec31" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec31"><span class="c006">2.14&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">assignment:</span></dt><dd class="dd-description"><span class="c006"> A statement that assigns a value to a variable.
</span><a id="hevea_default99"></a></dd><dt class="dt-description"><span class="c010">concatenate:</span></dt><dd class="dd-description"><span class="c006"> To join two operands end to end.
</span><a id="hevea_default100"></a></dd><dt class="dt-description"><span class="c010">comment:</span></dt><dd class="dd-description"><span class="c006"> Information in a program that is meant for other
programmers (or anyone reading the source code) and has no effect on the
execution of the program.
</span><a id="hevea_default101"></a></dd><dt class="dt-description"><span class="c010">evaluate:</span></dt><dd class="dd-description"><span class="c006"> To simplify an expression by performing the operations
in order to yield a single value.</span></dd><dt class="dt-description"><span class="c010">expression:</span></dt><dd class="dd-description"><span class="c006"> A combination of variables, operators, and values that
represents a single result value.
</span><a id="hevea_default102"></a></dd><dt class="dt-description"><span class="c010">floating point:</span></dt><dd class="dd-description"><span class="c006"> A type that represents numbers with fractional
parts.
</span><a id="hevea_default103"></a></dd><dt class="dt-description"><span class="c010">floor division:</span></dt><dd class="dd-description"><span class="c006"> The operation that divides two numbers and chops off
the fractional part.
</span><a id="hevea_default104"></a></dd><dt class="dt-description"><span class="c010">integer:</span></dt><dd class="dd-description"><span class="c006"> A type that represents whole numbers.
</span><a id="hevea_default105"></a></dd><dt class="dt-description"><span class="c010">keyword:</span></dt><dd class="dd-description"><span class="c006"> A reserved word that is used by the compiler to parse a
program; you cannot use keywords like <span class="c001">if</span>, <span class="c001">def</span>, and <span class="c001">while</span> as
variable names.
</span><a id="hevea_default106"></a></dd><dt class="dt-description"><span class="c010">mnemonic:</span></dt><dd class="dd-description"><span class="c006"> A memory aid. We often give variables mnemonic names
to help us remember what is stored in the variable.
</span><a id="hevea_default107"></a></dd><dt class="dt-description"><span class="c010">modulus operator:</span></dt><dd class="dd-description"><span class="c006"> An operator, denoted with a percent sign
(<span class="c001">%</span>), that works on integers and yields the remainder when one
number is divided by another.
</span><a id="hevea_default108"></a><span class="c005">
</span><a id="hevea_default109"></a></dd><dt class="dt-description"><span class="c010">operand:</span></dt><dd class="dd-description"><span class="c006"> One of the values on which an operator operates.
</span><a id="hevea_default110"></a></dd><dt class="dt-description"><span class="c010">operator:</span></dt><dd class="dd-description"><span class="c006"> A special symbol that represents a simple computation like
addition, multiplication, or string concatenation.
</span><a id="hevea_default111"></a></dd><dt class="dt-description"><span class="c010">rules of precedence:</span></dt><dd class="dd-description"><span class="c006"> The set of rules governing the order in which
expressions involving multiple operators and operands are evaluated.
</span><a id="hevea_default112"></a><span class="c005">
</span><a id="hevea_default113"></a></dd><dt class="dt-description"><span class="c010">statement:</span></dt><dd class="dd-description"><span class="c006"> A section of code that represents a command or action. So
far, the statements we have seen are assignments and print statements.
</span><a id="hevea_default114"></a></dd><dt class="dt-description"><span class="c010">string:</span></dt><dd class="dd-description"><span class="c006"> A type that represents sequences of characters.
</span><a id="hevea_default115"></a></dd><dt class="dt-description"><span class="c010">type:</span></dt><dd class="dd-description"><span class="c006"> A category of values. The types we have seen so far
are integers (type <span class="c001">int</span>), floating-point numbers (type <span class="c001">float</span>), and strings (type <span class="c001">str</span>).
</span><a id="hevea_default116"></a></dd><dt class="dt-description"><span class="c010">value:</span></dt><dd class="dd-description"><span class="c006"> One of the basic units of data, like a number or string, 
that a program manipulates.
</span><a id="hevea_default117"></a></dd><dt class="dt-description"><span class="c010">variable:</span></dt><dd class="dd-description"><span class="c006"> A name that refers to a value.
</span><a id="hevea_default118"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec32" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec32"><span class="c006">2.15&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write a program that uses <code>raw_input</code> to prompt a user for their name 
and then welcomes them.</em></span><pre class="verbatim"><span class="c006"><em>Enter your name: Chuck
Hello Chuck
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Write a program to prompt the user for hours and rate per hour to compute
gross pay.
</em></span><pre class="verbatim"><span class="c006"><em>Enter Hours: 35
Enter Rate: 2.75
Pay: 96.25
</em></span></pre></div><p><span class="c006">
We won&#X2019;t worry about making sure our pay has exactly two digits after
the decimal place for now. If you want, you can play with the 
built-in Python <span class="c001">round</span> function to properly round the resulting pay
to two decimal places.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
Assume that we execute the following assignment statements:</em></span><pre class="verbatim"><span class="c006"><em>width = 17
height = 12.0
</em></span></pre><p><span class="c006"><em>For each of the following expressions, write the value of the
expression and the type (of the value of the expression).</em></span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c002"><em>width/2</em></span></li><li class="li-enumerate"><span class="c002"><em>width/2.0</em></span></li><li class="li-enumerate"><span class="c002"><em>height/3</em></span></li><li class="li-enumerate"><span class="c002"><em>1 + 2 * 5</em></span></li></ol><p><span class="c006"><em>Use the Python interpreter to check your answers.
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
Write a program which prompts the user for a Celsius temperature,
convert the temperature to Fahrenheit, and print out the converted
temperature.
</em></span></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note3" href="#text3"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">In Python 3.0, <span class="c001">exec</span> is no
longer a keyword, but <span class="c001">nonlocal</span> is.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note4" href="#text4"><span class="c006">2</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">In Python 3.0,
the result of this division is a <span class="c001">float</span>. 
In Python 3.0, the new operator
<span class="c001">//</span> performs integer division.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note5" href="#text5"><span class="c006">3</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">In Python 3.0, this function is named
<span class="c001">input</span>.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note6" href="#text6"><span class="c006">4</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">See 
<span class="c001">http://en.wikipedia.org/wiki/Mnemonic</span>
for an extended description of the word &#X201C;mnemonic&#X201D;.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec33" <span class="c000"><span class="c005">Conditional execution</span></span>-->
<h1 class="chapter" id="sec33"><span class="c006">Chapter&#XA0;3&#XA0;&#XA0;Conditional execution</span></h1><!--SEC END --><span class="c005">
</span><!--TOC section id="sec34" <span class="c000"><span class="c005">Boolean expressions</span></span>-->
<h2 class="section" id="sec34"><span class="c006">3.1&#XA0;&#XA0;Boolean expressions</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default119"></a><span class="c005">
</span><a id="hevea_default120"></a><span class="c005">
</span><a id="hevea_default121"></a><span class="c005">
</span><a id="hevea_default122"></a></p><p><span class="c006">A <span class="c009">boolean expression</span> is an expression that is either true
or false. The following examples use the 
operator <span class="c001">==</span>, which compares two operands and produces
<span class="c001">True</span> if they are equal and <span class="c001">False</span> otherwise:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 5 == 5
True
&gt;&gt;&gt; 5 == 6
False
</span></pre><p><span class="c006"><span class="c001">True</span> and <span class="c001">False</span> are special
values that belong to the type <span class="c001">bool</span>; they are not strings:</span></p><p><a id="hevea_default123"></a><span class="c005">
</span><a id="hevea_default124"></a><span class="c005">
</span><a id="hevea_default125"></a><span class="c005">
</span><a id="hevea_default126"></a><span class="c005">
</span><a id="hevea_default127"></a><span class="c005">
</span><a id="hevea_default128"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type(True)
&lt;type 'bool'&gt;
&gt;&gt;&gt; type(False)
&lt;type 'bool'&gt;
</span></pre><p><span class="c006">The <span class="c001">==</span> operator is one of the <span class="c009">comparison operators</span>; the
others are:</span></p><pre class="verbatim"><span class="c004">      x != y               # x is not equal to y
      x &gt; y                # x is greater than y
      x &lt; y                # x is less than y
      x &gt;= y               # x is greater than or equal to y
      x &lt;= y               # x is less than or equal to y
      x is y               # x is the same as y
      x is not y           # x is not the same as y
</span></pre><p><span class="c006">Although these operations are probably familiar to you, the Python
symbols are different from the mathematical symbols for the same
operations. A common error
is to use a single equal sign (<span class="c001">=</span>) instead of a double equal sign
(<span class="c001">==</span>). Remember that <span class="c001">=</span> is an assignment operator and
<span class="c001">==</span> is a comparison operator. There is no such thing as
<span class="c001">=&lt;</span> or <span class="c001">=&gt;</span>.</span></p><p><a id="hevea_default129"></a><span class="c005">
</span><a id="hevea_default130"></a></p><span class="c005">
</span><!--TOC section id="sec35" <span class="c000"><span class="c005">Logical operators</span></span>-->
<h2 class="section" id="sec35"><span class="c006">3.2&#XA0;&#XA0;Logical operators</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default131"></a><span class="c005">
</span><a id="hevea_default132"></a></p><p><span class="c006">There are three <span class="c009">logical operators</span>: <span class="c001">and</span>, <span class="c001">or</span>, and <span class="c001">not</span>. The semantics (meaning) of these operators is
similar to their meaning in English. For example,</span></p><p><span class="c006"><span class="c001">x &gt; 0 and x &lt; 10</span> </span></p><p><span class="c006">is true only if <span class="c001">x</span> is greater than 0
<em>and</em> less than 10.</span></p><p><a id="hevea_default133"></a><span class="c005">
</span><a id="hevea_default134"></a><span class="c005">
</span><a id="hevea_default135"></a><span class="c005">
</span><a id="hevea_default136"></a><span class="c005">
</span><a id="hevea_default137"></a><span class="c005">
</span><a id="hevea_default138"></a></p><p><span class="c006"><span class="c001">n%2 == 0 or n%3 == 0</span> is true if <em>either</em> of the conditions
is true, that is, if the number is divisible by 2 <em>or</em> 3.</span></p><p><span class="c006">Finally, the <span class="c001">not</span> operator negates a boolean
expression, so <span class="c001">not (x &gt; y)</span> is true if <span class="c001">x &gt; y</span> is false;
that is, if <span class="c001">x</span> is less than or equal to <span class="c001">y</span>.</span></p><p><span class="c006">Strictly speaking, the operands of the logical operators should be
boolean expressions, but Python is not very strict.
Any nonzero number is interpreted as &#X201C;true.&#X201D;</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 17 and True
True
</span></pre><p><span class="c006">This flexibility can be useful, but there are some subtleties to
it that might be confusing. You might want to avoid it until
you are sure you know what you are doing.</span></p><span class="c005">
</span><!--TOC section id="sec36" <span class="c000"><span class="c005">Conditional execution</span></span>-->
<h2 class="section" id="sec36"><span class="c006">3.3&#XA0;&#XA0;Conditional execution</span></h2><!--SEC END --><p><span class="c005">
</span><a id="conditional execution"></a></p><p><a id="hevea_default139"></a><span class="c005">
</span><a id="hevea_default140"></a><span class="c005">
</span><a id="hevea_default141"></a><span class="c005">
</span><a id="hevea_default142"></a><span class="c005">
</span><a id="hevea_default143"></a></p><p><span class="c006">In order to write useful programs, we almost always need the ability
to check conditions and change the behavior of the program
accordingly. <span class="c009">Conditional statements</span> give us this ability. The
simplest form is the <span class="c001">if</span> statement:</span></p><pre class="verbatim"><span class="c004">if x &gt; 0 :
    print 'x is positive'
</span></pre><p><span class="c006">The boolean expression after the <span class="c001">if</span> statement is
called the <span class="c009">condition</span>. We end the <span class="c001">if</span> 
statement with a colon character (:) and the line(s) 
after the if statement are indented. </span></p><div class="center"><span class="c006"><img src="book005.png" /></span></div><p><span class="c006">If the logical condition is true, then the indented
statement gets executed. If the logical condition is 
false, the indented statement is skipped.</span></p><p><a id="hevea_default144"></a><span class="c005">
</span><a id="hevea_default145"></a><span class="c005">
</span><a id="hevea_default146"></a></p><p><span class="c006"><span class="c001">if</span> statements have the same structure as function definitions
or <span class="c001">for</span> loops</span><sup><a id="text7" href="#note7"><span class="c006">1</span></a></sup><span class="c006">.The statement consists of a header line
that ends with the colon character (:) 
followed by an indented block. Statements like this are
called <span class="c009">compound statements</span> because they stretch 
across more than one line.</span></p><p><span class="c006">There is no limit on the number of statements that can appear in
the body, but there must be at least one.
Occasionally, it is useful to have a body with no statements (usually
as a placekeeper for code you haven&#X2019;t written yet). In that
case, you can use the <span class="c001">pass</span> statement, which does nothing.</span></p><p><a id="hevea_default147"></a><span class="c005">
</span><a id="hevea_default148"></a></p><pre class="verbatim"><span class="c004">if x &lt; 0 :
    pass          # need to handle negative values!
</span></pre><p><span class="c006">If you enter an <span class="c001">if</span> statement in the Python interpreter, the prompt will change 
from three chevrons to three dots to indicate you are in the middle of a block of
statements, as shown below:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 3
&gt;&gt;&gt; if x &lt; 10:
...    print 'Small'
... 
Small
&gt;&gt;&gt;
</span></pre><span class="c005">
</span><!--TOC section id="sec37" <span class="c000"><span class="c005">Alternative execution</span></span>-->
<h2 class="section" id="sec37"><span class="c006">3.4&#XA0;&#XA0;Alternative execution</span></h2><!--SEC END --><p><span class="c005">
</span><a id="alternative execution"></a></p><p><a id="hevea_default149"></a><span class="c005">
</span><a id="hevea_default150"></a><span class="c005">
</span><a id="hevea_default151"></a></p><p><span class="c006">A second form of the <span class="c001">if</span> statement is <span class="c009">alternative execution</span>,
in which there are two possibilities and the condition determines
which one gets executed. The syntax looks like this:</span></p><pre class="verbatim"><span class="c004">if x%2 == 0 :
    print 'x is even'
else :
    print 'x is odd'
</span></pre><p><span class="c006">If the remainder when <span class="c001">x</span> is divided by 2 is 0, then we
know that <span class="c001">x</span> is even, and the program displays a message to that
effect. If the condition is false, the second set of statements is
executed. </span></p><div class="center"><span class="c006"><img src="book006.png" /></span></div><p><span class="c006">Since the condition must either be true or false, exactly one of
the alternatives will be executed. The alternatives are called
<span class="c009">branches</span>, because they are branches in the flow of execution.</span></p><p><a id="hevea_default152"></a></p><span class="c005">
</span><!--TOC section id="sec38" <span class="c000"><span class="c005">Chained conditionals</span></span>-->
<h2 class="section" id="sec38"><span class="c006">3.5&#XA0;&#XA0;Chained conditionals</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default153"></a><span class="c005">
</span><a id="hevea_default154"></a></p><p><span class="c006">Sometimes there are more than two possibilities and we need more than
two branches. One way to express a computation like that is a <span class="c009">chained conditional</span>:</span></p><pre class="verbatim"><span class="c004">if x &lt; y:
    print 'x is less than y'
elif x &gt; y:
    print 'x is greater than y'
else:
    print 'x and y are equal'
</span></pre><p><span class="c006"><span class="c001">elif</span> is an abbreviation of &#X201C;else if.&#X201D; Again, exactly one
branch will be executed. </span></p><div class="center"><span class="c006"><img src="book007.png" /></span></div><p><span class="c006">There is no limit on the number of <span class="c001">elif</span> statements. If there is an <span class="c001">else</span> clause, it has to be
at the end, but there doesn&#X2019;t have to be one.</span></p><p><a id="hevea_default155"></a><span class="c005">
</span><a id="hevea_default156"></a></p><pre class="verbatim"><span class="c004">if choice == 'a':
    print 'Bad guess'
elif choice == 'b':
    print 'Good guess'
elif choice == 'c':
    print 'Close, but not correct'
</span></pre><p><span class="c006">Each condition is checked in order. If the first is false,
the next is checked, and so on. If one of them is
true, the corresponding branch executes, and the statement
ends. Even if more than one condition is true, only the
first true branch executes. </span></p><span class="c005">
</span><!--TOC section id="sec39" <span class="c000"><span class="c005">Nested conditionals</span></span>-->
<h2 class="section" id="sec39"><span class="c006">3.6&#XA0;&#XA0;Nested conditionals</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default157"></a><span class="c005">
</span><a id="hevea_default158"></a></p><p><span class="c006">One conditional can also be nested within another. We could have
written the three-branch example like this:</span></p><pre class="verbatim"><span class="c004">if x == y:
    print 'x and y are equal'
else:
    if x &lt; y:
        print 'x is less than y'
    else:
        print 'x is greater than y'
</span></pre><p><span class="c006">The outer conditional contains two branches. The
first branch contains a simple statement. The second branch
contains another <span class="c001">if</span> statement, which has two branches of its
own. Those two branches are both simple statements,
although they could have been conditional statements as well.</span></p><div class="center"><span class="c006"><img src="book008.png" /></span></div><p><span class="c006">Although the indentation of the statements makes the structure
apparent, <span class="c009">nested conditionals</span> become difficult to read very
quickly. In general, it is a good idea to avoid them when you can.</span></p><p><span class="c006">Logical operators often provide a way to simplify nested conditional
statements. For example, we can rewrite the following code using a
single conditional:</span></p><pre class="verbatim"><span class="c004">if 0 &lt; x:
    if x &lt; 10:
        print 'x is a positive single-digit number.'
</span></pre><p><span class="c006">The <span class="c001">print</span> statement is executed only if we make it past both
conditionals, so we can get the same effect with the <span class="c001">and</span> operator:</span></p><pre class="verbatim"><span class="c004">if 0 &lt; x and x &lt; 10:
    print 'x is a positive single-digit number.'
</span></pre><span class="c005">
</span><!--TOC section id="sec40" <span class="c000"><span class="c005">Catching exceptions using try and except</span></span>-->
<h2 class="section" id="sec40"><span class="c006">3.7&#XA0;&#XA0;Catching exceptions using try and except</span></h2><!--SEC END --><p><span class="c005">
</span><a id="catch1"></a></p><p><span class="c006">Earlier we saw a code segment where we used the <code>raw_input</code> and
<span class="c001">int</span> functions to read and parse an integer number entered by
the user. We also saw how treacherous doing this could be:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
What do you mean, an African or a European swallow?
&gt;&gt;&gt; int(speed)
ValueError: invalid literal for int()
&gt;&gt;&gt;
</span></pre><p><span class="c006">When we are executing these statements in the Python interpreter, 
we get a new prompt from the interpreter, think &#X201C;oops&#X201D;, and move 
on to our next statement. </span></p><p><span class="c006">However if you place this code in a 
Python script and this error occurs, your script immediately 
stops in its tracks with a traceback. 
It does not execute the following statement. 
</span><a id="hevea_default159"></a></p><p><span class="c006">Here is a sample program to convert a Fahrenheit temperature 
to a Celsius temperature:
</span><a id="hevea_default160"></a><span class="c005">
</span><a id="hevea_default161"></a><span class="c005">
</span><a id="hevea_default162"></a></p><pre class="verbatim"><span class="c004">inp = raw_input('Enter Fahrenheit Temperature:')
fahr = float(inp)
cel = (fahr - 32.0) * 5.0 / 9.0
print cel
</span></pre><p><span class="c006">If we execute this code and give it invalid input, it simply fails
with an unfriendly error message:</span></p><pre class="verbatim"><span class="c004">python fahren.py 
Enter Fahrenheit Temperature:72
22.2222222222

python fahren.py 
Enter Fahrenheit Temperature:fred
Traceback (most recent call last):
  File "fahren.py", line 2, in &lt;module&gt;
    fahr = float(inp)
ValueError: invalid literal for float(): fred
</span></pre><p><span class="c006">There is a conditional execution structure built into 
Python to handle these types of expected and unexpected
errors called &#X201C;try / except&#X201D;. The idea of <span class="c001">try</span>
and <span class="c001">except</span> is that you know that some sequence
of instruction(s) may have a problem and you want to 
add some statements to be executed if an error occurs.
These extra statements (the except block) are ignored
if there is no error.</span></p><p><span class="c006">You can think of the <span class="c001">try</span> and <span class="c001">except</span> feature
in Python as an &#X201C;insurance policy&#X201D; on a sequence of
statements.</span></p><p><span class="c006">We can rewrite our temperature converter as follows:</span></p><pre class="verbatim"><span class="c004">inp = raw_input('Enter Fahrenheit Temperature:')
try:
    fahr = float(inp)
    cel = (fahr - 32.0) * 5.0 / 9.0
    print cel
except:
    print 'Please enter a number'
</span></pre><p><span class="c006">Python starts by executing the 
sequence of statements in the 
<span class="c001">try</span> block. If all goes
well, it skips the <span class="c001">except</span> block and proceeds. If an
exception occurs in the <span class="c001">try</span> block, 
Python jumps out of the <span class="c001">try</span> block and
executes the sequence of statements in the <span class="c001">except</span> block.</span></p><pre class="verbatim"><span class="c004">python fahren2.py 
Enter Fahrenheit Temperature:72
22.2222222222

python fahren2.py 
Enter Fahrenheit Temperature:fred
Please enter a number
</span></pre><p><span class="c006">Handling an exception with a <span class="c001">try</span> statement is called <span class="c009">catching</span> an exception. In this example, the <span class="c001">except</span> clause
prints an error message. In general,
catching an exception gives you a chance to fix the problem, or try
again, or at least end the program gracefully.</span></p><span class="c005">
</span><!--TOC section id="sec41" <span class="c000"><span class="c005">Short-circuit evaluation of logical expressions</span></span>-->
<h2 class="section" id="sec41"><span class="c006">3.8&#XA0;&#XA0;Short-circuit evaluation of logical expressions</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default163"></a></p><p><span class="c006">When Python is processing a logical expression such as 
<span class="c001">x &gt;= 2 and (x/y) &gt; 2</span>, it evaluates the expression
from left to right. Because of the definition of <span class="c001">and</span>,
if <span class="c001">x</span> is less than 2, the expression <span class="c001">x &gt;= 2</span> is 
<span class="c001">False</span> and so the whole expression is <span class="c001">False</span> regardless
of whether <span class="c001">(x/y) &gt; 2</span> evaluates to <span class="c001">True</span> or <span class="c001">False</span>.</span></p><p><span class="c006">When Python detects that there is nothing to be gained by evaluating
the rest of a logical expression, it stops its evaluation and does
not do the computations in the rest of the logical expression. 
When the evaluation of a logical expression stops because the overall
value is already known, it is called <span class="c009">short-circuiting</span> 
the evaluation.</span></p><p><a id="hevea_default164"></a><span class="c005">
</span><a id="hevea_default165"></a><span class="c006">
While this may seem like a fine point, the short-circuit behavior
leads to a clever technique called the <span class="c009">guardian pattern</span>. 
Consider the following code sequence in the Python interpreter:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 6 
&gt;&gt;&gt; y = 2
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
True
&gt;&gt;&gt; x = 1 
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
False
&gt;&gt;&gt; x = 6
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ZeroDivisionError: integer division or modulo by zero
&gt;&gt;&gt; 
</span></pre><p><span class="c006">The third calculation failed because Python was evaluating <span class="c001">(x/y)</span>
and <span class="c001">y</span> was zero, which causes a runtime error. But the second example
did <em>not</em> fail because the first part of the expression <span class="c001">x &gt;= 2</span> 
evaluated to <span class="c001">False</span> so the <span class="c001">(x/y)</span> was not ever executed 
due to the <span class="c009">short-circuit</span> rule and there was no error.</span></p><p><span class="c006">We can construct the logical expression to strategically place a <span class="c009">guard</span>
evaluation just before the evaluation that might cause an error as follows:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 1
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and y != 0 and (x/y) &gt; 2
False
&gt;&gt;&gt; x = 6 
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and y != 0 and (x/y) &gt; 2
False
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2 and y != 0
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ZeroDivisionError: integer division or modulo by zero
&gt;&gt;&gt;
</span></pre><p><span class="c006">In the first logical expression, <span class="c001">x &gt;= 2</span> is <span class="c001">False</span> so the evaluation
stops at the <span class="c001">and</span>. In the second logical expression, <span class="c001">x &gt;= 2</span> is <span class="c001">True</span>
but <span class="c001">y != 0</span> is <span class="c001">False</span> so we never reach <span class="c001">(x/y)</span>.</span></p><p><span class="c006">In the third logical expression, the <span class="c001">y != 0</span> is <em>after</em> the 
<span class="c001">(x/y) </span> calculation so the expression fails with an error.</span></p><p><span class="c006">In the second expression, we say that <span class="c001">y != 0</span> acts as a <span class="c009">guard</span>
to insure that we only execute <span class="c001">(x/y)</span> if <span class="c001">y</span> is non-zero.</span></p><span class="c005">
</span><!--TOC section id="sec42" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec42"><span class="c006">3.9&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="whitespace"></a><span class="c005">
</span><a id="hevea_default166"></a><span class="c005">
</span><a id="hevea_default167"></a></p><p><span class="c006">The traceback Python displays when an error occurs contains
a lot of information, but it can be overwhelming. The most
useful parts are usually:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">What kind of error it was, and</span></li><li class="li-itemize"><span class="c006">Where it occurred.</span></li></ul><p><span class="c006">Syntax errors are usually easy to find, but there are a few
gotchas. Whitespace errors can be tricky because spaces and
tabs are invisible and we are used to ignoring them.</span></p><p><a id="hevea_default168"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 5
&gt;&gt;&gt;  y = 6
  File "&lt;stdin&gt;", line 1
    y = 6
    ^
SyntaxError: invalid syntax
</span></pre><p><span class="c006">In this example, the problem is that the second line is indented by
one space. But the error message points to <span class="c001">y</span>, which is
misleading. In general, error messages indicate where the problem was
discovered, but the actual error might be earlier in the code,
sometimes on a previous line.</span></p><p><a id="hevea_default169"></a><span class="c005">
</span><a id="hevea_default170"></a></p><p><span class="c006">The same is true of runtime errors. Suppose you are trying
to compute a signal-to-noise ratio in decibels. The formula
is <span class="c007">SNR</span></span><sub><span class="c008">db</span></sub><span class="c006"> = 10 log</span><sub><span class="c006">10</span></sub><span class="c006"> (<span class="c007">P</span></span><sub><span class="c008">signal</span></sub><span class="c006"> / <span class="c007">P</span></span><sub><span class="c008">noise</span></sub><span class="c006">). In Python,
you might write something like this:</span></p><pre class="verbatim"><span class="c004">import math
signal_power = 9
noise_power = 10
ratio = signal_power / noise_power
decibels = 10 * math.log10(ratio)
print decibels
</span></pre><p><span class="c006">But when you run it, you get an error message</span><sup><a id="text8" href="#note8"><span class="c006">2</span></a></sup><span class="c006">:</span></p><p><a id="hevea_default171"></a><span class="c005">
</span><a id="hevea_default172"></a></p><pre class="verbatim"><span class="c004">Traceback (most recent call last):
  File "snr.py", line 5, in ?
    decibels = 10 * math.log10(ratio)
OverflowError: math range error
</span></pre><p><span class="c006">The error message indicates line 5, but there is nothing
wrong with that line. To find the real error, it might be
useful to print the value of <span class="c001">ratio</span>, which turns out to
be 0. The problem is in line 4, because dividing two integers
does floor division. The solution is to represent signal power
and noise power with floating-point values.</span></p><p><a id="hevea_default173"></a><span class="c005">
</span><a id="hevea_default174"></a></p><p><span class="c006">In general, error messages tell you where the problem was discovered, 
but that is often not where it was caused.</span></p><span class="c005">
</span><!--TOC section id="sec43" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec43"><span class="c006">3.10&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">body:</span></dt><dd class="dd-description"><span class="c006"> The sequence of statements within a compound statement.
</span><a id="hevea_default175"></a></dd><dt class="dt-description"><span class="c010">boolean expression:</span></dt><dd class="dd-description"><span class="c006"> An expression whose value is either 
<span class="c001">True</span> or <span class="c001">False</span>.
</span><a id="hevea_default176"></a><span class="c005">
</span><a id="hevea_default177"></a></dd><dt class="dt-description"><span class="c010">branch:</span></dt><dd class="dd-description"><span class="c006"> One of the alternative sequences of statements in
a conditional statement.
</span><a id="hevea_default178"></a></dd><dt class="dt-description"><span class="c010">chained conditional:</span></dt><dd class="dd-description"><span class="c006"> A conditional statement with a series
of alternative branches.
</span><a id="hevea_default179"></a><span class="c005">
</span><a id="hevea_default180"></a></dd><dt class="dt-description"><span class="c010">comparison operator:</span></dt><dd class="dd-description"><span class="c006"> One of the operators that compares
its operands: <span class="c001">==</span>, <span class="c001">!=</span>, <span class="c001">&gt;</span>, <span class="c001">&lt;</span>, <span class="c001">&gt;=</span>, and <span class="c001">&lt;=</span>.</span></dd><dt class="dt-description"><span class="c010">conditional statement:</span></dt><dd class="dd-description"><span class="c006"> A statement that controls the flow of
execution depending on some condition.
</span><a id="hevea_default181"></a><span class="c005">
</span><a id="hevea_default182"></a></dd><dt class="dt-description"><span class="c010">condition:</span></dt><dd class="dd-description"><span class="c006"> The boolean expression in a conditional statement
that determines which branch is executed.
</span><a id="hevea_default183"></a></dd><dt class="dt-description"><span class="c010">compound statement:</span></dt><dd class="dd-description"><span class="c006"> A statement that consists of a header
and a body. The header ends with a colon (:). The body is indented
relative to the header.
</span><a id="hevea_default184"></a></dd><dt class="dt-description"><span class="c010">guardian pattern:</span></dt><dd class="dd-description"><span class="c006"> Where we construct a logical expression 
with additional
comparisons to take advantage of the short-circuit behavior.
</span><a id="hevea_default185"></a><span class="c005">
</span><a id="hevea_default186"></a></dd><dt class="dt-description"><span class="c010">logical operator:</span></dt><dd class="dd-description"><span class="c006"> One of the operators that combines boolean
expressions: <span class="c001">and</span>, <span class="c001">or</span>, and <span class="c001">not</span>.</span></dd><dt class="dt-description"><span class="c010">nested conditional:</span></dt><dd class="dd-description"><span class="c006"> A conditional statement that appears
in one of the branches of another conditional statement.
</span><a id="hevea_default187"></a><span class="c005">
</span><a id="hevea_default188"></a></dd><dt class="dt-description"><span class="c010">traceback:</span></dt><dd class="dd-description"><span class="c006"> A list of the functions that are executing,
printed when an exception occurs.
</span><a id="hevea_default189"></a></dd><dt class="dt-description"><span class="c010">short circuit:</span></dt><dd class="dd-description"><span class="c006"> When Python is part-way through evaluating a 
logical expression and stops the evaluation because Python 
knows the final value for the expression 
without needing to evaluate the rest of the expression.
</span><a id="hevea_default190"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec44" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec44"><span class="c006">3.11&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Rewrite your pay computation to give the employee 1.5 
times the hourly rate for 
hours worked above 40 hours.</em></span><pre class="verbatim"><span class="c006"><em>Enter Hours: 45
Enter Rate: 10
Pay: 475.0
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Rewrite your pay program using <span class="c001">try</span> and <span class="c001">except</span> 
so that your program handles non-numeric input gracefully
by printing a message and exiting the program.
The following shows two executions of the program:</em></span><pre class="verbatim"><span class="c006"><em>Enter Hours: 20
Enter Rate: nine
Error, please enter numeric input

Enter Hours: forty
Error, please enter numeric input
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Write a program to prompt for a score between 0.0 and 1.0.
If the score is out of range, print an error message. If the score
is between 0.0 and 1.0, print a grade using the following 
table:</em></span><pre class="verbatim"><span class="c006"><em>Score   Grade
&gt;= 0.9     A
&gt;= 0.8     B
&gt;= 0.7     C
&gt;= 0.6     D
&lt; 0.6    F

Enter score: 0.95
A

Enter score: perfect
Bad score

Enter score: 10.0
Bad score

Enter score: 0.75
C

Enter score: 0.5
F
</em></span></pre><p><span class="c006"><em>Run the program repeatedly as shown above to test the 
various different values for input.
</em></span></p></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note7" href="#text7"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">We will learn about functions in Chapter 4
and loops in Chapter 5.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note8" href="#text8"><span class="c006">2</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">In Python 3.0,
you no longer get an error message; the division operator performs
floating-point division even with integer operands.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec45" <span class="c000"><span class="c005">Functions</span></span>-->
<h1 class="chapter" id="sec45"><span class="c006">Chapter&#XA0;4&#XA0;&#XA0;Functions</span></h1><!--SEC END --><p><span class="c005">
</span><a id="funcchap"></a></p><span class="c005">
</span><!--TOC section id="sec46" <span class="c000"><span class="c005">Function calls</span></span>-->
<h2 class="section" id="sec46"><span class="c006">4.1&#XA0;&#XA0;Function calls</span></h2><!--SEC END --><p><span class="c005">
</span><a id="functionchap"></a><span class="c005">
</span><a id="hevea_default191"></a></p><p><span class="c006">In the context of programming, a <span class="c009">function</span> is a named sequence of
statements that performs a computation. When you define a function,
you specify the name and the sequence of statements. Later, you can
&#X201C;call&#X201D; the function by name. 
We have already seen one example of a <span class="c009">function call</span>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; type(32)
&lt;type 'int'&gt;
</span></pre><p><span class="c006">The name of the function is <span class="c001">type</span>. The expression in parentheses
is called the <span class="c009">argument</span> of the function. The argument is 
a value or variable that we are passing into the function as input 
to the function. 
The result, for the <span class="c001">type</span> function, is the type of the argument.</span></p><p><a id="hevea_default192"></a></p><p><span class="c006">It is common to say that a function &#X201C;takes&#X201D; an argument and &#X201C;returns&#X201D;
a result. The result is called the <span class="c009">return value</span>.</span></p><p><a id="hevea_default193"></a><span class="c005">
</span><a id="hevea_default194"></a></p><span class="c005">
</span><!--TOC section id="sec47" <span class="c000"><span class="c005">Built-in functions</span></span>-->
<h2 class="section" id="sec47"><span class="c006">4.2&#XA0;&#XA0;Built-in functions</span></h2><!--SEC END --><p><span class="c006">Python provides a number of important built-in functions that
we can use without needing to provide the function definition.
The creators of Python wrote a set of functions 
to solve common problems and included them in Python for us to use.</span></p><p><span class="c006">The <span class="c001">max</span> and <span class="c001">min</span> functions give us the largest and 
smallest values in a list, respectively:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; max('Hello world')
'w'
&gt;&gt;&gt; min('Hello world')
' '
&gt;&gt;&gt;
</span></pre><p><span class="c006">The <span class="c001">max</span> function tells us the &#X201C;largest character&#X201D; in the 
string (which turns out to be the letter &#X201C;w&#X201D;) and the <span class="c001">min</span>
function shows us the smallest character (which turns out to be a 
space).</span></p><p><span class="c006">Another very common built-in function is the <span class="c001">len</span> function
which tells us how many items are in its argument. If the argument
to <span class="c001">len</span> is a string, it returns the number of characters 
in the string.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; len('Hello world')
11
&gt;&gt;&gt;
</span></pre><p><span class="c006">These functions are not limited to looking at strings. They can operate
on any set of values, as we will see in later chapters.</span></p><p><span class="c006">You should treat the names of built-in functions as reserved words (i.e.,
avoid using &#X201C;max&#X201D; as a variable name).</span></p><span class="c005">
</span><!--TOC section id="sec48" <span class="c000"><span class="c005">Type conversion functions</span></span>-->
<h2 class="section" id="sec48"><span class="c006">4.3&#XA0;&#XA0;Type conversion functions</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default195"></a><span class="c005">
</span><a id="hevea_default196"></a></p><p><span class="c006">Python also provides built-in functions that convert values
from one type to another. The <span class="c001">int</span> function takes any value and
converts it to an integer, if it can, or complains otherwise:</span></p><p><a id="hevea_default197"></a><span class="c005">
</span><a id="hevea_default198"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; int('32')
32
&gt;&gt;&gt; int('Hello')
ValueError: invalid literal for int(): Hello
</span></pre><p><span class="c006"><span class="c001">int</span> can convert floating-point values to integers, but it
doesn&#X2019;t round off; it chops off the fraction part:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; int(3.99999)
3
&gt;&gt;&gt; int(-2.3)
-2
</span></pre><p><span class="c006"><span class="c001">float</span> converts integers and strings to floating-point
numbers:</span></p><p><a id="hevea_default199"></a><span class="c005">
</span><a id="hevea_default200"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; float(32)
32.0
&gt;&gt;&gt; float('3.14159')
3.14159
</span></pre><p><span class="c006">Finally, <span class="c001">str</span> converts its argument to a string:</span></p><p><a id="hevea_default201"></a><span class="c005">
</span><a id="hevea_default202"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; str(32)
'32'
&gt;&gt;&gt; str(3.14159)
'3.14159'
</span></pre><span class="c005">
</span><!--TOC section id="sec49" <span class="c000"><span class="c005">Random numbers</span></span>-->
<h2 class="section" id="sec49"><span class="c006">4.4&#XA0;&#XA0;Random numbers</span></h2><!--SEC END --><p><a id="hevea_default203"></a><span class="c005">
</span><a id="hevea_default204"></a><span class="c005">
</span><a id="hevea_default205"></a><span class="c005">
</span><a id="hevea_default206"></a></p><p><span class="c006">Given the same inputs, most computer programs generate the same
outputs every time, so they are said to be <span class="c009">deterministic</span>.
Determinism is usually a good thing, since we expect the same
calculation to yield the same result. For some applications, though,
we want the computer to be unpredictable. Games are an obvious
example, but there are more.</span></p><p><span class="c006">Making a program truly nondeterministic turns out to be not so easy,
but there are ways to make it at least seem nondeterministic. One of
them is to use <span class="c009">algorithms</span> that generate <span class="c009">pseudorandom</span> numbers.
Pseudorandom numbers are not truly random because they are generated
by a deterministic computation, but just by looking at the numbers it
is all but impossible to distinguish them from random.</span></p><p><a id="hevea_default207"></a><span class="c005">
</span><a id="hevea_default208"></a></p><p><span class="c006">The <span class="c001">random</span> module provides functions that generate
pseudorandom numbers (which I will simply call &#X201C;random&#X201D; from
here on).</span></p><p><a id="hevea_default209"></a><span class="c005">
</span><a id="hevea_default210"></a></p><p><span class="c006">The function <span class="c001">random</span> returns a random float
between 0.0 and 1.0 (including 0.0 but not 1.0). Each time you
call <span class="c001">random</span>, you get the next number in a long series. To see a
sample, run this loop:</span></p><pre class="verbatim"><span class="c004">import random

for i in range(10):
    x = random.random()
    print x
</span></pre><p><span class="c006">This program produces the following list of 10 random numbers
between 0.0 and up to but not including 1.0.</span></p><pre class="verbatim"><span class="c004">0.301927091705
0.513787075867
0.319470430881
0.285145917252
0.839069045123
0.322027080731
0.550722110248
0.366591677812
0.396981483964
0.838116437404
</span></pre><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Run the program on your system and see what numbers you get.
Run the program more than once and see what numbers you get.
</em></span></div><p><span class="c006">The <span class="c001">random</span> function is only one of many 
functions that handle random numbers.
The function <span class="c001">randint</span> takes the parameters <span class="c001">low</span> and
<span class="c001">high</span>, and returns an integer between <span class="c001">low</span> and
<span class="c001">high</span> (including both).</span></p><p><a id="hevea_default211"></a><span class="c005">
</span><a id="hevea_default212"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; random.randint(5, 10)
5
&gt;&gt;&gt; random.randint(5, 10)
9
</span></pre><p><span class="c006">To choose an element from a sequence at random, you can use
<span class="c001">choice</span>:</span></p><p><a id="hevea_default213"></a><span class="c005">
</span><a id="hevea_default214"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = [1, 2, 3]
&gt;&gt;&gt; random.choice(t)
2
&gt;&gt;&gt; random.choice(t)
3
</span></pre><p><span class="c006">The <span class="c001">random</span> module also provides functions to generate
random values from continuous distributions including
Gaussian, exponential, gamma, and a few more.</span></p><span class="c005">
</span><!--TOC section id="sec50" <span class="c000"><span class="c005">Math functions</span></span>-->
<h2 class="section" id="sec50"><span class="c006">4.5&#XA0;&#XA0;Math functions</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default215"></a><span class="c005">
</span><a id="hevea_default216"></a><span class="c005">
</span><a id="hevea_default217"></a><span class="c005">
</span><a id="hevea_default218"></a></p><p><span class="c006">Python has a <span class="c001">math</span> module that provides most of the familiar
mathematical functions. 
Before we can use the module, we have to import it:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; import math
</span></pre><p><span class="c006">This statement creates a <span class="c009">module object</span> named math. If
you print the module object, you get some information about it:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print math
&lt;module 'math' from '/usr/lib/python2.5/lib-dynload/math.so'&gt;
</span></pre><p><span class="c006">The module object contains the functions and variables defined in the
module. To access one of the functions, you have to specify the name
of the module and the name of the function, separated by a dot (also
known as a period). This format is called <span class="c009">dot notation</span>.</span></p><p><a id="hevea_default219"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; ratio = signal_power / noise_power
&gt;&gt;&gt; decibels = 10 * math.log10(ratio)

&gt;&gt;&gt; radians = 0.7
&gt;&gt;&gt; height = math.sin(radians)
</span></pre><p><span class="c006">The first example computes the logarithm base 10 of the
signal-to-noise ratio. The math module also provides a
function called <span class="c001">log</span> that computes logarithms base <span class="c001">e</span>.</span></p><p><a id="hevea_default220"></a><span class="c005">
</span><a id="hevea_default221"></a><span class="c005">
</span><a id="hevea_default222"></a><span class="c005">
</span><a id="hevea_default223"></a><span class="c005">
</span><a id="hevea_default224"></a><span class="c005">
</span><a id="hevea_default225"></a></p><p><span class="c006">The second example finds the sine of <span class="c001">radians</span>. The name of the
variable is a hint that <span class="c001">sin</span> and the other trigonometric
functions (<span class="c001">cos</span>, <span class="c001">tan</span>, etc.) take arguments in radians. To
convert from degrees to radians, divide by 360 and multiply by 2
&#X3C0;:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; degrees = 45
&gt;&gt;&gt; radians = degrees / 360.0 * 2 * math.pi
&gt;&gt;&gt; math.sin(radians)
0.707106781187
</span></pre><p><span class="c006">The expression <span class="c001">math.pi</span> gets the variable <span class="c001">pi</span> from the math
module. The value of this variable is an approximation
of &#X3C0;, accurate to about 15 digits.</span></p><p><a id="hevea_default226"></a></p><p><span class="c006">If you know
your trigonometry, you can check the previous result by comparing it to
the square root of two divided by two:</span></p><p><a id="hevea_default227"></a><span class="c005">
</span><a id="hevea_default228"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; math.sqrt(2) / 2.0
0.707106781187
</span></pre><span class="c005">
</span><!--TOC section id="sec51" <span class="c000"><span class="c005">Adding new functions</span></span>-->
<h2 class="section" id="sec51"><span class="c006">4.6&#XA0;&#XA0;Adding new functions</span></h2><!--SEC END --><p><span class="c006">So far, we have only been using the functions that come with Python,
but it is also possible to add new functions.
A <span class="c009">function definition</span> specifies the name of a new function and
the sequence of statements that execute when the function is called.
Once we define a function, we can reuse the function over and over 
throughout our program.</span></p><p><a id="hevea_default229"></a><span class="c005">
</span><a id="hevea_default230"></a><span class="c005">
</span><a id="hevea_default231"></a></p><p><span class="c006">Here is an example:</span></p><pre class="verbatim"><span class="c004">def print_lyrics():
    print "I'm a lumberjack, and I'm okay."
    print 'I sleep all night and I work all day.'
</span></pre><p><span class="c006"><span class="c001">def</span> is a keyword that indicates that this is a function
definition. The name of the function is <code>print_lyrics</code>. The
rules for function names are the same as for variable names: letters,
numbers and some punctuation marks are legal, but the first character
can&#X2019;t be a number. You can&#X2019;t use a keyword as the name of a function,
and you should avoid having a variable and a function with the same
name.</span></p><p><a id="hevea_default232"></a><span class="c005">
</span><a id="hevea_default233"></a><span class="c005">
</span><a id="hevea_default234"></a></p><p><span class="c006">The empty parentheses after the name indicate that this function
doesn&#X2019;t take any arguments. Later we will build functions that 
take arguments as their inputs.</span></p><p><a id="hevea_default235"></a><span class="c005">
</span><a id="hevea_default236"></a><span class="c005">
</span><a id="hevea_default237"></a><span class="c005">
</span><a id="hevea_default238"></a><span class="c005">
</span><a id="hevea_default239"></a></p><p><span class="c006">The first line of the function definition is called the <span class="c009">header</span>;
the rest is called the <span class="c009">body</span>. The header has to end with a colon
and the body has to be indented. By convention, the indentation is
always four spaces. The body can contain
any number of statements.</span></p><p><span class="c006">The strings in the print statements are enclosed in
quotes. Single quotes and double quotes do the same thing;
most people use single quotes except in cases like this where
a single quote (which is also an apostrophe) appears in the string.</span></p><p><a id="hevea_default240"></a></p><p><span class="c006">If you type a function definition in interactive mode, the interpreter
prints ellipses (<em>...</em>) to let you know that the definition
isn&#X2019;t complete:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; def print_lyrics():
...     print "I'm a lumberjack, and I'm okay."
...     print 'I sleep all night and I work all day.'
...
</span></pre><p><span class="c006">To end the function, you have to enter an empty line (this is
not necessary in a script).</span></p><p><span class="c006">Defining a function creates a variable with the same name.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print print_lyrics
&lt;function print_lyrics at 0xb7e99e9c&gt;
&gt;&gt;&gt; print type(print_lyrics)
&lt;type 'function'&gt;
</span></pre><p><span class="c006">The value of <code>print_lyrics</code> is a <span class="c009">function object</span>, which
has type <code>'function'</code>.</span></p><p><a id="hevea_default241"></a><span class="c005">
</span><a id="hevea_default242"></a></p><p><span class="c006">The syntax for calling the new function is the same as
for built-in functions:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
</span></pre><p><span class="c006">Once you have defined a function, you can use it inside another
function. For example, to repeat the previous refrain, we could write
a function called <code>repeat_lyrics</code>:</span></p><pre class="verbatim"><span class="c004">def repeat_lyrics():
    print_lyrics()
    print_lyrics()
</span></pre><p><span class="c006">And then call <code>repeat_lyrics</code>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; repeat_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
</span></pre><p><span class="c006">But that&#X2019;s not really how the song goes.</span></p><span class="c005">
</span><!--TOC section id="sec52" <span class="c000"><span class="c005">Definitions and uses</span></span>-->
<h2 class="section" id="sec52"><span class="c006">4.7&#XA0;&#XA0;Definitions and uses</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default243"></a></p><p><span class="c006">Pulling together the code fragments from the previous section, the
whole program looks like this:</span></p><pre class="verbatim"><span class="c004">def print_lyrics():
    print "I'm a lumberjack, and I'm okay."
    print 'I sleep all night and I work all day.'

def repeat_lyrics():
    print_lyrics()
    print_lyrics()

repeat_lyrics()
</span></pre><p><span class="c006">This program contains two function definitions: <code>print_lyrics</code> and
<code>repeat_lyrics</code>. Function definitions get executed just like other
statements, but the effect is to create function objects. The statements
inside the function do not get executed until the function is called, and
the function definition generates no output.</span></p><p><a id="hevea_default244"></a></p><p><span class="c006">As you might expect, you have to create a function before you can
execute it. In other words, the function definition has to be
executed before the first time it is called.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Move the last line of this program
to the top, so the function call appears before the definitions. Run 
the program and see what error
message you get.
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Move the function call back to the bottom
and move the definition of <code>print_lyrics</code> after the definition of
<code>repeat_lyrics</code>. What happens when you run this program?
</em></span></div><span class="c005">
</span><!--TOC section id="sec53" <span class="c000"><span class="c005">Flow of execution</span></span>-->
<h2 class="section" id="sec53"><span class="c006">4.8&#XA0;&#XA0;Flow of execution</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default245"></a></p><p><span class="c006">In order to ensure that a function is defined before its first use,
you have to know the order in which statements are executed, which is
called the <span class="c009">flow of execution</span>.</span></p><p><span class="c006">Execution always begins at the first statement of the program.
Statements are executed one at a time, in order from top to bottom.</span></p><p><span class="c006">Function <em>definitions</em> do not alter the flow of execution of the
program, but remember that statements inside the function are not
executed until the function is called.</span></p><p><span class="c006">A function call is like a detour in the flow of execution. Instead of
going to the next statement, the flow jumps to the body of
the function, executes all the statements there, and then comes back
to pick up where it left off.</span></p><p><span class="c006">That sounds simple enough, until you remember that one function can
call another. While in the middle of one function, the program might
have to execute the statements in another function. But while
executing that new function, the program might have to execute yet
another function!</span></p><p><span class="c006">Fortunately, Python is good at keeping track of where it is, so each
time a function completes, the program picks up where it left off in
the function that called it. When it gets to the end of the program,
it terminates.</span></p><p><span class="c006">What&#X2019;s the moral of this sordid tale? When you read a program, you
don&#X2019;t always want to read from top to bottom. Sometimes it makes
more sense if you follow the flow of execution.</span></p><span class="c005">
</span><!--TOC section id="sec54" <span class="c000"><span class="c005">Parameters and arguments</span></span>-->
<h2 class="section" id="sec54"><span class="c006">4.9&#XA0;&#XA0;Parameters and arguments</span></h2><!--SEC END --><p><span class="c005">
</span><a id="parameters"></a><span class="c005">
</span><a id="hevea_default246"></a><span class="c005">
</span><a id="hevea_default247"></a><span class="c005">
</span><a id="hevea_default248"></a><span class="c005">
</span><a id="hevea_default249"></a></p><p><span class="c006">Some of the built-in functions we have seen require arguments. For
example, when you call <span class="c001">math.sin</span> you pass a number
as an argument. Some functions take more than one argument:
<span class="c001">math.pow</span> takes two, the base and the exponent.</span></p><p><span class="c006">Inside the function, the arguments are assigned to
variables called <span class="c009">parameters</span>. Here is an example of a
user-defined function that takes an argument:</span></p><p><a id="hevea_default250"></a></p><pre class="verbatim"><span class="c004">def print_twice(bruce):
    print bruce
    print bruce
</span></pre><p><span class="c006">This function assigns the argument to a parameter
named <span class="c001">bruce</span>. When the function is called, it prints the value of
the parameter (whatever it is) twice.</span></p><p><span class="c006">This function works with any value that can be printed.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print_twice('Spam')
Spam
Spam
&gt;&gt;&gt; print_twice(17)
17
17
&gt;&gt;&gt; print_twice(math.pi)
3.14159265359
3.14159265359
</span></pre><p><span class="c006">The same rules of composition that apply to built-in functions also
apply to user-defined functions, so we can use any kind of expression
as an argument for <code>print_twice</code>:</span></p><p><a id="hevea_default251"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print_twice('Spam '*4)
Spam Spam Spam Spam
Spam Spam Spam Spam
&gt;&gt;&gt; print_twice(math.cos(math.pi))
-1.0
-1.0
</span></pre><p><span class="c006">The argument is evaluated before the function is called, so
in the examples the expressions <code>'Spam '*4</code> and
<span class="c001">math.cos(math.pi)</span> are only evaluated once.</span></p><p><a id="hevea_default252"></a></p><p><span class="c006">You can also use a variable as an argument:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; michael = 'Eric, the half a bee.'
&gt;&gt;&gt; print_twice(michael)
Eric, the half a bee.
Eric, the half a bee.
</span></pre><p><span class="c006">The name of the variable we pass as an argument (<span class="c001">michael</span>) has
nothing to do with the name of the parameter (<span class="c001">bruce</span>). It
doesn&#X2019;t matter what the value was called back home (in the caller);
here in <code>print_twice</code>, we call everybody <span class="c001">bruce</span>.</span></p><span class="c005">
</span><!--TOC section id="sec55" <span class="c000"><span class="c005">Fruitful functions and void functions</span></span>-->
<h2 class="section" id="sec55"><span class="c006">4.10&#XA0;&#XA0;Fruitful functions and void functions</span></h2><!--SEC END --><p><a id="hevea_default253"></a><span class="c005">
</span><a id="hevea_default254"></a><span class="c005">
</span><a id="hevea_default255"></a><span class="c005">
</span><a id="hevea_default256"></a><span class="c005"> </span></p><p><span class="c006">Some of the functions we are using, such as the math functions, yield
results; for lack of a better name, I call them <span class="c009">fruitful
functions</span>. Other functions, like <code>print_twice</code>, perform an
action but don&#X2019;t return a value. They are called <span class="c009">void
functions</span>.</span></p><p><span class="c006">When you call a fruitful function, you almost always
want to do something with the result; for example, you might
assign it to a variable or use it as part of an expression:</span></p><pre class="verbatim"><span class="c004">x = math.cos(radians)
golden = (math.sqrt(5) + 1) / 2
</span></pre><p><span class="c006">When you call a function in interactive mode, Python displays
the result:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; math.sqrt(5)
2.2360679774997898
</span></pre><p><span class="c006">But in a script, if you call a fruitful function and do 
not store the result of the function in a variable,
the return value vanishes into the mist!</span></p><pre class="verbatim"><span class="c004">math.sqrt(5)
</span></pre><p><span class="c006">This script computes the square root of 5, but since it doesn&#X2019;t store
the result in a variable or display the result, it is not very useful.</span></p><p><a id="hevea_default257"></a><span class="c005">
</span><a id="hevea_default258"></a></p><p><span class="c006">Void functions might display something on the screen or have some
other effect, but they don&#X2019;t have a return value. If you try to
assign the result to a variable, you get a special value called
<span class="c001">None</span>.</span></p><p><a id="hevea_default259"></a><span class="c005">
</span><a id="hevea_default260"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; result = print_twice('Bing')
Bing
Bing
&gt;&gt;&gt; print result
None
</span></pre><p><span class="c006">The value <span class="c001">None</span> is not the same as the string <code>'None'</code>. 
It is a special value that has its own type:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print type(None)
&lt;type 'NoneType'&gt;
</span></pre><p><span class="c006">To return a result from a function, we use the <span class="c001">return</span> statement 
in our function. For example, we could make a very 
simple function called <span class="c001">addtwo</span>
that adds two numbers together and returns a result.</span></p><pre class="verbatim"><span class="c004">def addtwo(a, b):
    added = a + b
    return added

x = addtwo(3, 5)
print x
</span></pre><p><span class="c006">When this script executes, the <span class="c001">print</span> statement will print out &#X201C;8&#X201D;
because the <span class="c001">addtwo</span> function was called with 3 and 5 as arguments.
Within the function, the parameters <span class="c001">a</span> and <span class="c001">b</span> were 3 and 5 
respectively. The function computed the sum of the two numbers and placed
it in the local function variable named <span class="c001">added</span>. 
Then it used the <span class="c001">return</span> statement 
to send the computed value back to the calling code 
as the function result, which was assigned
to the variable <span class="c001">x</span> and printed out.</span></p><span class="c005">
</span><!--TOC section id="sec56" <span class="c000"><span class="c005">Why functions?</span></span>-->
<h2 class="section" id="sec56"><span class="c006">4.11&#XA0;&#XA0;Why functions?</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default261"></a></p><p><span class="c006">It may not be clear why it is worth the trouble to divide
a program into functions. There are several reasons:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">Creating a new function gives you an opportunity to name a group
of statements, which makes your program easier to read, understand, 
and debug.</span></li><li class="li-itemize"><span class="c006">Functions can make a program smaller by eliminating repetitive
code. Later, if you make a change, you only have
to make it in one place.</span></li><li class="li-itemize"><span class="c006">Dividing a long program into functions allows you to debug the
parts one at a time and then assemble them into a working whole.</span></li><li class="li-itemize"><span class="c006">Well-designed functions are often useful for many programs.
Once you write and debug one, you can reuse it.</span></li></ul><p><span class="c006">Throughout the rest of the book, often we will use a function definition to 
explain a concept. Part of the skill of creating and using functions is
to have a function properly capture an idea such as &#X201C;find the smallest
value in a list of values&#X201D;. Later we will show you code that finds
the smallest in a list of values and we will present it to you as a function
named <span class="c001">min</span> which takes a list of values as its argument and 
returns the smallest value in the list.</span></p><span class="c005">
</span><!--TOC section id="sec57" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec57"><span class="c006">4.12&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="editor"></a><span class="c005">
</span><a id="hevea_default262"></a></p><p><span class="c006">If you are using a text editor to write your scripts, you might
run into problems with spaces and tabs. The best way to avoid
these problems is to use spaces exclusively (no tabs). Most text
editors that know about Python do this by default, but some
don&#X2019;t.</span></p><p><a id="hevea_default263"></a></p><p><span class="c006">Tabs and spaces are usually invisible, which makes them
hard to debug, so try to find an editor that manages indentation
for you.</span></p><p><span class="c006">Also, don&#X2019;t forget to save your program before you run it. Some
development environments do this automatically, but some don&#X2019;t.
In that case, the program you are looking at in the text editor
is not the same as the program you are running.</span></p><p><span class="c006">Debugging can take a long time if you keep running the same
incorrect program over and over!</span></p><p><span class="c006">Make sure that the code you are looking at is the code you are running.
If you&#X2019;re not sure, put something like <code>print 'hello'</code> at the
beginning of the program and run it again. If you don&#X2019;t see
<code>hello</code>, you&#X2019;re not running the right program!</span></p><span class="c005">
</span><!--TOC section id="sec58" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec58"><span class="c006">4.13&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">algorithm:</span></dt><dd class="dd-description"><span class="c006"> A general process for solving a category of
problems.
</span><a id="hevea_default264"></a></dd><dt class="dt-description"><span class="c010">argument:</span></dt><dd class="dd-description"><span class="c006"> A value provided to a function when the function is called.
This value is assigned to the corresponding parameter in the function.
</span><a id="hevea_default265"></a></dd><dt class="dt-description"><span class="c010">body:</span></dt><dd class="dd-description"><span class="c006"> The sequence of statements inside a function definition.
</span><a id="hevea_default266"></a></dd><dt class="dt-description"><span class="c010">composition:</span></dt><dd class="dd-description"><span class="c006"> Using an expression as part of a larger expression,
or a statement as part of a larger statement.
</span><a id="hevea_default267"></a></dd><dt class="dt-description"><span class="c010">deterministic:</span></dt><dd class="dd-description"><span class="c006"> Pertaining to a program that does the same
thing each time it runs, given the same inputs.
</span><a id="hevea_default268"></a></dd><dt class="dt-description"><span class="c010">dot notation:</span></dt><dd class="dd-description"><span class="c006"> The syntax for calling a function in another
module by specifying the module name followed by a dot (period) and
the function name.
</span><a id="hevea_default269"></a></dd><dt class="dt-description"><span class="c010">flow of execution:</span></dt><dd class="dd-description"><span class="c006"> The order in which statements are executed during
a program run.
</span><a id="hevea_default270"></a></dd><dt class="dt-description"><span class="c010">fruitful function:</span></dt><dd class="dd-description"><span class="c006"> A function that returns a value.
</span><a id="hevea_default271"></a></dd><dt class="dt-description"><span class="c010">function:</span></dt><dd class="dd-description"><span class="c006"> A named sequence of statements that performs some
useful operation. Functions may or may not take arguments and may or
may not produce a result.
</span><a id="hevea_default272"></a></dd><dt class="dt-description"><span class="c010">function call:</span></dt><dd class="dd-description"><span class="c006"> A statement that executes a function. It
consists of the function name followed by an argument list.
</span><a id="hevea_default273"></a></dd><dt class="dt-description"><span class="c010">function definition:</span></dt><dd class="dd-description"><span class="c006"> A statement that creates a new function,
specifying its name, parameters, and the statements it executes.
</span><a id="hevea_default274"></a></dd><dt class="dt-description"><span class="c010">function object:</span></dt><dd class="dd-description"><span class="c006"> A value created by a function definition.
The name of the function is a variable that refers to a function
object.
</span><a id="hevea_default275"></a></dd><dt class="dt-description"><span class="c010">header:</span></dt><dd class="dd-description"><span class="c006"> The first line of a function definition.
</span><a id="hevea_default276"></a></dd><dt class="dt-description"><span class="c010">import statement:</span></dt><dd class="dd-description"><span class="c006"> A statement that reads a module file and creates
a module object.
</span><a id="hevea_default277"></a><span class="c005">
</span><a id="hevea_default278"></a></dd><dt class="dt-description"><span class="c010">module object:</span></dt><dd class="dd-description"><span class="c006"> A value created by an <span class="c001">import</span> statement
that provides access to the data and code defined in a module.
</span><a id="hevea_default279"></a></dd><dt class="dt-description"><span class="c010">parameter:</span></dt><dd class="dd-description"><span class="c006"> A name used inside a function to refer to the value
passed as an argument.
</span><a id="hevea_default280"></a></dd><dt class="dt-description"><span class="c010">pseudorandom:</span></dt><dd class="dd-description"><span class="c006"> Pertaining to a sequence of numbers that appear
to be random, but are generated by a deterministic program.
</span><a id="hevea_default281"></a></dd><dt class="dt-description"><span class="c010">return value:</span></dt><dd class="dd-description"><span class="c006"> The result of a function. If a function call
is used as an expression, the return value is the value of
the expression.
</span><a id="hevea_default282"></a></dd><dt class="dt-description"><span class="c010">void function:</span></dt><dd class="dd-description"><span class="c006"> A function that does not return a value.
</span><a id="hevea_default283"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec59" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec59"><span class="c006">4.14&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
What is the purpose of the "def" keyword in Python?</em></span><p><span class="c006"><em>a) It is slang that means "the following code is really cool"<br />
b) It indicates the start of a function<br />
c) It indicates that the following indented section of code is to be stored for later<br />
d) b and c are both true<br />
e) None of the above
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
What will the following Python program print out?</em></span><pre class="verbatim"><span class="c004"><em>def fred():
   print "Zap"

def jane():
   print "ABC"

jane()
fred()
jane()
</em></span></pre><p><span class="c006"><em>a) Zap ABC jane fred jane<br />
b) Zap ABC Zap<br />
c) ABC Zap jane<br />
d) ABC Zap ABC<br />
e) Zap Zap Zap
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;6</span>&#XA0;&#XA0;<em>
Rewrite your pay computation with time-and-a-half for overtime
and create a function called <span class="c001">computepay</span> which takes
two parameters (<span class="c001">hours</span> and <span class="c001">rate</span>).</em></span><pre class="verbatim"><span class="c006"><em>Enter Hours: 45
Enter Rate: 10
Pay: 475.0
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;7</span>&#XA0;&#XA0;<em>
Rewrite the grade program from the previous chapter 
using a function called <span class="c001">computegrade</span> that takes
a score as its parameter and returns a grade as a string.</em></span><pre class="verbatim"><span class="c006"><em>Score   Grade
&gt; 0.9     A
&gt; 0.8     B
&gt; 0.7     C
&gt; 0.6     D
&lt;= 0.6    F

Program Execution:

Enter score: 0.95
A

Enter score: perfect
Bad score

Enter score: 10.0
Bad score

Enter score: 0.75
C

Enter score: 0.5
F
</em></span></pre><p><span class="c006"><em>Run the program repeatedly to test the various different values
for input.
</em></span></p></div><span class="c005">
</span><!--TOC chapter id="sec60" <span class="c000"><span class="c005">Iteration</span></span>-->
<h1 class="chapter" id="sec60"><span class="c006">Chapter&#XA0;5&#XA0;&#XA0;Iteration</span></h1><!--SEC END --><p><span class="c005">
</span><a id="hevea_default284"></a></p><span class="c005">
</span><!--TOC section id="sec61" <span class="c000"><span class="c005">Updating variables</span></span>-->
<h2 class="section" id="sec61"><span class="c006">5.1&#XA0;&#XA0;Updating variables</span></h2><!--SEC END --><p><span class="c005">
</span><a id="update"></a></p><p><a id="hevea_default285"></a><span class="c005">
</span><a id="hevea_default286"></a></p><p><span class="c006">A common pattern in assignment statements is an assignment statement
that updates a variable &#X2013; 
where the new value of the variable depends on the old.</span></p><pre class="verbatim"><span class="c004">x = x+1
</span></pre><p><span class="c006">This means &#X201C;get the current value of <span class="c001">x</span>, add 1, and then
update <span class="c001">x</span> with the new value.&#X201D;</span></p><p><span class="c006">If you try to update a variable that doesn&#X2019;t exist, you get an
error, because Python evaluates the right side before it assigns
a value to <span class="c001">x</span>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = x+1
NameError: name 'x' is not defined
</span></pre><p><span class="c006">Before you can update a variable, you have to <span class="c009">initialize</span>
it, usually with a simple assignment:</span></p><p><a id="hevea_default287"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; x = 0
&gt;&gt;&gt; x = x+1
</span></pre><p><span class="c006">Updating a variable by adding 1 is called an <span class="c009">increment</span>;
subtracting 1 is called a <span class="c009">decrement</span>.</span></p><p><a id="hevea_default288"></a><span class="c005">
</span><a id="hevea_default289"></a></p><span class="c005">
</span><!--TOC section id="sec62" <span class="c000"><span class="c005">The </span></span><span class="c000"><span class="c005"><span class="c001">while</span></span></span><span class="c000"><span class="c005"> statement</span></span>-->
<h2 class="section" id="sec62"><span class="c006">5.2&#XA0;&#XA0;The <span class="c001">while</span> statement</span></h2><!--SEC END --><p><a id="hevea_default290"></a><span class="c005">
</span><a id="hevea_default291"></a><span class="c005">
</span><a id="hevea_default292"></a><span class="c005">
</span><a id="hevea_default293"></a></p><p><span class="c006">Computers are often used to automate repetitive tasks. Repeating
identical or similar tasks without making errors is something that
computers do well and people do poorly.
Because iteration is so common, Python provides several
language features to make it easier. </span></p><p><span class="c006">One form of iteration in Python is the <span class="c001">while</span> statement. Here is 
a simple program that counts down from five and then says &#X201C;Blastoff!&#X201D;.</span></p><pre class="verbatim"><span class="c004">n = 5
while n &gt; 0:
    print n
    n = n-1
print 'Blastoff!'
</span></pre><p><span class="c006">You can almost read the <span class="c001">while</span> statement as if it were English.
It means, &#X201C;While <span class="c001">n</span> is greater than 0,
display the value of <span class="c001">n</span> and then reduce the value of
<span class="c001">n</span> by 1. When you get to 0, exit the <span class="c001">while</span> statement and
display the word <span class="c001">Blastoff!</span>&#X201D;</span></p><p><a id="hevea_default294"></a></p><p><span class="c006">More formally, here is the flow of execution for a <span class="c001">while</span> statement:</span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006">Evaluate the condition, yielding <span class="c001">True</span> or <span class="c001">False</span>.</span></li><li class="li-enumerate"><span class="c006">If the condition is false, exit the <span class="c001">while</span> statement
and continue execution at the next statement.</span></li><li class="li-enumerate"><span class="c006">If the condition is true, execute the
body and then go back to step 1.</span></li></ol><p><span class="c006">This type of flow is called a <span class="c009">loop</span> because the third step
loops back around to the top. We call each time we execute the body of 
the loop an <span class="c009">iteration</span>. For the above loop, we 
would say, &#X201C;It had five iterations&#X201D;, which means that the body of
the loop was executed five times.</span></p><p><a id="hevea_default295"></a><span class="c005">
</span><a id="hevea_default296"></a><span class="c005">
</span><a id="hevea_default297"></a></p><p><span class="c006">The body of the loop should change the value of one or more variables
so that eventually the condition becomes false and the loop
terminates. 
We call the variable that changes each time the loop
executes and controls when the loop finishes the 
<span class="c009">iteration variable</span>.
If there is no iteration variable, the loop will repeat forever, 
resulting in an <span class="c009">infinite loop</span>. </span></p><span class="c005">
</span><!--TOC section id="sec63" <span class="c000"><span class="c005">Infinite loops</span></span>-->
<h2 class="section" id="sec63"><span class="c006">5.3&#XA0;&#XA0;Infinite loops</span></h2><!--SEC END --><p><span class="c006">An endless source of amusement for 
programmers is the observation that the directions on shampoo,
&#X201C;Lather, rinse, repeat,&#X201D; are an infinite loop because 
there is no <span class="c009">iteration variable</span> telling you how many times
to execute the loop.</span></p><p><a id="hevea_default298"></a><span class="c005">
</span><a id="hevea_default299"></a></p><p><span class="c006">In the case of <span class="c001">countdown</span>, we can prove that the loop
terminates because we know that the value of <span class="c001">n</span> is finite, and we
can see that the value of <span class="c001">n</span> gets smaller each time through the
loop, so eventually we have to get to 0. Other times a loop is obviously
infinite because it has no iteration variable at all.</span></p><span class="c005">
</span><!--TOC section id="sec64" <span class="c000"><span class="c005">&#X201C;Infinite loops&#X201D; and </span></span><span class="c000"><span class="c005"><span class="c001">break</span></span></span>-->
<h2 class="section" id="sec64"><span class="c006">5.4&#XA0;&#XA0;&#X201C;Infinite loops&#X201D; and <span class="c001">break</span></span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default300"></a><span class="c005">
</span><a id="hevea_default301"></a></p><p><span class="c006">Sometimes you don&#X2019;t know it&#X2019;s time to end a loop until you get half
way through the body. In that case you can write an infinite loop on purpose
and then use the <span class="c001">break</span> statement to jump out of the loop.</span></p><p><span class="c006">This loop is obviously an <span class="c009">infinite loop</span> because the logical 
expression on the
<span class="c001">while</span> statement is simply the logical constant <span class="c001">True</span>:</span></p><pre class="verbatim"><span class="c004">n = 10
while True:
    print n, 
    n = n - 1
print 'Done!'
</span></pre><p><span class="c006">If you make the mistake and run this code, you will learn quickly how
to stop a runaway Python process on your system or find where the power-off
button is on your computer. 
This program will 
run forever or until your battery runs out 
because the logical expression at the top of the loop 
is always true by virtue of the fact that the expression is the 
constant value <span class="c001">True</span>.</span></p><p><span class="c006">While this is a dysfunctional infinite loop, we can still use this pattern
to build useful loops as long as we carefully add code to the 
body of the loop to explicitly exit the loop using <span class="c001">break</span> 
when we have reached 
the exit condition.</span></p><p><span class="c006">For example, suppose you want to take input from the user until they
type <span class="c001">done</span>. You could write:</span></p><pre class="verbatim"><span class="c004">while True:
    line = raw_input('&gt; ')
    if line == 'done':
        break
    print line
print 'Done!'
</span></pre><p><span class="c006">The loop condition is <span class="c001">True</span>, which is always true, so the
loop runs repeatedly until it hits the break statement.</span></p><p><span class="c006">Each time through, it prompts the user with an angle bracket.
If the user types <span class="c001">done</span>, the <span class="c001">break</span> statement exits
the loop. Otherwise the program echoes whatever the user types
and goes back to the top of the loop. Here&#X2019;s a sample run:</span></p><pre class="verbatim"><span class="c004">&gt; hello there
hello there
&gt; finished
finished
&gt; done
Done!
</span></pre><p><span class="c006">This way of writing <span class="c001">while</span> loops is common because you
can check the condition anywhere in the loop (not just at the
top) and you can express the stop condition affirmatively
(&#X201C;stop when this happens&#X201D;) rather than negatively (&#X201C;keep going
until that happens.&#X201D;).</span></p><span class="c005">
</span><!--TOC section id="sec65" <span class="c000"><span class="c005">Finishing iterations with </span></span><span class="c000"><span class="c005"><span class="c001">continue</span></span></span>-->
<h2 class="section" id="sec65"><span class="c006">5.5&#XA0;&#XA0;Finishing iterations with <span class="c001">continue</span></span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default302"></a><span class="c005">
</span><a id="hevea_default303"></a></p><p><span class="c006">Sometimes you are in an iteration of a loop and want to finish the
current iteration and immediately jump to the next iteration.
In that case you can use the <span class="c001">continue</span>
statement to skip to the next iteration without finishing the
body of the loop for the current iteration.</span></p><p><span class="c006">Here is an example of a loop that copies its input until the user
types &#X201C;done&#X201D;, but treats lines that start with the hash character
as lines not to be printed (kind of like Python comments).</span></p><pre class="verbatim"><span class="c004">while True:
    line = raw_input('&gt; ')
    if line[0] == '#' :
        continue
    if line == 'done':
        break
    print line
print 'Done!'
</span></pre><p><span class="c006">Here is a sample run of this new program with <span class="c001">continue</span> added.</span></p><pre class="verbatim"><span class="c004">&gt; hello there
hello there
&gt; # don't print this
&gt; print this!
print this!
&gt; done
Done!
</span></pre><p><span class="c006">All the lines are printed except the one that starts with the hash
sign because when the <span class="c001">continue</span> is executed, it ends 
the current iteration and jumps
back to the <span class="c001">while</span> statement to start the next iteration, thus 
skipping the <span class="c001">print</span> statement.</span></p><span class="c005">
</span><!--TOC section id="sec66" <span class="c000"><span class="c005">Definite loops using </span></span><span class="c000"><span class="c005"><span class="c001">for</span></span></span><span class="c000"><span class="c005"> </span></span>-->
<h2 class="section" id="sec66"><span class="c006">5.6&#XA0;&#XA0;Definite loops using <span class="c001">for</span> </span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default304"></a><span class="c005">
</span><a id="hevea_default305"></a></p><p><span class="c006">Sometimes we want to loop through a <span class="c009">set</span> of things such 
as a list of words, the lines in a file, or a list of numbers.
When we have a list of things to loop through, we can
construct a <em>definite</em> loop using a <span class="c001">for</span> statement.
We call the <span class="c001">while</span> statement an <em>indefinite</em> loop
because it simply loops until some condition becomes <span class="c001">False</span>, 
whereas the <span class="c001">for</span> loop is looping through a known
set of items so it runs through as many iterations as there
are items in the set.</span></p><p><span class="c006">The syntax of a <span class="c001">for</span> loop is similar to the <span class="c001">while</span> loop
in that there is a <span class="c001">for</span> statement and a loop body:</span></p><pre class="verbatim"><span class="c004">friends = ['Joseph', 'Glenn', 'Sally']
for friend in friends:
    print 'Happy New Year:', friend
print 'Done!'
</span></pre><p><span class="c006">In Python terms, 
the variable <span class="c001">friends</span> is a list</span><sup><a id="text9" href="#note9"><span class="c006">1</span></a></sup><span class="c006"> 
of three strings and the <span class="c001">for</span>
loop goes through the list and executes the body once
for each of the three strings in the list resulting in this output:</span></p><pre class="verbatim"><span class="c004">Happy New Year: Joseph
Happy New Year: Glenn
Happy New Year: Sally
Done!
</span></pre><p><span class="c006">Translating this <span class="c001">for</span> loop to English is not as direct as the 
<span class="c001">while</span>, but if you think of friends as a <span class="c009">set</span>,
it goes like this: &#X201C;Run the statements in the body of the 
for loop once for each friend <em>in</em> the set named friends.&#X201D;</span></p><p><span class="c006">Looking at the <span class="c001">for</span> loop, <span class="c009">for</span> and <span class="c009">in</span> are reserved
Python keywords, and <span class="c001">friend</span> and <span class="c001">friends</span> are variables.</span></p><p><span class="c002"><span class="c009">for</span> friend <span class="c009">in</span> friends<span class="c009">:<br />
<code> </code>print</span> &#X2019;Happy New Year&#X2019;, friend </span></p><p><span class="c006">In particular, <span class="c001">friend</span> is the <span class="c009">iteration variable</span> for 
the for loop. The variable <span class="c001">friend</span> changes for each iteration of
the loop and controls when the <span class="c001">for</span> loop completes. The 
<span class="c009">iteration variable</span> steps successively through the 
three strings stored in the <span class="c001">friends</span> variable.</span></p><span class="c005">
</span><!--TOC section id="sec67" <span class="c000"><span class="c005">Loop patterns</span></span>-->
<h2 class="section" id="sec67"><span class="c006">5.7&#XA0;&#XA0;Loop patterns</span></h2><!--SEC END --><p><span class="c006">Often we use a <span class="c001">for</span> or <span class="c001">while</span> loop to go through a list of items
or the contents of a file and we are looking for something such as
the largest or smallest value of the data we scan through.</span></p><p><span class="c006">These loops are generally constructed by:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">Initializing one or more variables before the loop starts</span></li><li class="li-itemize"><span class="c006">Performing some computation on each item in the loop body, 
possibly changing the variables in the body of the loop</span></li><li class="li-itemize"><span class="c006">Looking at the resulting variables when the loop completes</span></li></ul><p><span class="c006">We will use a list of numbers to demonstrate the concepts and construction
of these loop patterns. </span></p><span class="c005">
</span><!--TOC subsection id="sec68" <span class="c000"><span class="c005">Counting and summing loops</span></span>-->
<h3 class="subsection" id="sec68"><span class="c006">5.7.1&#XA0;&#XA0;Counting and summing loops</span></h3><!--SEC END --><p><span class="c006">For example, to count the number of items
in a list, we would write the following <span class="c001">for</span> loop:</span></p><pre class="verbatim"><span class="c004">count = 0
for itervar in [3, 41, 12, 9, 74, 15]:
    count = count + 1
print 'Count: ', count
</span></pre><p><span class="c006">We set the variable <span class="c001">count</span> to zero before the loop starts,
then we write a <span class="c001">for</span> loop to run through the list of numbers.
Our <span class="c009">iteration</span> variable is named <span class="c001">itervar</span> and while we do
not use <span class="c001">itervar</span> in the loop, it does control the loop and cause
the loop body to be executed once for each of the values in the list.</span></p><p><span class="c006">In the body of the loop, we add 1 to the current value of <span class="c001">count</span>
for each of the values in the list. While the loop is executing, the 
value of <span class="c001">count</span> is the number of values we have seen &#X201C;so far&#X201D;.</span></p><p><span class="c006">Once the loop completes, the value of <span class="c001">count</span> is the total number
of items. The total number &#X201C;falls in our lap&#X201D; at the end of the 
loop. We construct the loop so that we have what we want when the loop
finishes.</span></p><p><span class="c006">Another similar loop that computes the total of a set of numbers
is as follows:</span></p><pre class="verbatim"><span class="c004">total = 0
for itervar in [3, 41, 12, 9, 74, 15]:
    total = total + itervar
print 'Total: ', total
</span></pre><p><span class="c006">In this loop we <em>do</em> use the <span class="c009">iteration variable</span>.
Instead of simply adding one to the <span class="c001">count</span> as in the previous loop, 
we add the actual number (3, 41, 12, etc.) to the running 
total during each loop iteration.
If you think about the variable <span class="c001">total</span>, it contains the 
&#X201C;running total of the values so far&#X201D;. So before the loop
starts <span class="c001">total</span> is zero because we have not yet seen any values,
during the loop <span class="c001">total</span> is the running total, and at the end of 
the loop <span class="c001">total</span> is the overall total of all the values 
in the list.</span></p><p><span class="c006">As the loop executes, <span class="c001">total</span> accumulates the sum of the
elements; a variable used this way is sometimes called an
<span class="c009">accumulator</span>.
</span><a id="hevea_default306"></a></p><p><span class="c006">Neither the counting loop nor the summing loop are particularly 
useful in practice because there are built-in functions 
<span class="c001">len()</span> and <span class="c001">sum()</span> that compute the number of 
items in a list and the total of the items in the list
respectively.</span></p><span class="c005">
</span><!--TOC subsection id="sec69" <span class="c000"><span class="c005">Maximum and minimum loops</span></span>-->
<h3 class="subsection" id="sec69"><span class="c006">5.7.2&#XA0;&#XA0;Maximum and minimum loops</span></h3><!--SEC END --><p><a id="hevea_default307"></a><span class="c005">
</span><a id="hevea_default308"></a><span class="c005">
</span><a id="hevea_default309"></a><span class="c005">
</span><a id="hevea_default310"></a><span class="c005">
</span><a id="maximumloop"></a><span class="c006">
To find the largest value in a list or sequence, we construct the
following loop:</span></p><pre class="verbatim"><span class="c004">largest = None
print 'Before:', largest
for itervar in [3, 41, 12, 9, 74, 15]:
    if largest is None or itervar &gt; largest :
        largest = itervar
    print 'Loop:', itervar, largest
print 'Largest:', largest
</span></pre><p><span class="c006">When the program executes, the output is as follows:</span></p><pre class="verbatim"><span class="c004">Before: None
Loop: 3 3
Loop: 41 41
Loop: 12 41
Loop: 9 41
Loop: 74 74
Loop: 15 74
Largest: 74
</span></pre><p><span class="c006">The variable <span class="c001">largest</span> is best thought of as 
the &#X201C;largest value we have seen so far&#X201D;.
Before the loop, we set <span class="c001">largest</span> to the constant <span class="c001">None</span>. 
<span class="c001">None</span> is a special constant value which we can 
store in a variable to mark 
the variable as &#X201C;empty&#X201D;. </span></p><p><span class="c006">Before the loop starts, the largest value we have seen so far 
is <span class="c001">None</span> since we have not yet seen any values. While the 
loop is executing, if <span class="c001">largest</span> is <span class="c001">None</span> then we take
the first value we see as the largest so far. You can see in 
the first iteration when the value of <span class="c001">itervar</span> is 3,
since <span class="c001">largest</span> is <span class="c001">None</span>, we immediately set 
<span class="c001">largest</span> to be 3.</span></p><p><span class="c006">After the first iteration, <span class="c001">largest</span> is no longer <span class="c001">None</span>,
so the second part of the compound logical expression that checks
<span class="c001">itervar &gt; largest</span> triggers only when we see a value that is
larger than the &#X201C;largest so far&#X201D;. When we see a new &#X201C;even larger&#X201D;
value we take that new value for <span class="c001">largest</span>. You can see in the 
program output that <span class="c001">largest</span> progresses from 3 to 41 to 74.</span></p><p><span class="c006">At the end of the loop, we have scanned all of the values and
the variable <span class="c001">largest</span> now does contain the largest value
in the list.</span></p><p><span class="c006">To compute the smallest number, the code is very similar with one
small change:</span></p><pre class="verbatim"><span class="c004">smallest = None
print 'Before:', smallest
for itervar in [3, 41, 12, 9, 74, 15]:
    if smallest is None or itervar &lt; smallest:
        smallest = itervar
    print 'Loop:', itervar, smallest
print 'Smallest:', smallest
</span></pre><p><span class="c006">Again, <span class="c001">smallest</span> is the &#X201C;smallest so far&#X201D; before, during, and after the 
loop executes. When the loop has completed, <span class="c001">smallest</span> contains the
minimum value in the list.</span></p><p><span class="c006">Again as in counting and summing, the built-in functions 
<span class="c001">max()</span> and <span class="c001">min()</span> make writing these exact loops
unnecessary.</span></p><p><span class="c006">The following is a simple version of the Python built-in
<span class="c001">min()</span> function:</span></p><pre class="verbatim"><span class="c004">def min(values):
    smallest = None
    for value in values:
        if smallest is None or value &lt; smallest:
            smallest = value
    return smallest
</span></pre><p><span class="c006">In the function version of the smallest code, we removed all of the 
<span class="c001">print</span> statements so as to be equivalent to the <span class="c001">min</span> 
function which is already built in to Python.</span></p><span class="c005">
</span><!--TOC section id="sec70" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec70"><span class="c006">5.8&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c006">As you start writing bigger programs, you might find yourself
spending more time debugging. More code means more chances to
make an error and more places for bugs to hide.</span></p><p><a id="hevea_default311"></a><span class="c005">
</span><a id="hevea_default312"></a></p><p><span class="c006">One way to cut your debugging time is &#X201C;debugging by bisection.&#X201D;
For example, if there are 100 lines in your program and you
check them one at a time, it would take 100 steps.</span></p><p><span class="c006">Instead, try to break the problem in half. Look at the middle
of the program, or near it, for an intermediate value you
can check. Add a <span class="c001">print</span> statement (or something else
that has a verifiable effect) and run the program.</span></p><p><span class="c006">If the mid-point check is incorrect, the problem must be in the
first half of the program. If it is correct, the problem is
in the second half.</span></p><p><span class="c006">Every time you perform a check like this, you halve the number
of lines you have to search. After six steps (which is much
less than 100), you would be down to one or two lines of code,
at least in theory.</span></p><p><span class="c006">In practice it is not always clear what
the &#X201C;middle of the program&#X201D; is and not always possible to
check it. It doesn&#X2019;t make sense to count lines and find the
exact midpoint. Instead, think about places
in the program where there might be errors and places where it
is easy to put a check. Then choose a spot where you
think the chances are about the same that the bug is before
or after the check.</span></p><span class="c005">
</span><!--TOC section id="sec71" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec71"><span class="c006">5.9&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">accumulator:</span></dt><dd class="dd-description"><span class="c006"> A variable used in a loop to add up or
accumulate a result.
</span><a id="hevea_default313"></a></dd><dt class="dt-description"><span class="c010">counter:</span></dt><dd class="dd-description"><span class="c006"> A variable used in a loop to count the number
of times something happened. We initialize a counter to 
zero and then increment the counter each time we want to
&#X201C;count&#X201D; something.
</span><a id="hevea_default314"></a></dd><dt class="dt-description"><span class="c010">decrement:</span></dt><dd class="dd-description"><span class="c006"> An update that decreases the value of a variable.
</span><a id="hevea_default315"></a></dd><dt class="dt-description"><span class="c010">initialize:</span></dt><dd class="dd-description"><span class="c006"> An assignment that gives an initial value to
a variable that will be updated.</span></dd><dt class="dt-description"><span class="c010">increment:</span></dt><dd class="dd-description"><span class="c006"> An update that increases the value of a variable
(often by one).
</span><a id="hevea_default316"></a></dd><dt class="dt-description"><span class="c010">infinite loop:</span></dt><dd class="dd-description"><span class="c006"> A loop in which the terminating condition is
never satisfied or for which there is no terminating condition.
</span><a id="hevea_default317"></a></dd><dt class="dt-description"><span class="c010">iteration:</span></dt><dd class="dd-description"><span class="c006"> Repeated execution of a set of statements using
either a function that calls itself or a loop.
</span><a id="hevea_default318"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec72" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec72"><span class="c006">5.10&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Write a program which repeatedly reads numbers until the user
enters &#X201C;done&#X201D;.
Once &#X201C;done&#X201D; is entered, print out the total, count, and average
of the numbers. If the user enters anything other than a number, 
detect their mistake using <span class="c001">try</span> and <span class="c001">except</span> and 
print an error message and skip to the next number.</em></span><pre class="verbatim"><span class="c006"><em>Enter a number: 4
Enter a number: 5
Enter a number: bad data
Invalid input
Enter a number: 7
Enter a number: done
16 3 5.33333333333
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write another program that prompts for a list of numbers as above
and at the end prints out both the maximum and minimum of the numbers instead of the average.
</em></span></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note9" href="#text9"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">We will 
examine lists in more detail in a later chapter.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec73" <span class="c000"><span class="c005">Strings</span></span>-->
<h1 class="chapter" id="sec73"><span class="c006">Chapter&#XA0;6&#XA0;&#XA0;Strings</span></h1><!--SEC END --><p><span class="c005">
</span><a id="strings"></a></p><span class="c005">
</span><!--TOC section id="sec74" <span class="c000"><span class="c005">A string is a sequence</span></span>-->
<h2 class="section" id="sec74"><span class="c006">6.1&#XA0;&#XA0;A string is a sequence</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default319"></a><span class="c005">
</span><a id="hevea_default320"></a><span class="c005">
</span><a id="hevea_default321"></a><span class="c005">
</span><a id="hevea_default322"></a></p><p><span class="c006">A string is a <span class="c009">sequence</span> of characters. 
You can access the characters one at a time with the
bracket operator:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; letter = fruit[1]
</span></pre><p><a id="hevea_default323"></a><span class="c006">
The second statement extracts the character at index position 1 from the 
<span class="c001">fruit</span> variable and assigns it to the <span class="c001">letter</span> variable. </span></p><p><span class="c006">The expression in brackets is called an <span class="c009">index</span>. 
The index indicates which character in the sequence you
want (hence the name).</span></p><p><span class="c006">But you might not get what you expect:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print letter
a
</span></pre><p><span class="c006">For most people, the first letter of <code>'banana'</code> is <span class="c001">b</span>, not
<span class="c001">a</span>. But in Python, the index is an offset from the
beginning of the string, and the offset of the first letter is zero.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; letter = fruit[0]
&gt;&gt;&gt; print letter
b
</span></pre><p><span class="c006">So <span class="c001">b</span> is the 0th letter (&#X201C;zero-eth&#X201D;) of <code>'banana'</code>, <span class="c001">a</span>
is the 1th letter (&#X201C;one-eth&#X201D;), and <span class="c001">n</span> is the 2th (&#X201C;two-eth&#X201D;)
letter.</span></p><div class="center"><span class="c006"><img src="book009.png" /></span></div><p><a id="hevea_default324"></a><span class="c005">
</span><a id="hevea_default325"></a></p><p><span class="c006">You can use any expression, including variables and operators, as an
index, but the value of the index has to be an integer. Otherwise you
get:</span></p><p><a id="hevea_default326"></a><span class="c005">
</span><a id="hevea_default327"></a><span class="c005">
</span><a id="hevea_default328"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; letter = fruit[1.5]
TypeError: string indices must be integers
</span></pre><span class="c005">
</span><!--TOC section id="sec75" <span class="c000"><span class="c005">Getting the length of a string using </span></span><span class="c000"><span class="c005"><span class="c001">len</span></span></span>-->
<h2 class="section" id="sec75"><span class="c006">6.2&#XA0;&#XA0;Getting the length of a string using <span class="c001">len</span></span></h2><!--SEC END --><p><a id="hevea_default329"></a><span class="c005">
</span><a id="hevea_default330"></a></p><p><span class="c006"><span class="c001">len</span> is a built-in function that returns the number of characters
in a string:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; len(fruit)
6
</span></pre><p><span class="c006">To get the last letter of a string, you might be tempted to try something
like this:</span></p><p><a id="hevea_default331"></a><span class="c005">
</span><a id="hevea_default332"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; length = len(fruit)
&gt;&gt;&gt; last = fruit[length]
IndexError: string index out of range
</span></pre><p><span class="c006">The reason for the <span class="c001">IndexError</span> is that there is no letter in <span class="c001">&#X2019;banana&#X2019;</span> with the index 6. Since we started counting at zero, the
six letters are numbered 0 to 5. To get the last character, you have
to subtract 1 from <span class="c001">length</span>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; last = fruit[length-1]
&gt;&gt;&gt; print last
a
</span></pre><p><span class="c006">Alternatively, you can use negative indices, which count backward from
the end of the string. The expression <span class="c001">fruit[-1]</span> yields the last
letter, <span class="c001">fruit[-2]</span> yields the second to last, and so on.</span></p><p><a id="hevea_default333"></a><span class="c005">
</span><a id="hevea_default334"></a></p><span class="c005">
</span><!--TOC section id="sec76" <span class="c000"><span class="c005">Traversal through a string with a loop</span></span>-->
<h2 class="section" id="sec76"><span class="c006">6.3&#XA0;&#XA0;Traversal through a string with a loop</span></h2><!--SEC END --><p><span class="c005">
</span><a id="for"></a></p><p><a id="hevea_default335"></a><span class="c005">
</span><a id="hevea_default336"></a><span class="c005">
</span><a id="hevea_default337"></a><span class="c005">
</span><a id="hevea_default338"></a><span class="c005">
</span><a id="hevea_default339"></a><span class="c005">
</span><a id="hevea_default340"></a></p><p><span class="c006">A lot of computations involve processing a string one character at a
time. Often they start at the beginning, select each character in
turn, do something to it, and continue until the end. This pattern of
processing is called a <span class="c009">traversal</span>. One way to write a traversal
is with a <span class="c001">while</span> loop:</span></p><pre class="verbatim"><span class="c004">index = 0
while index &lt; len(fruit):
    letter = fruit[index]
    print letter
    index = index + 1
</span></pre><p><span class="c006">This loop traverses the string and displays each letter on a line by
itself. The loop condition is <span class="c001">index &lt; len(fruit)</span>, so
when <span class="c001">index</span> is equal to the length of the string, the
condition is false, and the body of the loop is not executed. The
last character accessed is the one with the index <span class="c001">len(fruit)-1</span>,
which is the last character in the string.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Write a <span class="c001">while</span> loop that starts at the last character in the string
and works its way backwards to the first character in the string, 
printing each letter on a separate line, except backwards.
</em></span></div><p><span class="c006">Another way to write a traversal is with a <span class="c001">for</span> loop:</span></p><pre class="verbatim"><span class="c004">for char in fruit:
    print char
</span></pre><p><span class="c006">Each time through the loop, the next character in the string is assigned
to the variable <span class="c001">char</span>. The loop continues until no characters are
left.</span></p><span class="c005">
</span><!--TOC section id="sec77" <span class="c000"><span class="c005">String slices</span></span>-->
<h2 class="section" id="sec77"><span class="c006">6.4&#XA0;&#XA0;String slices</span></h2><!--SEC END --><p><span class="c005">
</span><a id="slice"></a></p><p><a id="hevea_default341"></a><span class="c005">
</span><a id="hevea_default342"></a><span class="c005">
</span><a id="hevea_default343"></a><span class="c005">
</span><a id="hevea_default344"></a><span class="c005">
</span><a id="hevea_default345"></a></p><p><span class="c006">A segment of a string is called a <span class="c009">slice</span>. Selecting a slice is
similar to selecting a character:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; s = 'Monty Python'
&gt;&gt;&gt; print s[0:5]
Monty
&gt;&gt;&gt; print s[6:12]
Python
</span></pre><p><span class="c006">The operator <span class="c001">[n:m]</span> returns the part of the string from the 
&#X201C;n-eth&#X201D; character to the &#X201C;m-eth&#X201D; character, including the first but
excluding the last. </span></p><p><span class="c006">If you omit the first index (before the colon), the slice starts at
the beginning of the string. If you omit the second index, the slice
goes to the end of the string:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[:3]
'ban'
&gt;&gt;&gt; fruit[3:]
'ana'
</span></pre><p><span class="c006">If the first index is greater than or equal to the second the result
is an <span class="c009">empty string</span>, represented by two quotation marks:</span></p><p><a id="hevea_default346"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[3:3]
"
</span></pre><p><span class="c006">An empty string contains no characters and has length 0, but other
than that, it is the same as any other string.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Given that <span class="c001">fruit</span> is a string, what does
<span class="c001">fruit[:]</span> mean?</em></span><p><a id="hevea_default347"></a><span class="c005">
</span><a id="hevea_default348"></a></p></div><span class="c005">
</span><!--TOC section id="sec78" <span class="c000"><span class="c005">Strings are immutable</span></span>-->
<h2 class="section" id="sec78"><span class="c006">6.5&#XA0;&#XA0;Strings are immutable</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default349"></a><span class="c005">
</span><a id="hevea_default350"></a><span class="c005">
</span><a id="hevea_default351"></a></p><p><span class="c006">It is tempting to use the <span class="c001">[]</span> operator on the left side of an
assignment, with the intention of changing a character in a string.
For example:</span></p><p><a id="hevea_default352"></a><span class="c005">
</span><a id="hevea_default353"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; greeting[0] = 'J'
TypeError: object does not support item assignment
</span></pre><p><span class="c006">The &#X201C;object&#X201D; in this case is the string and the &#X201C;item&#X201D; is
the character you tried to assign. For now, an <span class="c009">object</span> is
the same thing as a value, but we will refine that definition
later. An <span class="c009">item</span> is one of the values in a sequence.</span></p><p><a id="hevea_default354"></a><span class="c005">
</span><a id="hevea_default355"></a><span class="c005">
</span><a id="hevea_default356"></a><span class="c005">
</span><a id="hevea_default357"></a></p><p><span class="c006">The reason for the error is that
strings are <span class="c009">immutable</span>, which means you can&#X2019;t change an
existing string. The best you can do is create a new string
that is a variation on the original:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; new_greeting = 'J' + greeting[1:]
&gt;&gt;&gt; print new_greeting
Jello, world!
</span></pre><p><span class="c006">This example concatenates a new first letter onto
a slice of <span class="c001">greeting</span>. It has no effect on
the original string.</span></p><p><a id="hevea_default358"></a></p><span class="c005">
</span><!--TOC section id="sec79" <span class="c000"><span class="c005">Looping and counting</span></span>-->
<h2 class="section" id="sec79"><span class="c006">6.6&#XA0;&#XA0;Looping and counting</span></h2><!--SEC END --><p><span class="c005">
</span><a id="counter"></a></p><p><a id="hevea_default359"></a><span class="c005">
</span><a id="hevea_default360"></a><span class="c005">
</span><a id="hevea_default361"></a><span class="c005">
</span><a id="hevea_default362"></a></p><p><span class="c006">The following program counts the number of times the letter <span class="c001">a</span>
appears in a string:</span></p><pre class="verbatim"><span class="c004">word = 'banana'
count = 0
for letter in word:
    if letter == 'a':
        count = count + 1
print count
</span></pre><p><span class="c006">This program demonstrates another pattern of computation called a <span class="c009">counter</span>. The variable <span class="c001">count</span> is initialized to 0 and then
incremented each time an <span class="c001">a</span> is found.
When the loop exits, <span class="c001">count</span>
contains the result&#X2014;the total number of <span class="c001">a</span>&#X2019;s.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;
</span><a id="hevea_default363"></a><p><span class="c006"><em>Encapsulate this code in a function named <span class="c001">count</span>, and generalize it so that it accepts the string and the
letter as arguments.
</em></span></p></div><span class="c005">
</span><!--TOC section id="sec80" <span class="c000"><span class="c005">The </span></span><span class="c000"><span class="c005"><span class="c001">in</span></span></span><span class="c000"><span class="c005"> operator</span></span>-->
<h2 class="section" id="sec80"><span class="c006">6.7&#XA0;&#XA0;The <span class="c001">in</span> operator</span></h2><!--SEC END --><p><span class="c005">
</span><a id="inboth"></a></p><p><a id="hevea_default364"></a><span class="c005">
</span><a id="hevea_default365"></a><span class="c005">
</span><a id="hevea_default366"></a><span class="c005">
</span><a id="hevea_default367"></a></p><p><span class="c006">The word <span class="c001">in</span> is a boolean operator that takes two strings and
returns <span class="c001">True</span> if the first appears as a substring in the second:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 'a' in 'banana'
True
&gt;&gt;&gt; 'seed' in 'banana'
False
</span></pre><span class="c005">
</span><!--TOC section id="sec81" <span class="c000"><span class="c005">String comparison</span></span>-->
<h2 class="section" id="sec81"><span class="c006">6.8&#XA0;&#XA0;String comparison</span></h2><!--SEC END --><p><a id="hevea_default368"></a><span class="c005">
</span><a id="hevea_default369"></a></p><p><span class="c006">The comparison operators work on strings. To see if two strings are equal:</span></p><pre class="verbatim"><span class="c004">if word == 'banana':
    print  'All right, bananas.'
</span></pre><p><span class="c006">Other comparison operations are useful for putting words in alphabetical
order:</span></p><pre class="verbatim"><span class="c004">if word &lt; 'banana':
    print 'Your word,' + word + ', comes before banana.'
elif word &gt; 'banana':
    print 'Your word,' + word + ', comes after banana.'
else:
    print 'All right, bananas.'
</span></pre><p><span class="c006">Python does not handle uppercase and lowercase letters the same way
that people do. All the uppercase letters come before all the
lowercase letters, so:</span></p><pre class="verbatim"><span class="c004">Your word, Pineapple, comes before banana.
</span></pre><p><span class="c006">A common way to address this problem is to convert strings to a
standard format, such as all lowercase, before performing the
comparison. Keep that in mind in case you have to defend yourself
against a man armed with a Pineapple.</span></p><span class="c005">
</span><!--TOC section id="sec82" <span class="c000"><span class="c005"><span class="c001">string</span></span></span><span class="c000"><span class="c005"> methods</span></span>-->
<h2 class="section" id="sec82"><span class="c006">6.9&#XA0;&#XA0;<span class="c001">string</span> methods</span></h2><!--SEC END --><p><span class="c006">Strings are an example of Python <span class="c009">objects</span>. An object contains
both data (the actual string itself) and <span class="c009">methods</span>, which
are effectively functions that are built into the object and 
are available to any <span class="c009">instance</span> of the object.</span></p><p><span class="c006">Python has a function called <span class="c001">dir</span> which lists the methods available
for an object. The <span class="c001">type</span> function shows the type of an object 
and the <span class="c001">dir</span> function shows the available methods.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; stuff = 'Hello world'
&gt;&gt;&gt; type(stuff)
&lt;type 'str'&gt;
&gt;&gt;&gt; dir(stuff)
['capitalize', 'center', 'count', 'decode', 'encode', 
'endswith', 'expandtabs', 'find', 'format', 'index', 
'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 
'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 
'partition', 'replace', 'rfind', 'rindex', 'rjust', 
'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 
'startswith', 'strip', 'swapcase', 'title', 'translate', 
'upper', 'zfill']
&gt;&gt;&gt; help(str.capitalize)
Help on method_descriptor:

capitalize(...)
    S.capitalize() -&gt; string
    
    Return a copy of the string S with only its first character
    capitalized.
&gt;&gt;&gt;
</span></pre><p><span class="c006">While the <span class="c001">dir</span> function lists the methods, and you 
can use <span class="c001">help</span> to get some simple documentation on a method, 
a better source of documentation for string methods would be
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-methods</span>.</span></p><p><span class="c006">Calling a <span class="c009">method</span> is similar to calling a function&#X2014;it 
takes arguments and returns a value&#X2014;but the syntax is different.
We call a method by appending the method name to the variable name
using the period as a delimiter.</span></p><p><span class="c006">For example, the
method <span class="c001">upper</span> takes a string and returns a new string with
all uppercase letters:</span></p><p><a id="hevea_default370"></a><span class="c005">
</span><a id="hevea_default371"></a></p><p><span class="c006">Instead of the function syntax <span class="c001">upper(word)</span>, it uses
the method syntax <span class="c001">word.upper()</span>.</span></p><p><a id="hevea_default372"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; new_word = word.upper()
&gt;&gt;&gt; print new_word
BANANA
</span></pre><p><span class="c006">This form of dot notation specifies the name of the method, <span class="c001">upper</span>, and the name of the string to apply the method to, <span class="c001">word</span>. The empty parentheses indicate that this method takes no
argument.</span></p><p><a id="hevea_default373"></a></p><p><span class="c006">A method call is called an <span class="c009">invocation</span>; in this case, we would
say that we are invoking <span class="c001">upper</span> on the <span class="c001">word</span>.</span></p><p><a id="hevea_default374"></a></p><p><span class="c006">For example, there is a string method named <span class="c001">find</span> that
searches for the position of one string within another:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; index = word.find('a')
&gt;&gt;&gt; print index
1
</span></pre><p><span class="c006">In this example, we invoke <span class="c001">find</span> on <span class="c001">word</span> and pass
the letter we are looking for as a parameter.</span></p><p><span class="c006">The <span class="c001">find</span> method can find substrings as well as characters:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; word.find('na')
2
</span></pre><p><span class="c006">It can take as a second argument the index where it should start:</span></p><p><a id="hevea_default375"></a><span class="c005">
</span><a id="hevea_default376"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; word.find('na', 3)
4
</span></pre><p><span class="c006">One common task is to remove white space (spaces, tabs, or newlines) from
the beginning and end of a string using the <span class="c001">strip</span> method:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; line = '  Here we go  '
&gt;&gt;&gt; line.strip()
'Here we go'
</span></pre><p><span class="c006">Some methods such as <span class="c009">startswith</span> return boolean values.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; line = 'Please have a nice day'
&gt;&gt;&gt; line.startswith('Please')
True
&gt;&gt;&gt; line.startswith('p')
False
</span></pre><p><span class="c006">You will note that <span class="c001">startswith</span> requires case to match, so sometimes
we take a line and map it all to lowercase before we do any checking
using the <span class="c001">lower</span> method.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; line = 'Please have a nice day'
&gt;&gt;&gt; line.startswith('p')
False
&gt;&gt;&gt; line.lower()
'please have a nice day'
&gt;&gt;&gt; line.lower().startswith('p')
True
</span></pre><p><span class="c006">In the last example, the method <span class="c001">lower</span> is called
and then we use <span class="c001">startswith</span>
to see if the resulting lowercase string
starts with the letter &#X201C;p&#X201D;. As long as we are careful
with the order, we can make multiple method calls in a
single expression.</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;
</span><a id="hevea_default377"></a><span class="c005">
</span><a id="hevea_default378"></a><p><span class="c006"><em>There is a string method called <span class="c001">count</span> that is similar
to the function in the previous exercise. Read the documentation
of this method at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-methods</span>
and write an invocation that counts the number of times the 
letter a occurs
in <code>'banana'</code>.
</em></span></p></div><span class="c005">
</span><!--TOC section id="sec83" <span class="c000"><span class="c005">Parsing strings</span></span>-->
<h2 class="section" id="sec83"><span class="c006">6.10&#XA0;&#XA0;Parsing strings</span></h2><!--SEC END --><p><span class="c006">Often, we want to look into a string and find a substring. For example
if we were presented a series of lines formatted as follows:</span></p><pre><span class="c004">
From stephen.marquard@<span class="c009"> uct.ac.za</span> Sat Jan  5 09:14:16 2008
</span></pre><p><span class="c006">and we wanted to pull out only the second half of the address (i.e.,
<span class="c001">uct.ac.za</span>) from each line, we can do this by using the <span class="c001">find</span>
method and string slicing. </span></p><p><span class="c006">First, we will find the position of the at-sign in the string. Then we will
find the position of the first space <em>after</em> the at-sign. And then we
will use string slicing to extract the portion of the string which we 
are looking for.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; data = 'From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008'
&gt;&gt;&gt; atpos = data.find('@')
&gt;&gt;&gt; print atpos
21
&gt;&gt;&gt; sppos = data.find(' ',atpos)
&gt;&gt;&gt; print sppos
31
&gt;&gt;&gt; host = data[atpos+1:sppos]
&gt;&gt;&gt; print host
uct.ac.za
&gt;&gt;&gt; 
</span></pre><p><span class="c006">We use a version of the <span class="c001">find</span> method which allows us to specify
a position in the string where we want <span class="c001">find</span> to start looking.
When we slice, we extract the characters 
from &#X201C;one beyond the at-sign through up to <em>but not including</em> the 
space character&#X201D;. </span></p><p><span class="c006">The documentation for the <span class="c001">find</span> method is available at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-methods</span>.</span></p><span class="c005">
</span><!--TOC section id="sec84" <span class="c000"><span class="c005">Format operator</span></span>-->
<h2 class="section" id="sec84"><span class="c006">6.11&#XA0;&#XA0;Format operator</span></h2><!--SEC END --><p><a id="hevea_default379"></a><span class="c005">
</span><a id="hevea_default380"></a></p><p><span class="c006">The <span class="c009">format operator</span>, <span class="c001">%</span>
allows us to construct strings, replacing parts of the strings
with the data stored in variables.
When applied to integers, <span class="c001">%</span> is the modulus operator. But
when the first operand is a string, <span class="c001">%</span> is the format operator.</span></p><p><a id="hevea_default381"></a></p><p><span class="c006">The first operand is the <span class="c009">format string</span>, which contains
one or more <span class="c009">format sequences</span> that specify how
the second operand is formatted. The result is a string.</span></p><p><a id="hevea_default382"></a></p><p><span class="c006">For example, the format sequence <code>'%d'</code> means that
the second operand should be formatted as an
integer (<span class="c001">d</span> stands for &#X201C;decimal&#X201D;):</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; camels = 42
&gt;&gt;&gt; '%d' % camels
'42'
</span></pre><p><span class="c006">The result is the string <code>'42'</code>, which is not to be confused
with the integer value <span class="c001">42</span>.</span></p><p><span class="c006">A format sequence can appear anywhere in the string,
so you can embed a value in a sentence:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; camels = 42
&gt;&gt;&gt; 'I have spotted %d camels.' % camels
'I have spotted 42 camels.'
</span></pre><p><span class="c006">If there is more than one format sequence in the string,
the second argument has to be a tuple</span><sup><a id="text10" href="#note10"><span class="c006">1</span></a></sup><span class="c006">. Each format sequence is
matched with an element of the tuple, in order.</span></p><p><span class="c006">The following example uses <code>'%d'</code> to format an integer,
<code>'%g'</code> to format
a floating-point number (don&#X2019;t ask why), and <code>'%s'</code> to format
a string:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 'In %d years I have spotted %g %s.' % (3, 0.1, 'camels')
'In 3 years I have spotted 0.1 camels.'
</span></pre><p><span class="c006">The number of elements in the tuple must match the number
of format sequences in the string. The types of the
elements also must match the format sequences:</span></p><p><a id="hevea_default383"></a><span class="c005">
</span><a id="hevea_default384"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; '%d %d %d' % (1, 2)
TypeError: not enough arguments for format string
&gt;&gt;&gt; '%d' % 'dollars'
TypeError: illegal argument type for built-in operation
</span></pre><p><span class="c006">In the first example, there aren&#X2019;t enough elements; in the
second, the element is the wrong type.</span></p><p><span class="c006">The format operator is powerful, but it can be difficult to use. You
can read more about it at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-formatting</span>.</span></p><span class="c005">
</span><!--TOC section id="sec85" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec85"><span class="c006">6.12&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default385"></a></p><p><span class="c006">A skill that you should cultivate as you program is always
asking yourself, &#X201C;What could go wrong here?&#X201D; or alternatively,
&#X201C;What crazy thing might our user do to crash our (seemingly) 
perfect program?&#X201D;</span></p><p><span class="c006">For example, look at the program which we used to demonstrate
the <span class="c001">while</span> loop in the chapter on iteration:</span></p><pre class="verbatim"><span class="c004">while True:
    line = raw_input('&gt; ')
    if line[0] == '#' :
        continue
    if line == 'done':
        break
    print line

print 'Done!'
</span></pre><p><span class="c006">Look what happens when the user enters an empty line of input:</span></p><pre class="verbatim"><span class="c004">&gt; hello there
hello there
&gt; # don't print this
&gt; print this!
print this!
&gt; 
Traceback (most recent call last):
  File "copytildone.py", line 3, in &lt;module&gt;
    if line[0] == '#' :
</span></pre><p><span class="c006">The code works fine until it is presented an empty line. Then
there is no zero-th character, so we get a traceback. There are two
solutions to this to make line three &#X201C;safe&#X201D; even if the line is 
empty.</span></p><p><span class="c006">One possibility is to simply use the <span class="c001">startswith</span> method
which returns <span class="c001">False</span> if the string is empty.</span></p><pre class="verbatim"><span class="c004">    if line.startswith('#') :
</span></pre><p><a id="hevea_default386"></a><span class="c005">
</span><a id="hevea_default387"></a><span class="c006">
Another way is to safely write the <span class="c001">if</span> statement using the <span class="c009">guardian</span>
pattern and make sure the second logical expression is evaluated 
only where there is at least one character in the string.:</span></p><pre class="verbatim"><span class="c004">    if len(line) &gt; 0 and line[0] == '#' :
</span></pre><span class="c005">
</span><!--TOC section id="sec86" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec86"><span class="c006">6.13&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">counter:</span></dt><dd class="dd-description"><span class="c006"> A variable used to count something, usually initialized
to zero and then incremented.
</span><a id="hevea_default388"></a></dd><dt class="dt-description"><span class="c010">empty string:</span></dt><dd class="dd-description"><span class="c006"> A string with no characters and length 0, represented
by two quotation marks.
</span><a id="hevea_default389"></a></dd><dt class="dt-description"><span class="c010">format operator:</span></dt><dd class="dd-description"><span class="c006"> An operator, <span class="c001">%</span>, that takes a format
string and a tuple and generates a string that includes
the elements of the tuple formatted as specified by the format string.
</span><a id="hevea_default390"></a><span class="c005">
</span><a id="hevea_default391"></a></dd><dt class="dt-description"><span class="c010">format sequence:</span></dt><dd class="dd-description"><span class="c006"> A sequence of characters in a format string,
like <span class="c001">%d</span>, that specifies how a value should be formatted.
</span><a id="hevea_default392"></a></dd><dt class="dt-description"><span class="c010">format string:</span></dt><dd class="dd-description"><span class="c006"> A string, used with the format operator, that
contains format sequences.
</span><a id="hevea_default393"></a></dd><dt class="dt-description"><span class="c010">flag:</span></dt><dd class="dd-description"><span class="c006"> A boolean variable used to indicate whether a condition
is true.
</span><a id="hevea_default394"></a></dd><dt class="dt-description"><span class="c010">invocation:</span></dt><dd class="dd-description"><span class="c006"> A statement that calls a method.
</span><a id="hevea_default395"></a></dd><dt class="dt-description"><span class="c010">immutable:</span></dt><dd class="dd-description"><span class="c006"> The property of a sequence whose items cannot
be assigned.
</span><a id="hevea_default396"></a></dd><dt class="dt-description"><span class="c010">index:</span></dt><dd class="dd-description"><span class="c006"> An integer value used to select an item in
a sequence, such as a character in a string.
</span><a id="hevea_default397"></a></dd><dt class="dt-description"><span class="c010">item:</span></dt><dd class="dd-description"><span class="c006"> One of the values in a sequence.
</span><a id="hevea_default398"></a></dd><dt class="dt-description"><span class="c010">method:</span></dt><dd class="dd-description"><span class="c006"> A function that is associated with an object and called
using dot notation.
</span><a id="hevea_default399"></a></dd><dt class="dt-description"><span class="c010">object:</span></dt><dd class="dd-description"><span class="c006"> Something a variable can refer to. For now,
you can use &#X201C;object&#X201D; and &#X201C;value&#X201D; interchangeably.
</span><a id="hevea_default400"></a></dd><dt class="dt-description"><span class="c010">search:</span></dt><dd class="dd-description"><span class="c006"> A pattern of traversal that stops
when it finds what it is looking for.
</span><a id="hevea_default401"></a><span class="c005">
</span><a id="hevea_default402"></a></dd><dt class="dt-description"><span class="c010">sequence:</span></dt><dd class="dd-description"><span class="c006"> An ordered set; that is, a set of
values where each value is identified by an integer index.
</span><a id="hevea_default403"></a></dd><dt class="dt-description"><span class="c010">slice:</span></dt><dd class="dd-description"><span class="c006"> A part of a string specified by a range of indices.
</span><a id="hevea_default404"></a></dd><dt class="dt-description"><span class="c010">traverse:</span></dt><dd class="dd-description"><span class="c006"> To iterate through the items in a sequence,
performing a similar operation on each.
</span><a id="hevea_default405"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec87" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec87"><span class="c006">6.14&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
Take the following Python code that stores a string:&#X2018;</em></span><pre><span class="c004"><em>
str = &#X2019;X-DSPAM-Confidence: <span class="c009"> 0.8475</span>&#X2019;
</em></span></pre><p><span class="c006"><em>Use <span class="c001">find</span> and string slicing to extract the portion
of the string after the colon character and then use the 
<span class="c001">float</span> function to convert the extracted string 
into a floating point number.</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;6</span>&#XA0;&#XA0;
</span><a id="hevea_default406"></a><span class="c005">
</span><a id="hevea_default407"></a><p><span class="c006"><em>Read the documentation of the string methods at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-methods</span>.
You might want to experiment with some of them to make sure
you understand how they work. <span class="c001">strip</span> and
<span class="c001">replace</span> are particularly useful.</em></span></p><p><span class="c006"><em>The documentation uses a syntax that might be confusing.
For example, in <code>find(sub[, start[, end]])</code>, the brackets
indicate optional arguments. So <span class="c001">sub</span> is required, but
<span class="c001">start</span> is optional, and if you include <span class="c001">start</span>,
then <span class="c001">end</span> is optional.
</em></span></p></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note10" href="#text10"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">A tuple is a
sequence of comma-separated values inside a pair of brackets.
We will cover tuples in Chapter 10</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec88" <span class="c000"><span class="c005">Files</span></span>-->
<h1 class="chapter" id="sec88"><span class="c006">Chapter&#XA0;7&#XA0;&#XA0;Files</span></h1><!--SEC END --><p><a id="hevea_default408"></a><span class="c005">
</span><a id="hevea_default409"></a></p><span class="c005">
</span><!--TOC section id="sec89" <span class="c000"><span class="c005">Persistence</span></span>-->
<h2 class="section" id="sec89"><span class="c006">7.1&#XA0;&#XA0;Persistence</span></h2><!--SEC END --><p><a id="hevea_default410"></a><span class="c005">
</span><a id="hevea_default411"></a></p><p><span class="c006">So far, we have learned how to write programs and communicate 
our intentions to the <span class="c009">Central Processing Unit</span> using conditional
execution, functions, and iterations. We have learned how to 
create and use data structures in the <span class="c009">Main Memory</span>. The CPU 
and memory are where our software works and runs. It is where 
all of the &#X201C;thinking&#X201D; happens. </span></p><p><span class="c006">But if you recall from our hardware architecture discussions,
once the power is turned off, anything stored in either
the CPU or main memory is erased. So up to now, our
programs have just been transient fun exercises to learn Python.</span></p><div class="center"><span class="c006"><img src="book010.png" /></span></div><p><span class="c006">In this chapter, we start to work with <span class="c009">Secondary Memory</span> 
(or files).
Secondary memory is not erased even when the power is turned off. 
Or in the case of a USB flash drive, the
data we write from our programs can be removed from the 
system and transported to another system.</span></p><p><span class="c006">We will primarily focus on reading and writing text files such as 
those we create in a text editor. Later we will see how to work
with database files which are binary files, specifically designed to be read
and written through database software.</span></p><span class="c005">
</span><!--TOC section id="sec90" <span class="c000"><span class="c005">Opening files</span></span>-->
<h2 class="section" id="sec90"><span class="c006">7.2&#XA0;&#XA0;Opening files</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default412"></a><span class="c005">
</span><a id="hevea_default413"></a><span class="c005">
</span><a id="hevea_default414"></a></p><p><span class="c006">When we want to read or write a file (say on your hard drive), we first
must <span class="c009">open</span> the file. Opening the file communicates with your operating
system, which knows where the data for each file is stored. When you open
a file, you are asking the operating system to find the file by name
and make sure the file exists. In this example, we open the file 
<span class="c001">mbox.txt</span>, which should be stored in the same folder that you
are in when you start Python.
You can download this file from 
<span class="c001">www.py4inf.com/code/mbox.txt</span></span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fhand = open('mbox.txt')
&gt;&gt;&gt; print fhand
&lt;open file 'mbox.txt', mode 'r' at 0x1005088b0&gt;
</span></pre><p><a id="hevea_default415"></a><span class="c006">
If the <span class="c001">open</span> is successful, the operating system returns us a 
<span class="c009">file handle</span>. The file handle is not the actual data contained
in the file, but instead it is a &#X201C;handle&#X201D; that we can use to 
read the data. You are given a handle if the requested file
exists and you have the proper permissions to read the file.</span></p><div class="center"><span class="c006"><img src="book011.png" /></span></div><p><span class="c006">If the file does not exist, <span class="c001">open</span> will fail with a traceback and you 
will not get a handle to access the contents of the file:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fhand = open('stuff.txt')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
IOError: [Errno 2] No such file or directory: 'stuff.txt'
</span></pre><p><span class="c006">Later we will use <span class="c001">try</span> and <span class="c001">except</span> to deal more gracefully
with the situation where we attempt to open a file that does 
not exist.</span></p><span class="c005">
</span><!--TOC section id="sec91" <span class="c000"><span class="c005">Text files and lines</span></span>-->
<h2 class="section" id="sec91"><span class="c006">7.3&#XA0;&#XA0;Text files and lines</span></h2><!--SEC END --><p><span class="c006">A text file can be thought of as a sequence of lines, much like a Python
string can be thought of as a sequence of characters. For example, this
is a sample of a text file which records mail activity from various
individuals in an open source project development team:</span></p><pre><span class="c004">
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
Return-Path: &lt;postmaster@collab.sakaiproject.org&gt;
Date: Sat, 5 Jan 2008 09:12:18 -0500
To: source@collab.sakaiproject.org
From: stephen.marquard@uct.ac.za
Subject: [sakai] svn commit: r39772 - content/branches/
Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
...
</span></pre><p><span class="c006">The entire file of mail interactions is available from 
<span class="c001">www.py4inf.com/code/mbox.txt</span> 
and a shortened version of the file is available from
<span class="c001">www.py4inf.com/code/mbox-short.txt</span>.
These files are in a standard format for a file containing 
multiple mail messages. The lines which start with 
&#X201C;From &#X201D; separate the messages and the lines which start 
with &#X201C;From:&#X201D; are part of the messages. 
For more information about the mbox format, see 
<span class="c001">en.wikipedia.org/wiki/Mbox</span>. </span></p><p><span class="c006">To break the file into lines, there is a special character that 
represents the &#X201C;end of the line&#X201D; called the <span class="c009">newline</span> character.</span></p><p><a id="hevea_default416"></a><span class="c006">
In Python, we represent the <span class="c009">newline</span> character as a backslash-n in 
string constants. Even though this looks like two characters, it
is actually a single character. When we look at the variable by entering
&#X201C;stuff&#X201D; in the interpreter, it shows us the <code>\n</code> in the string, 
but when we use <span class="c001">print</span> to show the string, we see the string broken
into two lines by the newline character.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; stuff = 'Hello\nWorld!'
&gt;&gt;&gt; stuff
'Hello\nWorld!'
&gt;&gt;&gt; print stuff
Hello
World!
&gt;&gt;&gt; stuff = 'X\nY'
&gt;&gt;&gt; print stuff
X
Y
&gt;&gt;&gt; len(stuff)
3
</span></pre><p><span class="c006">You can also see that the length of the string <code>'X\nY'</code> is <em>three</em>
characters because the newline character is a single character.</span></p><p><span class="c006">So when we look at the lines in a file, we need to <em>imagine</em>
that there is a special invisible character called the newline at
the end of each line that marks the end of the line. </span></p><p><span class="c006">So the newline character separates the characters 
in the file into lines.</span></p><span class="c005">
</span><!--TOC section id="sec92" <span class="c000"><span class="c005">Reading files</span></span>-->
<h2 class="section" id="sec92"><span class="c006">7.4&#XA0;&#XA0;Reading files</span></h2><!--SEC END --><p><a id="hevea_default417"></a><span class="c005">
</span><a id="hevea_default418"></a><span class="c006">
While the <span class="c009">file handle</span> does not contain the data for the file,
it is quite easy to construct a <span class="c001">for</span> loop to read through 
and count each of the lines in a file:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox.txt')
count = 0
for line in fhand:
    count = count + 1
print 'Line Count:', count

python open.py 
Line Count: 132045
</span></pre><p><span class="c006">We can use the file handle as the sequence in our <span class="c001">for</span> loop. 
Our <span class="c001">for</span> loop simply counts the number of lines in the 
file and prints them out. The rough translation of the <span class="c001">for</span>
loop into English is, &#X201C;for each line in the file represented by the file
handle, add one to the <span class="c001">count</span> variable.&#X201D;</span></p><p><span class="c006">The reason that the <span class="c001">open</span> function does not read the entire file
is that the file might be quite large with many gigabytes of data.
The <span class="c001">open</span> statement takes the same amount of time regardless of the
size of the file. The <span class="c001">for</span> loop actually causes the data to be 
read from the file.</span></p><p><span class="c006">When the file is read using a <span class="c001">for</span> loop in this manner, Python
takes care of splitting the data in the file into separate lines using
the newline character. Python reads each line through 
the newline and includes
the newline as the last character in the <span class="c001">line</span> variable for each 
iteration of the <span class="c001">for</span> loop.</span></p><p><span class="c006">Because the <span class="c001">for</span> loop reads the data one line at a time, it can efficiently
read and count the lines in very large files without running 
out of main memory to store the data. The above program can 
count the lines in any size file using very little memory since 
each line is read, counted, and then discarded.</span></p><p><span class="c006">If you know the file is relatively small compared to the size of 
your main memory, you can read the whole file into one string
using the <span class="c001">read</span> method on the file handle.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fhand = open('mbox-short.txt')
&gt;&gt;&gt; inp = fhand.read()
&gt;&gt;&gt; print len(inp)
94626
&gt;&gt;&gt; print inp[:20]
From stephen.marquar
</span></pre><p><span class="c006">In this example, the entire contents (all 94,626 characters) 
of the file <span class="c001">mbox-short.txt</span> are read directly into the 
variable <span class="c001">inp</span>. We use string slicing to print out the first
20 characters of the string data stored in <span class="c001">inp</span>.</span></p><p><span class="c006">When the file is read in this manner, all the characters including 
all of the lines and newline characters are one big string 
in the variable <span class="c009">inp</span>. 
Remember that this form of the <span class="c001">open</span> function should only be used
if the file data will fit comfortably in the main memory 
of your computer.</span></p><p><span class="c006">If the file is too large to fit in main memory, you should write
your program to read the file in chunks using a <span class="c001">for</span> or <span class="c001">while</span>
loop.</span></p><span class="c005">
</span><!--TOC section id="sec93" <span class="c000"><span class="c005">Searching through a file</span></span>-->
<h2 class="section" id="sec93"><span class="c006">7.5&#XA0;&#XA0;Searching through a file</span></h2><!--SEC END --><p><span class="c006">When you are searching through data in a file, it
is a very common pattern to read through a file, ignoring most
of the lines and only processing lines which meet a particular condition.
We can combine the pattern for reading a file with string methods
to build simple search mechanisms.</span></p><p><a id="hevea_default419"></a><span class="c005">
</span><a id="hevea_default420"></a><span class="c006">
For example, if we wanted to read a file and only print out lines
which started with the prefix &#X201C;From:&#X201D;, we could use the 
string method <span class="c009">startswith</span> to select only those lines with
the desired prefix:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    if line.startswith('From:') :
        print line
</span></pre><p><span class="c006">When this program runs, we get the following output:</span></p><pre class="verbatim"><span class="c004">From: stephen.marquard@uct.ac.za

From: louis@media.berkeley.edu

From: zqian@umich.edu

From: rjlowe@iupui.edu
...
</span></pre><p><span class="c006">The output looks great since the only lines we are seeing are those 
which start with &#X201C;From:&#X201D;, but why are we seeing the extra blank
lines? This is due to that invisible <span class="c009">newline</span> character.
Each of the lines ends with a newline, so the <span class="c001">print</span> 
statement prints the string in the variable <span class="c009">line</span> which includes
a newline and then <span class="c001">print</span> adds <em>another</em> newline, resulting
in the double spacing effect we see.</span></p><p><span class="c006">We could use line slicing to print all but the last character, but 
a simpler approach is to use the <span class="c009">rstrip</span> method which strips
whitespace from the right side of a string as follows:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if line.startswith('From:') :
        print line
</span></pre><p><span class="c006">When this program runs, we get the following output:</span></p><pre class="verbatim"><span class="c004">From: stephen.marquard@uct.ac.za
From: louis@media.berkeley.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
From: cwen@iupui.edu
...
</span></pre><p><span class="c006">As your file processing programs get more complicated, you may want 
to structure your search loops using <span class="c001">continue</span>. The basic idea 
of the search loop is that you are looking for &#X201C;interesting&#X201D; lines
and effectively skipping &#X201C;uninteresting&#X201D; lines. And then when we
find an interesting line, we do something with that line.</span></p><p><span class="c006">We can structure the loop to follow the
pattern of skipping uninteresting lines as follows:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    # Skip 'uninteresting lines'
    if not line.startswith('From:') :
        continue
    # Process our 'interesting' line
    print line
</span></pre><p><span class="c006">The output of the program is the same. In English, the 
uninteresting lines are those which do not start 
with &#X201C;From:&#X201D;, which we skip using <span class="c001">continue</span>.
For the &#X201C;interesting&#X201D; lines (i.e., those that start with &#X201C;From:&#X201D;)
we perform the processing on those lines.</span></p><p><span class="c006">We can use the <span class="c001">find</span> string method to simulate a text editor
search that finds lines where the search string is anywhere in the line. 
Since <span class="c001">find</span> looks for an occurrence of a string within another
string and either returns the position of the string or -1 if the string
was not found, we can write the following loop to show lines which
contain the string &#X201C;@uct.ac.za&#X201D; (i.e., they come from the University 
of Cape Town in South Africa):</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if line.find('@uct.ac.za') == -1 : 
        continue
    print line
</span></pre><p><span class="c006">Which produces the following output:</span></p><pre class="verbatim"><span class="c004">From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
X-Authentication-Warning: set sender to stephen.marquard@uct.ac.za using -f
From: stephen.marquard@uct.ac.za
Author: stephen.marquard@uct.ac.za
From david.horwitz@uct.ac.za Fri Jan  4 07:02:32 2008
X-Authentication-Warning: set sender to david.horwitz@uct.ac.za using -f
From: david.horwitz@uct.ac.za
Author: david.horwitz@uct.ac.za
...
</span></pre><span class="c005">
</span><!--TOC section id="sec94" <span class="c000"><span class="c005">Letting the user choose the file name</span></span>-->
<h2 class="section" id="sec94"><span class="c006">7.6&#XA0;&#XA0;Letting the user choose the file name</span></h2><!--SEC END --><p><span class="c006">We really do not want to have to edit our Python code
every time we want to process a different file. It would 
be more usable to ask the user to enter the file name string 
each time the program runs so they can use our 
program on different files without changing the Python code.</span></p><p><span class="c006">This is quite simple to do by reading the file name from
the user using <code>raw_input</code> as follows:</span></p><pre class="verbatim"><span class="c004">fname = raw_input('Enter the file name: ')
fhand = open(fname)
count = 0
for line in fhand:
    if line.startswith('Subject:') :
        count = count + 1
print 'There were', count, 'subject lines in', fname
</span></pre><p><span class="c006">We read the file name from the user and place it in a variable
named <span class="c001">fname</span> and open that file. Now we can run the program 
repeatedly on different files.</span></p><pre class="verbatim"><span class="c004">python search6.py 
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python search6.py 
Enter the file name: mbox-short.txt
There were 27 subject lines in mbox-short.txt
</span></pre><p><span class="c006">Before peeking at the next section, take a look at the above program
and ask yourself, &#X201C;What could go possibly wrong here?&#X201D; or &#X201C;What might our
friendly user do that would cause our nice little program to 
ungracefully exit with a traceback, making us look not-so-cool 
in the eyes of our users?&#X201D;</span></p><span class="c005">
</span><!--TOC section id="sec95" <span class="c000"><span class="c005">Using </span></span><span class="c000"><span class="c005"><span class="c001">try, except,</span></span></span><span class="c000"><span class="c005"> and </span></span><span class="c000"><span class="c005"><span class="c001">open</span></span></span>-->
<h2 class="section" id="sec95"><span class="c006">7.7&#XA0;&#XA0;Using <span class="c001">try, except,</span> and <span class="c001">open</span></span></h2><!--SEC END --><p><span class="c006">I told you not to peek. This is your last chance.</span></p><p><span class="c006">What if our user types something that is not a file name?</span></p><pre class="verbatim"><span class="c004">python search6.py 
Enter the file name: missing.txt
Traceback (most recent call last):
  File "search6.py", line 2, in &lt;module&gt;
    fhand = open(fname)
IOError: [Errno 2] No such file or directory: 'missing.txt'

python search6.py 
Enter the file name: na na boo boo
Traceback (most recent call last):
  File "search6.py", line 2, in &lt;module&gt;
    fhand = open(fname)
IOError: [Errno 2] No such file or directory: 'na na boo boo'
</span></pre><p><span class="c006">Do not laugh, users will eventually do every possible thing they can do 
to break your programs&#X2014;either on purpose or with malicious intent.
As a matter of fact, an important part of any software development
team is a person or group called <span class="c009">Quality Assurance</span> (or QA for short)
whose very job it is to do the craziest things possible in an attempt
to break the software that the programmer has created.</span></p><p><a id="hevea_default421"></a><span class="c005">
</span><a id="hevea_default422"></a><span class="c006">
The QA team is responsible for finding the flaws in programs before 
we have delivered the program to the end users who may be purchasing the
software or paying our salary to write the software. So the QA team
is the programmer&#X2019;s best friend.</span></p><p><a id="hevea_default423"></a><span class="c005">
</span><a id="hevea_default424"></a><span class="c005">
</span><a id="hevea_default425"></a><span class="c005">
</span><a id="hevea_default426"></a><span class="c005">
</span><a id="hevea_default427"></a><span class="c005">
</span><a id="hevea_default428"></a><span class="c006">
So now that we see the flaw in the program, we can elegantly fix it using
the <span class="c001">try</span>/<span class="c001">except</span> structure. We need to assume that the <span class="c001">open</span>
call might fail and add recovery code when the <span class="c001">open</span> fails
as follows:</span></p><pre class="verbatim"><span class="c004">fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

count = 0
for line in fhand:
    if line.startswith('Subject:') : 
        count = count + 1
print 'There were', count, 'subject lines in', fname
</span></pre><p><span class="c006">The <span class="c001">exit</span> function terminates the program. It is a function
that we call that never returns. Now when our user (or 
QA team) types in silliness or bad file names, 
we &#X201C;catch&#X201D; them and recover gracefully:</span></p><pre class="verbatim"><span class="c004">python search7.py
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python search7.py
Enter the file name: na na boo boo
File cannot be opened: na na boo boo
</span></pre><p><a id="hevea_default429"></a><span class="c006">
Protecting the <span class="c001">open</span> call is a good example 
of the proper use of <span class="c001">try</span>
and <span class="c001">except</span> in a Python program. We use the term
&#X201C;Pythonic&#X201D; when we are doing something the &#X201C;Python
way&#X201D;. We might say that the above example is 
the Pythonic way to open a file.</span></p><p><span class="c006">Once you become more skilled in Python, you can engage
in repartee with other Python programmers to decide
which of two equivalent solutions to a problem is 
&#X201C;more Pythonic&#X201D;. The goal to be &#X201C;more Pythonic&#X201D; 
captures the notion that programming is part engineering
and part art. We are not always interested
in just making something work, we also want
our solution to be elegant and to be appreciated as 
elegant by our peers.</span></p><span class="c005">
</span><!--TOC section id="sec96" <span class="c000"><span class="c005">Writing files</span></span>-->
<h2 class="section" id="sec96"><span class="c006">7.8&#XA0;&#XA0;Writing files</span></h2><!--SEC END --><p><a id="hevea_default430"></a></p><p><span class="c006">To write a file, you have to open it with mode
<code>'w'</code> as a second parameter:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fout = open('output.txt', 'w')
&gt;&gt;&gt; print fout
&lt;open file 'output.txt', mode 'w' at 0xb7eb2410&gt;
</span></pre><p><span class="c006">If the file already exists, opening it in write mode clears out
the old data and starts fresh, so be careful!
If the file doesn&#X2019;t exist, a new one is created.</span></p><p><span class="c006">The <span class="c001">write</span> method of the file handle object 
puts data into the file.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; line1 = "This here's the wattle,\n"
&gt;&gt;&gt; fout.write(line1)
</span></pre><p><a id="hevea_default431"></a><span class="c006">
Again, the file object keeps track of where it is, so if
you call <span class="c001">write</span> again, it adds the new data to the end.</span></p><p><span class="c006">We must make sure to manage the ends of lines as we write
to the file by explicitly inserting the newline character
when we want to end a line. The <span class="c001">print</span> statement 
automatically appends a newline, but the <span class="c001">write</span> 
method does not add the newline automatically.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; line2 = 'the emblem of our land.\n'
&gt;&gt;&gt; fout.write(line2)
</span></pre><p><span class="c006">When you are done writing, you have to close the file
to make sure that the last bit of data is physically written
to the disk so it will not be lost if the power goes off.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; fout.close()
</span></pre><p><span class="c006">We could close the files which we open for read as well, 
but we can be a little sloppy if we are only opening a few
files since Python makes sure that all open files are 
closed when the program ends. When we are writing files, 
we want to explicitly close the files so as to leave nothing
to chance.</span></p><p><a id="hevea_default432"></a><span class="c005">
</span><a id="hevea_default433"></a></p><span class="c005">
</span><!--TOC section id="sec97" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec97"><span class="c006">7.9&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><a id="hevea_default434"></a><span class="c005">
</span><a id="hevea_default435"></a></p><p><span class="c006">When you are reading and writing files, you might run into problems
with whitespace. These errors can be hard to debug because spaces,
tabs, and newlines are normally invisible:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; s = '1 2\t 3\n 4'
&gt;&gt;&gt; print s
1 2  3
 4
</span></pre><p><a id="hevea_default436"></a><span class="c005">
</span><a id="hevea_default437"></a><span class="c005">
</span><a id="hevea_default438"></a></p><p><span class="c006">The built-in function <span class="c001">repr</span> can help. It takes any object as an
argument and returns a string representation of the object. For
strings, it represents whitespace
characters with backslash sequences:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print repr(s)
'1 2\t 3\n 4'
</span></pre><p><span class="c006">This can be helpful for debugging.</span></p><p><span class="c006">One other problem you might run into is that different systems
use different characters to indicate the end of a line. Some
systems use a newline, represented <code>\n</code>. Others use
a return character, represented <code>\r</code>. Some use both.
If you move files between different systems, these inconsistencies
might cause problems.</span></p><p><a id="hevea_default439"></a></p><p><span class="c006">For most systems, there are applications to convert from one
format to another. You can find them (and read more about this
issue) at <span class="c001">wikipedia.org/wiki/Newline</span>. Or, of course, you
could write one yourself.</span></p><span class="c005">
</span><!--TOC section id="sec98" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec98"><span class="c006">7.10&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">catch:</span></dt><dd class="dd-description"><span class="c006"> To prevent an exception from terminating
a program using the <span class="c001">try</span> and <span class="c001">except</span> statements.
</span><a id="hevea_default440"></a></dd><dt class="dt-description"><span class="c010">newline:</span></dt><dd class="dd-description"><span class="c006"> A special character used in files and strings to indicate
the end of a line.
</span><a id="hevea_default441"></a></dd><dt class="dt-description"><span class="c010">Pythonic:</span></dt><dd class="dd-description"><span class="c006"> A technique that works elegantly in Python.
&#X201C;Using try and except is the <em>Pythonic</em> way to recover from 
missing files&#X201D;.
</span><a id="hevea_default442"></a></dd><dt class="dt-description"><span class="c010">Quality Assurance:</span></dt><dd class="dd-description"><span class="c006"> A person or team focused on insuring the 
overall quality of a software product. QA is often involved 
in testing a product and identifying problems before the product 
is released.
</span><a id="hevea_default443"></a><span class="c005">
</span><a id="hevea_default444"></a></dd><dt class="dt-description"><span class="c010">text file:</span></dt><dd class="dd-description"><span class="c006"> A sequence of characters stored in permanent
storage like a hard drive.
</span><a id="hevea_default445"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec99" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec99"><span class="c006">7.11&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Write a program to read through a file and print the contents 
of the file (line by line) all in upper case. Executing the program 
will look as follows:</em></span><pre class="verbatim"><span class="c004"><em>python shout.py
Enter a file name: mbox-short.txt
FROM STEPHEN.MARQUARD@UCT.AC.ZA SAT JAN  5 09:14:16 2008
RETURN-PATH: &lt;POSTMASTER@COLLAB.SAKAIPROJECT.ORG&gt;
RECEIVED: FROM MURDER (MAIL.UMICH.EDU [141.211.14.90])
  BY FRANKENSTEIN.MAIL.UMICH.EDU (CYRUS V2.3.8) WITH LMTPA;
  SAT, 05 JAN 2008 09:14:16 -0500
</em></span></pre><p><span class="c006"><em>You can download the file from
<span class="c001">www.py4inf.com/code/mbox-short.txt</span>
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write a program 
to prompt for a file name, and then read through the file 
and look for lines of the form:</em></span><pre><span class="c004"><em>
X-DSPAM-Confidence: <span class="c009"> 0.8475</span>
</em></span></pre><p><span class="c006"><em>When you encounter a line that starts with 
&#X201C;X-DSPAM-Confidence:&#X201D; pull apart the line to extract the
floating-point number on the line. Count these lines and
then compute the total of the spam confidence values from
these lines. When you reach the end of the file, print out
the average spam confidence.</em></span></p><pre class="verbatim"><span class="c004"><em>Enter the file name: mbox.txt
Average spam confidence: 0.894128046745

Enter the file name: mbox-short.txt
Average spam confidence: 0.750718518519
</em></span></pre><p><span class="c006"><em>Test your file on the <span class="c001">mbox.txt</span> and <span class="c001">mbox-short.txt</span> files.
</em></span></p></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Sometimes when programmers get bored or want to have a bit of fun,
they add a harmless <span class="c009">Easter Egg</span> to their program 
(<span class="c001">en.wikipedia.org/wiki/Easter_egg_(media)</span>). Modify the program
that prompts the user for the file name so that it prints a funny
message when the user types in the exact file name &#X201C;na na boo boo&#X201D;. 
The program should behave normally for all other files which exist
and don&#X2019;t exist. Here is a sample execution of the program:</em></span><pre class="verbatim"><span class="c004"><em>python egg.py 
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python egg.py 
Enter the file name: missing.tyxt
File cannot be opened: missing.tyxt

python egg.py 
Enter the file name: na na boo boo
NA NA BOO BOO TO YOU - You have been punk'd!
</em></span></pre><p><span class="c006"><em>We are not encouraging you to put Easter Eggs in your 
programs&#X2014;this is just an exercise.</em></span></p></div><span class="c005">
</span><!--TOC chapter id="sec100" <span class="c000"><span class="c005">Lists</span></span>-->
<h1 class="chapter" id="sec100"><span class="c006">Chapter&#XA0;8&#XA0;&#XA0;Lists</span></h1><!--SEC END --><p><a id="hevea_default446"></a><span class="c005">
</span><a id="hevea_default447"></a></p><span class="c005">
</span><!--TOC section id="sec101" <span class="c000"><span class="c005">A list is a sequence</span></span>-->
<h2 class="section" id="sec101"><span class="c006">8.1&#XA0;&#XA0;A list is a sequence</span></h2><!--SEC END --><p><span class="c006">Like a string, a <span class="c009">list</span> is a sequence of values. In a string, the
values are characters; in a list, they can be any type. The values in
list are called <span class="c009">elements</span> or sometimes <span class="c009">items</span>.</span></p><p><a id="hevea_default448"></a><span class="c005">
</span><a id="hevea_default449"></a><span class="c005">
</span><a id="hevea_default450"></a></p><p><span class="c006">There are several ways to create a new list; the simplest is to
enclose the elements in square brackets (<code>[</code> and <code>]</code>):</span></p><pre class="verbatim"><span class="c004">[10, 20, 30, 40]
['crunchy frog', 'ram bladder', 'lark vomit']
</span></pre><p><span class="c006">The first example is a list of four integers. The second is a list of
three strings. The elements of a list don&#X2019;t have to be the same type.
The following list contains a string, a float, an integer, and
(lo!) another list:</span></p><pre class="verbatim"><span class="c004">['spam', 2.0, 5, [10, 20]]
</span></pre><p><span class="c006">A list within another list is <span class="c009">nested</span>.</span></p><p><a id="hevea_default451"></a><span class="c005">
</span><a id="hevea_default452"></a></p><p><span class="c006">A list that contains no elements is
called an empty list; you can create one with empty
brackets, <code>[]</code>.</span></p><p><a id="hevea_default453"></a><span class="c005">
</span><a id="hevea_default454"></a></p><p><span class="c006">As you might expect, you can assign list values to variables:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; numbers = [17, 123]
&gt;&gt;&gt; empty = []
&gt;&gt;&gt; print cheeses, numbers, empty
['Cheddar', 'Edam', 'Gouda'] [17, 123] []
</span></pre><p><a id="hevea_default455"></a></p><span class="c005">
</span><!--TOC section id="sec102" <span class="c000"><span class="c005">Lists are mutable</span></span>-->
<h2 class="section" id="sec102"><span class="c006">8.2&#XA0;&#XA0;Lists are mutable</span></h2><!--SEC END --><p><a id="hevea_default456"></a><span class="c005">
</span><a id="hevea_default457"></a><span class="c005">
</span><a id="hevea_default458"></a><span class="c005">
</span><a id="hevea_default459"></a><span class="c005">
</span><a id="hevea_default460"></a></p><p><span class="c006">The syntax for accessing the elements of a list is the same as for
accessing the characters of a string&#X2014;the bracket operator. The
expression inside the brackets specifies the index. Remember that the
indices start at 0:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print cheeses[0]
Cheddar
</span></pre><p><span class="c006">Unlike strings, lists are mutable because you can change the order 
of items in a list or reassign an item in a list. 
When the bracket operator appears on the left side of an assignment, 
it identifies the element of the list that will be assigned.</span></p><p><a id="hevea_default461"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; numbers = [17, 123]
&gt;&gt;&gt; numbers[1] = 5
&gt;&gt;&gt; print numbers
[17, 5]
</span></pre><p><span class="c006">The one-eth element of <span class="c001">numbers</span>, which
used to be 123, is now 5.</span></p><p><a id="hevea_default462"></a><span class="c005">
</span><a id="hevea_default463"></a></p><p><span class="c006">You can think of a list as a relationship between indices and
elements. This relationship is called a <span class="c009">mapping</span>; each index
&#X201C;maps to&#X201D; one of the elements. </span></p><p><a id="hevea_default464"></a><span class="c005">
</span><a id="hevea_default465"></a></p><p><span class="c006">List indices work the same way as string indices:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">Any integer expression can be used as an index.</span></li><li class="li-itemize"><span class="c006">If you try to read or write an element that does not exist, you
get an <span class="c001">IndexError</span>.</span><p><a id="hevea_default466"></a><span class="c005">
</span><a id="hevea_default467"></a></p></li><li class="li-itemize"><span class="c006">If an index has a negative value, it counts backward from the
end of the list.</span></li></ul><p><a id="hevea_default468"></a></p><p><a id="hevea_default469"></a><span class="c005">
</span><a id="hevea_default470"></a><span class="c005">
</span><a id="hevea_default471"></a><span class="c005">
</span><a id="hevea_default472"></a></p><p><span class="c006">The <span class="c001">in</span> operator also works on lists.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; 'Edam' in cheeses
True
&gt;&gt;&gt; 'Brie' in cheeses
False
</span></pre><span class="c005">
</span><!--TOC section id="sec103" <span class="c000"><span class="c005">Traversing a list</span></span>-->
<h2 class="section" id="sec103"><span class="c006">8.3&#XA0;&#XA0;Traversing a list</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default473"></a><span class="c005">
</span><a id="hevea_default474"></a><span class="c005">
</span><a id="hevea_default475"></a><span class="c005">
</span><a id="hevea_default476"></a><span class="c005">
</span><a id="hevea_default477"></a></p><p><span class="c006">The most common way to traverse the elements of a list is
with a <span class="c001">for</span> loop. The syntax is the same as for strings:</span></p><pre class="verbatim"><span class="c004">for cheese in cheeses:
    print cheese
</span></pre><p><span class="c006">This works well if you only need to read the elements of the
list. But if you want to write or update the elements, you
need the indices. A common way to do that is to combine
the functions <span class="c001">range</span> and <span class="c001">len</span>:</span></p><p><a id="hevea_default478"></a><span class="c005">
</span><a id="hevea_default479"></a></p><pre class="verbatim"><span class="c004">for i in range(len(numbers)):
    numbers[i] = numbers[i] * 2
</span></pre><p><span class="c006">This loop traverses the list and updates each element. <span class="c001">len</span>
returns the number of elements in the list. <span class="c001">range</span> returns
a list of indices from 0 to <span class="c007">n</span>&#X2212;1, where <span class="c007">n</span> is the length of
the list. Each time through the loop, <span class="c001">i</span> gets the index
of the next element. The assignment statement in the body uses
<span class="c001">i</span> to read the old value of the element and to assign the
new value.</span></p><p><a id="hevea_default480"></a><span class="c005">
</span><a id="hevea_default481"></a></p><p><span class="c006">A <span class="c001">for</span> loop over an empty list never executes the body:</span></p><pre class="verbatim"><span class="c004">for x in empty:
    print 'This never happens.'
</span></pre><p><span class="c006">Although a list can contain another list, the nested
list still counts as a single element. The length of this list is
four:</span></p><p><a id="hevea_default482"></a><span class="c005">
</span><a id="hevea_default483"></a></p><pre class="verbatim"><span class="c004">['spam', 1, ['Brie', 'Roquefort', 'Pol le Veq'], [1, 2, 3]]
</span></pre><span class="c005">
</span><!--TOC section id="sec104" <span class="c000"><span class="c005">List operations</span></span>-->
<h2 class="section" id="sec104"><span class="c006">8.4&#XA0;&#XA0;List operations</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default484"></a></p><p><span class="c006">The <span class="c001">+</span> operator concatenates lists:</span></p><p><a id="hevea_default485"></a><span class="c005">
</span><a id="hevea_default486"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = [4, 5, 6]
&gt;&gt;&gt; c = a + b
&gt;&gt;&gt; print c
[1, 2, 3, 4, 5, 6]
</span></pre><p><span class="c006">Similarly, the <span class="c001">*</span> operator repeats a list a given number of times:</span></p><p><a id="hevea_default487"></a><span class="c005">
</span><a id="hevea_default488"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; [0] * 4
[0, 0, 0, 0]
&gt;&gt;&gt; [1, 2, 3] * 3
[1, 2, 3, 1, 2, 3, 1, 2, 3]
</span></pre><p><span class="c006">The first example repeats <span class="c001">[0]</span> four times. The second example
repeats the list <span class="c001">[1, 2, 3]</span> three times.</span></p><span class="c005">
</span><!--TOC section id="sec105" <span class="c000"><span class="c005">List slices</span></span>-->
<h2 class="section" id="sec105"><span class="c006">8.5&#XA0;&#XA0;List slices</span></h2><!--SEC END --><p><a id="hevea_default489"></a><span class="c005">
</span><a id="hevea_default490"></a><span class="c005">
</span><a id="hevea_default491"></a><span class="c005">
</span><a id="hevea_default492"></a><span class="c005">
</span><a id="hevea_default493"></a></p><p><span class="c006">The slice operator also works on lists:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; t[1:3]
['b', 'c']
&gt;&gt;&gt; t[:4]
['a', 'b', 'c', 'd']
&gt;&gt;&gt; t[3:]
['d', 'e', 'f']
</span></pre><p><span class="c006">If you omit the first index, the slice starts at the beginning.
If you omit the second, the slice goes to the end. So if you
omit both, the slice is a copy of the whole list.</span></p><p><a id="hevea_default494"></a><span class="c005">
</span><a id="hevea_default495"></a><span class="c005">
</span><a id="hevea_default496"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t[:]
['a', 'b', 'c', 'd', 'e', 'f']
</span></pre><p><span class="c006">Since lists are mutable, it is often useful to make a copy
before performing operations that fold, spindle, or mutilate
lists.</span></p><p><a id="hevea_default497"></a></p><p><span class="c006">A slice operator on the left side of an assignment
can update multiple elements:</span></p><p><a id="hevea_default498"></a><span class="c005">
</span><a id="hevea_default499"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; t[1:3] = ['x', 'y']
&gt;&gt;&gt; print t
['a', 'x', 'y', 'd', 'e', 'f']
</span></pre><span class="c005">
</span><!--TOC section id="sec106" <span class="c000"><span class="c005">List methods</span></span>-->
<h2 class="section" id="sec106"><span class="c006">8.6&#XA0;&#XA0;List methods</span></h2><!--SEC END --><p><a id="hevea_default500"></a><span class="c005">
</span><a id="hevea_default501"></a></p><p><span class="c006">Python provides methods that operate on lists. For example,
<span class="c001">append</span> adds a new element to the end of a list:</span></p><p><a id="hevea_default502"></a><span class="c005">
</span><a id="hevea_default503"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; t.append('d')
&gt;&gt;&gt; print t
['a', 'b', 'c', 'd']
</span></pre><p><span class="c006"><span class="c001">extend</span> takes a list as an argument and appends all of
the elements:</span></p><p><a id="hevea_default504"></a><span class="c005">
</span><a id="hevea_default505"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t1 = ['a', 'b', 'c']
&gt;&gt;&gt; t2 = ['d', 'e']
&gt;&gt;&gt; t1.extend(t2)
&gt;&gt;&gt; print t1
['a', 'b', 'c', 'd', 'e']
</span></pre><p><span class="c006">This example leaves <span class="c001">t2</span> unmodified.</span></p><p><span class="c006"><span class="c001">sort</span> arranges the elements of the list from low to high:</span></p><p><a id="hevea_default506"></a><span class="c005">
</span><a id="hevea_default507"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['d', 'c', 'e', 'b', 'a']
&gt;&gt;&gt; t.sort()
&gt;&gt;&gt; print t
['a', 'b', 'c', 'd', 'e']
</span></pre><p><span class="c006">Most list methods are void; they modify the list and return <span class="c001">None</span>.
If you accidentally write <span class="c001">t = t.sort()</span>, you will be disappointed
with the result.</span></p><p><a id="hevea_default508"></a><span class="c005">
</span><a id="hevea_default509"></a><span class="c005">
</span><a id="hevea_default510"></a><span class="c005">
</span><a id="hevea_default511"></a></p><span class="c005">
</span><!--TOC section id="sec107" <span class="c000"><span class="c005">Deleting elements</span></span>-->
<h2 class="section" id="sec107"><span class="c006">8.7&#XA0;&#XA0;Deleting elements</span></h2><!--SEC END --><p><a id="hevea_default512"></a><span class="c005">
</span><a id="hevea_default513"></a></p><p><span class="c006">There are several ways to delete elements from a list. If you
know the index of the element you want, you can use
<span class="c001">pop</span>:</span></p><p><a id="hevea_default514"></a><span class="c005">
</span><a id="hevea_default515"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; x = t.pop(1)
&gt;&gt;&gt; print t
['a', 'c']
&gt;&gt;&gt; print x
b
</span></pre><p><span class="c006"><span class="c001">pop</span> modifies the list and returns the element that was removed.
If you don&#X2019;t provide an index, it deletes and returns the
last element.</span></p><p><span class="c006">If you don&#X2019;t need the removed value, you can use the <span class="c001">del</span>
operator:</span></p><p><a id="hevea_default516"></a><span class="c005">
</span><a id="hevea_default517"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; del t[1]
&gt;&gt;&gt; print t
['a', 'c']
</span></pre><p><span class="c006">If you know the element you want to remove (but not the index), you
can use <span class="c001">remove</span>:</span></p><p><a id="hevea_default518"></a><span class="c005">
</span><a id="hevea_default519"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; t.remove('b')
&gt;&gt;&gt; print t
['a', 'c']
</span></pre><p><span class="c006">The return value from <span class="c001">remove</span> is <span class="c001">None</span>.</span></p><p><a id="hevea_default520"></a><span class="c005">
</span><a id="hevea_default521"></a></p><p><span class="c006">To remove more than one element, you can use <span class="c001">del</span> with
a slice index:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; del t[1:5]
&gt;&gt;&gt; print t
['a', 'f']
</span></pre><p><span class="c006">As usual, the slice selects all the elements up to, but not
including, the second index.</span></p><span class="c005">
</span><!--TOC section id="sec108" <span class="c000"><span class="c005">Lists and functions</span></span>-->
<h2 class="section" id="sec108"><span class="c006">8.8&#XA0;&#XA0;Lists and functions</span></h2><!--SEC END --><p><span class="c006">There are a number of built-in functions that can be used on lists
that allow you to quickly look through a list without
writing your own loops:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; nums = [3, 41, 12, 9, 74, 15]
&gt;&gt;&gt; print len(nums)
6
&gt;&gt;&gt; print max(nums)
74
&gt;&gt;&gt; print min(nums)
3
&gt;&gt;&gt; print sum(nums)
154
&gt;&gt;&gt; print sum(nums)/len(nums)
25
</span></pre><p><span class="c006">The <span class="c001">sum()</span> function only works when the list elements are numbers.
The other functions (<span class="c001">max()</span>, <span class="c001">len()</span>, etc.) work with lists of
strings and other types that can be comparable.</span></p><p><span class="c006">We could rewrite an earlier program that computed the average of 
a list of numbers entered by the user using a list.</span></p><p><span class="c006">First, the program to compute an average without a list:</span></p><pre class="verbatim"><span class="c004">total = 0
count = 0
while ( True ) :
    inp = raw_input('Enter a number: ')
    if inp == 'done' : break
    value = float(inp)
    total = total + value
    count = count + 1

average = total / count
print 'Average:', average
</span></pre><p><span class="c006">In this program, we have <span class="c001">count</span> and <span class="c001">total</span> variables to 
keep the number and running total of the user&#X2019;s numbers as 
we repeatedly prompt the user for a number.</span></p><p><span class="c006">We could simply remember each number as the user entered it 
and use built-in functions to compute the sum and count at
the end.</span></p><pre class="verbatim"><span class="c004">numlist = list()
while ( True ) :
    inp = raw_input('Enter a number: ')
    if inp == 'done' : break
    value = float(inp)
    numlist.append(value)

average = sum(numlist) / len(numlist)
print 'Average:', average
</span></pre><p><span class="c006">We make an empty list before the loop starts, and then each time we have 
a number, we append it to the list. At the end of
the program, we simply compute the sum of the numbers in the 
list and divide it by the count of the numbers in the
list to come up with the average.</span></p><span class="c005">
</span><!--TOC section id="sec109" <span class="c000"><span class="c005">Lists and strings</span></span>-->
<h2 class="section" id="sec109"><span class="c006">8.9&#XA0;&#XA0;Lists and strings</span></h2><!--SEC END --><p><a id="hevea_default522"></a><span class="c005">
</span><a id="hevea_default523"></a><span class="c005">
</span><a id="hevea_default524"></a></p><p><span class="c006">A string is a sequence of characters and a list is a sequence
of values, but a list of characters is not the same as a
string. To convert from a string to a list of characters,
you can use <span class="c001">list</span>:</span></p><p><a id="hevea_default525"></a><span class="c005">
</span><a id="hevea_default526"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; s = 'spam'
&gt;&gt;&gt; t = list(s)
&gt;&gt;&gt; print t
['s', 'p', 'a', 'm']
</span></pre><p><span class="c006">Because <span class="c001">list</span> is the name of a built-in function, you should
avoid using it as a variable name. I also avoid the letter <span class="c001">l</span> because
it looks too much like the number <span class="c001">1</span>. So that&#X2019;s why I use <span class="c001">t</span>.</span></p><p><span class="c006">The <span class="c001">list</span> function breaks a string into individual letters. If
you want to break a string into words, you can use the <span class="c001">split</span>
method:</span></p><p><a id="hevea_default527"></a><span class="c005">
</span><a id="hevea_default528"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; s = 'pining for the fjords'
&gt;&gt;&gt; t = s.split()
&gt;&gt;&gt; print t
['pining', 'for', 'the', 'fjords']
&gt;&gt;&gt; print t[2]
the
</span></pre><p><span class="c006">Once you have used <span class="c001">split</span> to break the string into 
a list of words, you can use the index operator (square
bracket) to look at a particular word in the list.</span></p><p><span class="c006">You can call <span class="c001">split</span> with 
an optional argument called a <span class="c009">delimiter</span> that 
specifies which characters to use as word boundaries.
The following example uses a hyphen as a delimiter:</span></p><p><a id="hevea_default529"></a><span class="c005">
</span><a id="hevea_default530"></a><span class="c005">
</span><a id="hevea_default531"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; s = 'spam-spam-spam'
&gt;&gt;&gt; delimiter = '-'
&gt;&gt;&gt; s.split(delimiter)
['spam', 'spam', 'spam']
</span></pre><p><span class="c006"><span class="c001">join</span> is the inverse of <span class="c001">split</span>. It
takes a list of strings and
concatenates the elements. <span class="c001">join</span> is a string method,
so you have to invoke it on the delimiter and pass the
list as a parameter:</span></p><p><a id="hevea_default532"></a><span class="c005">
</span><a id="hevea_default533"></a><span class="c005">
</span><a id="hevea_default534"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ['pining', 'for', 'the', 'fjords']
&gt;&gt;&gt; delimiter = ' '
&gt;&gt;&gt; delimiter.join(t)
'pining for the fjords'
</span></pre><p><span class="c006">In this case the delimiter is a space character, so
<span class="c001">join</span> puts a space between words. To concatenate
strings without spaces, you can use the empty string,
<code>"</code>, as a delimiter. </span></p><p><a id="hevea_default535"></a><span class="c005">
</span><a id="hevea_default536"></a></p><span class="c005">
</span><!--TOC section id="sec110" <span class="c000"><span class="c005">Parsing lines</span></span>-->
<h2 class="section" id="sec110"><span class="c006">8.10&#XA0;&#XA0;Parsing lines</span></h2><!--SEC END --><p><span class="c006">Usually when we are reading a file 
we want to do something to the lines other than just 
printing the whole line. Often we want to find the &#X201C;interesting
lines&#X201D; and then <span class="c009">parse</span> the line to find some interesting
<em>part</em> of the line. What if we wanted to print out the day of the 
week from those lines that start with &#X201C;From &#X201D;?</span></p><pre><span class="c004">
From stephen.marquard@uct.ac.za <span class="c009"> Sat</span> Jan  5 09:14:16 2008
</span></pre><p><span class="c006">The <span class="c001">split</span> method is very effective when faced with this 
kind of problem.
We can write a small program that looks for lines where the 
line starts with &#X201C;From &#X201D;, <span class="c001">split</span> those lines, 
and then print out the third word in the line:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if not line.startswith('From ') : continue
    words = line.split()
    print words[2]
</span></pre><p><span class="c006">Here we also use the contracted form of the <span class="c001">if</span>
statement where we put the <span class="c001">continue </span> on the
same line as the <span class="c001">if</span>. This contracted form
of the <span class="c001">if</span> functions the same as if the
<span class="c001">continue</span> were on the next line and indented.</span></p><p><span class="c006">The program produces the following output:</span></p><pre class="verbatim"><span class="c004">Sat
Fri
Fri
Fri
    ...
</span></pre><p><span class="c006">Later, we will learn increasingly sophisticated techniques for
picking the lines to work on and how we pull those lines apart
to find the exact bit of information we are looking for.</span></p><span class="c005">
</span><!--TOC section id="sec111" <span class="c000"><span class="c005">Objects and values</span></span>-->
<h2 class="section" id="sec111"><span class="c006">8.11&#XA0;&#XA0;Objects and values</span></h2><!--SEC END --><p><a id="hevea_default537"></a><span class="c005">
</span><a id="hevea_default538"></a></p><p><span class="c006">If we execute these assignment statements:</span></p><pre class="verbatim"><span class="c004">a = 'banana'
b = 'banana'
</span></pre><p><span class="c006">we know that <span class="c001">a</span> and <span class="c001">b</span> both refer to a
string, but we don&#X2019;t know whether they refer to the
<em>same</em> string. There are two possible states:</span></p><p><a id="hevea_default539"></a></p><div class="center"><span class="c006"><img src="book012.png" /></span></div><p><span class="c006">In one case, <span class="c001">a</span> and <span class="c001">b</span> refer to two different objects that
have the same value. In the second case, they refer to the same
object.</span></p><p><a id="hevea_default540"></a><span class="c005">
</span><a id="hevea_default541"></a></p><p><span class="c006">To check whether two variables refer to the same object, you can
use the <span class="c001">is</span> operator.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a = 'banana'
&gt;&gt;&gt; b = 'banana'
&gt;&gt;&gt; a is b
True
</span></pre><p><span class="c006">In this example, Python only created one string object,
and both <span class="c001">a</span> and <span class="c001">b</span> refer to it.</span></p><p><span class="c006">But when you create two lists, you get two objects:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = [1, 2, 3]
&gt;&gt;&gt; a is b
False
</span></pre><p><span class="c006">In this case we would say that the two lists are <span class="c009">equivalent</span>,
because they have the same elements, but not <span class="c009">identical</span>, because
they are not the same object. If two objects are identical, they are
also equivalent, but if they are equivalent, they are not necessarily
identical.</span></p><p><a id="hevea_default542"></a><span class="c005">
</span><a id="hevea_default543"></a></p><p><span class="c006">Until now, we have been using &#X201C;object&#X201D; and &#X201C;value&#X201D;
interchangeably, but it is more precise to say that an object has a
value. If you execute <span class="c001">a = [1,2,3]</span>, <span class="c001">a</span> refers to a list
object whose value is a particular sequence of elements. If another
list has the same elements, we would say it has the same value.</span></p><p><a id="hevea_default544"></a><span class="c005">
</span><a id="hevea_default545"></a></p><span class="c005">
</span><!--TOC section id="sec112" <span class="c000"><span class="c005">Aliasing</span></span>-->
<h2 class="section" id="sec112"><span class="c006">8.12&#XA0;&#XA0;Aliasing</span></h2><!--SEC END --><p><a id="hevea_default546"></a><span class="c005">
</span><a id="hevea_default547"></a></p><p><span class="c006">If <span class="c001">a</span> refers to an object and you assign <span class="c001">b = a</span>,
then both variables refer to the same object:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; b is a
True
</span></pre><p><span class="c006">The association of a variable with an object is called a <span class="c009">reference</span>. In this example, there are two references to the same
object.</span></p><p><a id="hevea_default548"></a></p><p><span class="c006">An object with more than one reference has more
than one name, so we say that the object is <span class="c009">aliased</span>.</span></p><p><a id="hevea_default549"></a></p><p><span class="c006">If the aliased object is mutable, 
changes made with one alias affect
the other:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; b[0] = 17
&gt;&gt;&gt; print a
[17, 2, 3]
</span></pre><p><span class="c006">Although this behavior can be useful, it is error-prone. In general,
it is safer to avoid aliasing when you are working with mutable
objects.</span></p><p><a id="hevea_default550"></a></p><p><span class="c006">For immutable objects like strings, aliasing is not as much of a
problem. In this example:</span></p><pre class="verbatim"><span class="c004">a = 'banana'
b = 'banana'
</span></pre><p><span class="c006">it almost never makes a difference whether <span class="c001">a</span> and <span class="c001">b</span> refer
to the same string or not.</span></p><span class="c005">
</span><!--TOC section id="sec113" <span class="c000"><span class="c005">List arguments</span></span>-->
<h2 class="section" id="sec113"><span class="c006">8.13&#XA0;&#XA0;List arguments</span></h2><!--SEC END --><p><a id="hevea_default551"></a><span class="c005">
</span><a id="hevea_default552"></a><span class="c005">
</span><a id="hevea_default553"></a><span class="c005">
</span><a id="hevea_default554"></a><span class="c005">
</span><a id="hevea_default555"></a></p><p><span class="c006">When you pass a list to a function, the function gets a reference
to the list.
If the function modifies a list parameter, the caller sees the change.
For example, <code>delete_head</code> removes the first element from a list:</span></p><pre class="verbatim"><span class="c004">def delete_head(t):
    del t[0]
</span></pre><p><span class="c006">Here&#X2019;s how it is used:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; letters = ['a', 'b', 'c']
&gt;&gt;&gt; delete_head(letters)
&gt;&gt;&gt; print letters
['b', 'c']
</span></pre><p><span class="c006">The parameter <span class="c001">t</span> and the variable <span class="c001">letters</span> are
aliases for the same object. </span></p><p><span class="c006">It is important to distinguish between operations that
modify lists and operations that create new lists. For
example, the <span class="c001">append</span> method modifies a list, but the
<span class="c001">+</span> operator creates a new list:</span></p><p><a id="hevea_default556"></a><span class="c005">
</span><a id="hevea_default557"></a><span class="c005">
</span><a id="hevea_default558"></a><span class="c005">
</span><a id="hevea_default559"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t1 = [1, 2]
&gt;&gt;&gt; t2 = t1.append(3)
&gt;&gt;&gt; print t1
[1, 2, 3]
&gt;&gt;&gt; print t2
None

&gt;&gt;&gt; t3 = t1 + [3]
&gt;&gt;&gt; print t3
[1, 2, 3]
&gt;&gt;&gt; t2 is t3
False
</span></pre><p><span class="c006">This difference is important when you write functions that
are supposed to modify lists. For example, this function
<em>does not</em> delete the head of a list:</span></p><pre class="verbatim"><span class="c004">def bad_delete_head(t):
    t = t[1:]              # WRONG!
</span></pre><p><span class="c006">The slice operator creates a new list and the assignment
makes <span class="c001">t</span> refer to it, but none of that has any effect
on the list that was passed as an argument.</span></p><p><a id="hevea_default560"></a><span class="c005">
</span><a id="hevea_default561"></a></p><p><span class="c006">An alternative is to write a function that creates and
returns a new list. For
example, <span class="c001">tail</span> returns all but the first
element of a list:</span></p><pre class="verbatim"><span class="c004">def tail(t):
    return t[1:]
</span></pre><p><span class="c006">This function leaves the original list unmodified.
Here&#X2019;s how it is used:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; letters = ['a', 'b', 'c']
&gt;&gt;&gt; rest = tail(letters)
&gt;&gt;&gt; print rest
['b', 'c']
</span></pre><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;</span><p><span class="c006"><em>Write a function called <span class="c001">chop</span> that takes a list and modifies
it, removing the first and last elements, and returns <span class="c001">None</span>.</em></span></p><p><span class="c006"><em>Then write a function called <span class="c001">middle</span> that takes a list and
returns a new list that contains all but the first and last
elements.</em></span></p></div><span class="c005">
</span><!--TOC section id="sec114" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec114"><span class="c006">8.14&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default562"></a></p><p><span class="c006">Careless use of lists (and other mutable objects)
can lead to long hours of debugging. Here are some common
pitfalls and ways to avoid them:</span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006">Don&#X2019;t forget that most list methods modify the argument and
return <span class="c001">None</span>. This is the opposite of the string methods,
which return a new string and leave the original alone.</span><p><span class="c006">If you are used to writing string code like this:</span></p><pre class="verbatim"><span class="c004">word = word.strip()
</span></pre><p><span class="c006">It is tempting to write list code like this:</span></p><pre class="verbatim"><span class="c004">t = t.sort()           # WRONG!
</span></pre><p><a id="hevea_default563"></a><span class="c005">
</span><a id="hevea_default564"></a></p><p><span class="c006">Because <span class="c001">sort</span> returns <span class="c001">None</span>, the
next operation you perform with <span class="c001">t</span> is likely to fail.</span></p><p><span class="c006">Before using list methods and operators, you should read the
documentation carefully and then test them in interactive mode. The
methods and operators that lists share with other sequences (like
strings) are documented at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#string-methods</span>.
The methods and operators that only apply to mutable sequences
are documented at
<span class="c001">https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types</span>.</span></p></li><li class="li-enumerate"><span class="c006">Pick an idiom and stick with it.
</span><a id="hevea_default565"></a><p><span class="c006">Part of the problem with lists is that there are too many
ways to do things. For example, to remove an element from
a list, you can use <span class="c001">pop</span>, <span class="c001">remove</span>, <span class="c001">del</span>,
or even a slice assignment.</span></p><p><span class="c006">To add an element, you can use the <span class="c001">append</span> method or
the <span class="c001">+</span> operator. But don&#X2019;t forget that these are right: </span></p><pre class="verbatim"><span class="c004">t.append(x)
t = t + [x]
</span></pre><p><span class="c006">And these are wrong:</span></p><pre class="verbatim"><span class="c004">t.append([x])          # WRONG!
t = t.append(x)        # WRONG!
t + [x]                # WRONG!
t = t + x              # WRONG!
</span></pre><p><span class="c006">Try out each of these examples in interactive mode to make sure
you understand what they do. Notice that only the last
one causes a runtime error; the other three are legal, but they
do the wrong thing.</span></p></li><li class="li-enumerate"><span class="c006">Make copies to avoid aliasing.</span><p><a id="hevea_default566"></a><span class="c005">
</span><a id="hevea_default567"></a></p><p><span class="c006">If you want to use a method like <span class="c001">sort</span> that modifies
the argument, but you need to keep the original list as
well, you can make a copy.</span></p><pre class="verbatim"><span class="c004">orig = t[:]
t.sort()
</span></pre><p><span class="c006">In this example you could also use the built-in function <span class="c001">sorted</span>,
which returns a new, sorted list and leaves the original alone.
But in that case you should avoid using <span class="c001">sorted</span> as a variable
name!</span></p></li><li class="li-enumerate"><span class="c006">Lists, <span class="c001">split</span>, and files</span><p><span class="c006">When we read and parse files, there are many opportunities
to encounter input that can crash our program so it is a good 
idea to revisit the <span class="c009">guardian</span> pattern when it comes
writing programs that read through a file 
and look for a &#X201C;needle in the haystack&#X201D;.</span></p><p><span class="c006">Let&#X2019;s revisit our program that is looking for the day of the
week on the from lines of our file:</span></p><pre><span class="c004">
From stephen.marquard@uct.ac.za <span class="c009"> Sat</span> Jan  5 09:14:16 2008
</span></pre><p><span class="c006">Since we are breaking this line into words, we could dispense
with the use of <span class="c001">startswith</span> and simply look at the 
first word of the line to determine if we are interested
in the line at all. We can use <span class="c001">continue</span> to skip lines
that don&#X2019;t have &#X201C;From&#X201D; as the first word as follows:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
for line in fhand:
    words = line.split()
    if words[0] != 'From' : continue
    print words[2]
</span></pre><p><span class="c006">This looks much simpler and we don&#X2019;t even need to do the 
<span class="c001">rstrip</span> to remove the newline at the end of the file.
But is it better?</span></p><pre class="verbatim"><span class="c004">python search8.py 
Sat
Traceback (most recent call last):
  File "search8.py", line 5, in &lt;module&gt;
    if words[0] != 'From' : continue
IndexError: list index out of range
</span></pre><p><span class="c006">It kind of works and we see the day from the first line
(Sat), but then the program fails with a traceback error.
What went wrong? What messed-up data caused our elegant, 
clever, and very Pythonic program to fail?</span></p><p><span class="c006">You could stare at it for a long time and puzzle through
it or ask someone for help, but the quicker and smarter
approach is to add a <span class="c001">print</span> statement. The best place
to add the print statement is right before the line where
the program failed and print out the data that seems to be causing
the failure.</span></p><p><span class="c006">Now this approach may generate a lot of lines of output, but
at least you will immediately have some clue as to the 
problem at hand. So we add a print of the variable
<span class="c001">words</span> right before line five. We even 
add a prefix &#X201C;Debug:&#X201D; to the line so we can keep
our regular output separate from our debug output.</span></p><pre class="verbatim"><span class="c004">for line in fhand:
    words = line.split()
    print 'Debug:', words
    if words[0] != 'From' : continue
    print words[2]
</span></pre><p><span class="c006">When we run the program, a lot of output scrolls off the screen
but at the end, we see our debug output and the traceback so 
we know what happened just before the traceback.</span></p><pre class="verbatim"><span class="c004">Debug: ['X-DSPAM-Confidence:', '0.8475']
Debug: ['X-DSPAM-Probability:', '0.0000']
Debug: []
Traceback (most recent call last):
  File "search9.py", line 6, in &lt;module&gt;
    if words[0] != 'From' : continue
IndexError: list index out of range
</span></pre><p><span class="c006">Each debug line is printing the list of words which we get
when we <span class="c001">split</span> the line into words. When the program fails,
the list of words is empty <code>[]</code>. If we open the file in a
text editor and look at the file, at that point it looks as follows:</span></p><pre class="verbatim"><span class="c004">X-DSPAM-Result: Innocent
X-DSPAM-Processed: Sat Jan  5 09:14:16 2008
X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000

Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
</span></pre><p><span class="c006">The error occurs when our program encounters a blank line! Of course there
are &#X201C;zero words&#X201D; on a blank line. Why didn&#X2019;t we think of that 
when we were writing the code? When the code looks for the first
word (<code>word[0]</code>) to check to see if it matches &#X201C;From&#X201D;, 
we get an &#X201C;index out of range&#X201D; error.</span></p><p><span class="c006">This of course is the perfect place to add some <span class="c009">guardian</span> code 
to avoid checking the first word if the first word is not there.
There are many ways to protect this code; we will choose to 
check the number of words we have before we look at the first word:</span></p><pre class="verbatim"><span class="c004">fhand = open('mbox-short.txt')
count = 0
for line in fhand:
    words = line.split()
    # print 'Debug:', words
    if len(words) == 0 : continue
    if words[0] != 'From' : continue
    print words[2]
</span></pre><p><span class="c006">First we commented out the debug print statement instead of removing it, 
in case our modification fails and we need to debug again. Then we added
a guardian statement that checks to see if we have zero words, and if so, 
we use <span class="c001">continue</span> to skip to the next line in the file.</span></p><p><span class="c006">We can think of the two <span class="c001">continue</span> statements as helping us refine
the set of lines which are &#X201C;interesting&#X201D; to us and which we want 
to process some more. A line which has no words is &#X201C;uninteresting&#X201D; to 
us so we skip to the next line. A line which does not have &#X201C;From&#X201D;
as its first word is uninteresting to us so we skip it.</span></p><p><span class="c006">The program as modified runs successfully, so perhaps it is correct. Our
guardian statement does make sure that the <span class="c001">words[0]</span> will never fail, 
but perhaps it is not enough. When we are programming, we must always be 
thinking, &#X201C;What might go wrong?&#X201D;</span></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Figure out which line of the above program is still not properly guarded.
See if you can construct a text file which causes the program to fail
and then modify the program so that the line is properly guarded and 
test it to make sure it handles your new text file.
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Rewrite the guardian code in the above example without two
<span class="c001">if</span> statements. Instead, use a compound logical expression using the
<span class="c001">and</span> logical operator with a single <span class="c001">if</span> statement.
</em></span></div></li></ol><span class="c005">
</span><!--TOC section id="sec115" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec115"><span class="c006">8.15&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">aliasing:</span></dt><dd class="dd-description"><span class="c006"> A circumstance where two or more variables refer to the same
object.
</span><a id="hevea_default568"></a></dd><dt class="dt-description"><span class="c010">delimiter:</span></dt><dd class="dd-description"><span class="c006"> A character or string used to indicate where a
string should be split.
</span><a id="hevea_default569"></a></dd><dt class="dt-description"><span class="c010">element:</span></dt><dd class="dd-description"><span class="c006"> One of the values in a list (or other sequence);
also called items.
</span><a id="hevea_default570"></a></dd><dt class="dt-description"><span class="c010">equivalent:</span></dt><dd class="dd-description"><span class="c006"> Having the same value.
</span><a id="hevea_default571"></a></dd><dt class="dt-description"><span class="c010">index:</span></dt><dd class="dd-description"><span class="c006"> An integer value that indicates an element in a list.
</span><a id="hevea_default572"></a></dd><dt class="dt-description"><span class="c010">identical:</span></dt><dd class="dd-description"><span class="c006"> Being the same object (which implies equivalence).
</span><a id="hevea_default573"></a></dd><dt class="dt-description"><span class="c010">list:</span></dt><dd class="dd-description"><span class="c006"> A sequence of values.
</span><a id="hevea_default574"></a></dd><dt class="dt-description"><span class="c010">list traversal:</span></dt><dd class="dd-description"><span class="c006"> The sequential accessing of each element in a list.
</span><a id="hevea_default575"></a></dd><dt class="dt-description"><span class="c010">nested list:</span></dt><dd class="dd-description"><span class="c006"> A list that is an element of another list.
</span><a id="hevea_default576"></a></dd><dt class="dt-description"><span class="c010">object:</span></dt><dd class="dd-description"><span class="c006"> Something a variable can refer to. An object
has a type and a value.
</span><a id="hevea_default577"></a></dd><dt class="dt-description"><span class="c010">reference:</span></dt><dd class="dd-description"><span class="c006"> The association between a variable and its value.
</span><a id="hevea_default578"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec116" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec116"><span class="c006">8.16&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
Download a copy of the file from 
<span class="c001">www.py4inf.com/code/romeo.txt</span></em>
</span><a id="hevea_default579"></a><p><span class="c006"><em>Write a program to open the file <span class="c001">romeo.txt</span> and read it
line by line. For each line, split the line into a list of 
words using the <span class="c001">split</span> function.</em></span></p><p><span class="c006"><em>For each word, check to see if the word is already in a list. 
If the word is not in the list, add it to the list. </em></span></p><p><span class="c006"><em>When the program completes, sort and print the resulting words
in alphabetical order.</em></span></p><pre class="verbatim"><span class="c006"><em>Enter file: romeo.txt
['Arise', 'But', 'It', 'Juliet', 'Who', 'already', 
'and', 'breaks', 'east', 'envious', 'fair', 'grief', 
'is', 'kill', 'light', 'moon', 'pale', 'sick', 'soft', 
'sun', 'the', 'through', 'what', 'window', 
'with', 'yonder']
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
Write a program to read through the mail box data and when you find 
line that starts with &#X201C;From&#X201D;, you will split the line into 
words using the <span class="c001">split</span> function. We are interested in 
who sent the message, which is the second word on the From line.</em></span><p><span class="c002"><em>From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008 </em></span></p><p><span class="c006"><em>You will parse the From line and print out the second word for 
each From line, then you will also count the number of 
From (not From:) lines and print out a count at the end.</em></span></p><p><span class="c006"><em>This is a good sample output with a few lines removed:</em></span></p><pre class="verbatim"><span class="c004"><em>python fromcount.py 
Enter a file name: mbox-short.txt
stephen.marquard@uct.ac.za
louis@media.berkeley.edu
zqian@umich.edu

[...some output removed...]

ray@media.berkeley.edu
cwen@iupui.edu
cwen@iupui.edu
cwen@iupui.edu
There were 27 lines in the file with From as the first word
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;6</span>&#XA0;&#XA0;<em>
Rewrite the program that prompts the user for a list of 
numbers and prints out the maximum and minimum of the
numbers at the end when the user enters &#X201C;done&#X201D;. Write
the program to store the numbers the user enters in a list
and use the <span class="c001">max()</span> and <span class="c001">min()</span> functions to 
compute the maximum and minimum numbers after the 
loop completes.</em></span><pre class="verbatim"><span class="c004"><em>Enter a number: 6
Enter a number: 2
Enter a number: 9
Enter a number: 3
Enter a number: 5
Enter a number: done
Maximum: 9.0
Minimum: 2.0
</em></span></pre></div><span class="c005">
</span><!--TOC chapter id="sec117" <span class="c000"><span class="c005">Dictionaries</span></span>-->
<h1 class="chapter" id="sec117"><span class="c006">Chapter&#XA0;9&#XA0;&#XA0;Dictionaries</span></h1><!--SEC END --><p><span class="c005">
</span><a id="hevea_default580"></a></p><p><a id="hevea_default581"></a><span class="c005">
</span><a id="hevea_default582"></a><span class="c005">
</span><a id="hevea_default583"></a><span class="c005">
</span><a id="hevea_default584"></a><span class="c005">
</span><a id="hevea_default585"></a></p><p><span class="c006">A <span class="c009">dictionary</span> is like a list, but more general. In a list,
the index positions have to be integers; in a dictionary, 
the indices can be (almost) any type.</span></p><p><span class="c006">You can think of a dictionary as a mapping between a set of indices
(which are called <span class="c009">keys</span>) and a set of values. Each key maps to a
value. The association of a key and a value is called a <span class="c009">key-value pair</span> or sometimes an <span class="c009">item</span>.</span></p><p><span class="c006">As an example, we&#X2019;ll build a dictionary that maps from English
to Spanish words, so the keys and the values are all strings.</span></p><p><span class="c006">The function <span class="c001">dict</span> creates a new dictionary with no items.
Because <span class="c001">dict</span> is the name of a built-in function, you
should avoid using it as a variable name.</span></p><p><a id="hevea_default586"></a><span class="c005">
</span><a id="hevea_default587"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; eng2sp = dict()
&gt;&gt;&gt; print eng2sp
{}
</span></pre><p><span class="c006">The curly brackets, <code>{}</code>, represent an empty dictionary.
To add items to the dictionary, you can use square brackets:</span></p><p><a id="hevea_default588"></a><span class="c005">
</span><a id="hevea_default589"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; eng2sp['one'] = 'uno'
</span></pre><p><span class="c006">This line creates an item that maps from the key
<span class="c001">&#X2019;one&#X2019;</span> to the value <code>'uno'</code>. If we print the
dictionary again, we see a key-value pair with a colon
between the key and value:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print eng2sp
{'one': 'uno'}
</span></pre><p><span class="c006">This output format is also an input format. For example,
you can create a new dictionary with three items:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; eng2sp = {'one': 'uno', 'two': 'dos', 'three': 'tres'}
</span></pre><p><span class="c006">But if you print <span class="c001">eng2sp</span>, you might be surprised:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print eng2sp
{'one': 'uno', 'three': 'tres', 'two': 'dos'}
</span></pre><p><span class="c006">The order of the key-value pairs is not the same. In fact, if
you type the same example on your computer, you might get a
different result. In general, the order of items in
a dictionary is unpredictable.</span></p><p><span class="c006">But that&#X2019;s not a problem because
the elements of a dictionary are never indexed with integer indices.
Instead, you use the keys to look up the corresponding values:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print eng2sp['two']
'dos'
</span></pre><p><span class="c006">The key <span class="c001">&#X2019;two&#X2019;</span> always maps to the value <code>'dos'</code> so the order
of the items doesn&#X2019;t matter.</span></p><p><span class="c006">If the key isn&#X2019;t in the dictionary, you get an exception:</span></p><p><a id="hevea_default590"></a><span class="c005">
</span><a id="hevea_default591"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print eng2sp['four']
KeyError: 'four'
</span></pre><p><span class="c006">The <span class="c001">len</span> function works on dictionaries; it returns the
number of key-value pairs:</span></p><p><a id="hevea_default592"></a><span class="c005">
</span><a id="hevea_default593"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; len(eng2sp)
3
</span></pre><p><span class="c006">The <span class="c001">in</span> operator works on dictionaries; it tells you whether
something appears as a <em>key</em> in the dictionary (appearing
as a value is not good enough).</span></p><p><a id="hevea_default594"></a><span class="c005">
</span><a id="hevea_default595"></a><span class="c005">
</span><a id="hevea_default596"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; 'one' in eng2sp
True
&gt;&gt;&gt; 'uno' in eng2sp
False
</span></pre><p><span class="c006">To see whether something appears as a value in a dictionary, you
can use the method <span class="c001">values</span>, which returns the values as
a list, and then use the <span class="c001">in</span> operator:</span></p><p><a id="hevea_default597"></a><span class="c005">
</span><a id="hevea_default598"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; vals = eng2sp.values()
&gt;&gt;&gt; 'uno' in vals
True
</span></pre><p><span class="c006">The <span class="c001">in</span> operator uses different algorithms for lists and
dictionaries. For lists, it uses a linear search algorithm.
As the list gets longer, the search time gets
longer in direct proportion to the length of the list. 
For dictionaries, Python uses an
algorithm called a <span class="c009">hash table</span> that has a remarkable property&#X2014;the
<span class="c001">in</span> operator takes about the same amount of time no matter how
many items there are in a dictionary. I won&#X2019;t explain 
why hash functions are so magical,
but you can read more about it at
<span class="c001">wikipedia.org/wiki/Hash_table</span>.</span></p><p><a id="hevea_default599"></a></p><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;
</span><a id="wordlist2"></a><p><a id="hevea_default600"></a><span class="c005">
</span><a id="hevea_default601"></a></p><p><span class="c006"><em>Write a program that reads the words in <span class="c001">words.txt</span> and
stores them as keys in a dictionary. It doesn&#X2019;t matter what the
values are. Then you can use the <span class="c001">in</span> operator
as a fast way to check whether a string is in
the dictionary.</em></span></p></div><span class="c005">
</span><!--TOC section id="sec118" <span class="c000"><span class="c005">Dictionary as a set of counters</span></span>-->
<h2 class="section" id="sec118"><span class="c006">9.1&#XA0;&#XA0;Dictionary as a set of counters</span></h2><!--SEC END --><p><span class="c005">
</span><a id="histogram"></a></p><p><a id="hevea_default602"></a></p><p><span class="c006">Suppose you are given a string and you want to count how many
times each letter appears. There are several ways you could do it:</span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006">You could create 26 variables, one for each letter of the
alphabet. Then you could traverse the string and, for each
character, increment the corresponding counter, probably using
a chained conditional.</span></li><li class="li-enumerate"><span class="c006">You could create a list with 26 elements. Then you could
convert each character to a number (using the built-in function
<span class="c001">ord</span>), use the number as an index into the list, and increment
the appropriate counter.</span></li><li class="li-enumerate"><span class="c006">You could create a dictionary with characters as keys
and counters as the corresponding values. The first time you
see a character, you would add an item to the dictionary. After
that you would increment the value of an existing item.</span></li></ol><p><span class="c006">Each of these options performs the same computation, but each
of them implements that computation in a different way.</span></p><p><a id="hevea_default603"></a></p><p><span class="c006">An <span class="c009">implementation</span> is a way of performing a computation;
some implementations are better than others. For example,
an advantage of the dictionary implementation is that we don&#X2019;t
have to know ahead of time which letters appear in the string
and we only have to make room for the letters that do appear.</span></p><p><span class="c006">Here is what the code might look like:</span></p><pre class="verbatim"><span class="c004">word = 'brontosaurus'
d = dict()
for c in word:
    if c not in d:
        d[c] = 1
    else:
        d[c] = d[c] + 1
print d
</span></pre><p><span class="c006">We are effectively computing a <span class="c009">histogram</span>, which is a statistical
term for a set of counters (or frequencies). </span></p><p><a id="hevea_default604"></a><span class="c005">
</span><a id="hevea_default605"></a><span class="c005">
</span><a id="hevea_default606"></a></p><p><span class="c006">The <span class="c001">for</span> loop traverses
the string. Each time through the loop, if the character <span class="c001">c</span> is
not in the dictionary, we create a new item with key <span class="c001">c</span> and the
initial value 1 (since we have seen this letter once). If <span class="c001">c</span> is
already in the dictionary we increment <span class="c001">d[c]</span>.</span></p><p><a id="hevea_default607"></a></p><p><span class="c006">Here&#X2019;s the output of the program:</span></p><pre class="verbatim"><span class="c004">{'a': 1, 'b': 1, 'o': 2, 'n': 1, 's': 2, 'r': 2, 'u': 2, 't': 1}
</span></pre><p><span class="c006">The histogram indicates that the letters <span class="c001">&#X2019;a&#X2019;</span> and <code>'b'</code>
appear once; <code>'o'</code> appears twice, and so on.</span></p><p><a id="hevea_default608"></a><span class="c005">
</span><a id="hevea_default609"></a></p><p><span class="c006">Dictionaries have a method called <span class="c001">get</span> that takes a key
and a default value. If the key appears in the dictionary,
<span class="c001">get</span> returns the corresponding value; otherwise it returns
the default value. For example:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; counts = { 'chuck' : 1 , 'annie' : 42, 'jan': 100}
&gt;&gt;&gt; print counts.get('jan', 0)
100
&gt;&gt;&gt; print counts.get('tim', 0)
0
</span></pre><p><span class="c006">We can use <span class="c001">get</span> to write our histogram loop more concisely. 
Because the <span class="c001">get</span> method automatically handles the case where a key
is not in a dictionary, we can reduce four lines down to one
and eliminate the <span class="c001">if</span> statement.</span></p><pre class="verbatim"><span class="c004">word = 'brontosaurus'
d = dict()
for c in word:
    d[c] = d.get(c,0) + 1
print d
</span></pre><p><span class="c006">The use of the <span class="c001">get</span> method to simplify this counting loop 
ends up being a very commonly used &#X201C;idiom&#X201D; in Python and 
we will use it many times in the rest of the book. So you should
take a moment and compare the loop using the <span class="c001">if</span> statement
and <span class="c001">in</span> operator with the loop using the <span class="c001">get</span> method.
They do exactly the same thing, but one is more succinct.
</span><a id="hevea_default610"></a></p><span class="c005">
</span><!--TOC section id="sec119" <span class="c000"><span class="c005">Dictionaries and files</span></span>-->
<h2 class="section" id="sec119"><span class="c006">9.2&#XA0;&#XA0;Dictionaries and files</span></h2><!--SEC END --><p><span class="c006">One of the common uses of a dictionary is to count the occurrence
of words in a file with some written text. 
Let&#X2019;s start with a very simple file of
words taken from the text of <em>Romeo and Juliet</em>.</span></p><p><span class="c006">For the first set of examples, we will use a shortened and simplified version
of the text with no punctuation. Later we will work with the text of the 
scene with punctuation included.</span></p><pre class="verbatim"><span class="c004">But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</span></pre><p><span class="c006">We will write a Python program to read through the lines of the file, 
break each line into a list of words, and then loop through each 
of the words in the line and count each word using a dictionary.</span></p><p><a id="hevea_default611"></a><span class="c005">
</span><a id="hevea_default612"></a><span class="c006">
You will see that we have two <span class="c001">for</span> loops. The outer loop is reading the
lines of the file and the inner loop is iterating through each
of the words on that particular line. This is an example
of a pattern called <span class="c009">nested loops</span> because one of the loops
is the <em>outer</em> loop and the other loop is the <em>inner</em>
loop. </span></p><p><span class="c006">Because the inner loop executes all of its iterations each time
the outer loop makes a single iteration, we think of the inner
loop as iterating &#X201C;more quickly&#X201D; and the outer loop as iterating 
more slowly.</span></p><p><a id="hevea_default613"></a><span class="c006">
The combination of the two nested loops ensures that we will count
every word on every line of the input file.</span></p><pre class="verbatim"><span class="c004">fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

counts = dict()
for line in fhand:
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

print counts
</span></pre><p><span class="c006">When we run the program, we see a raw dump of all of the counts in unsorted
hash order.
(the <span class="c001">romeo.txt</span> file is available at
<span class="c001">www.py4inf.com/code/romeo.txt</span>)</span></p><pre class="verbatim"><span class="c004">python count1.py 
Enter the file name: romeo.txt
{'and': 3, 'envious': 1, 'already': 1, 'fair': 1, 
'is': 3, 'through': 1, 'pale': 1, 'yonder': 1, 
'what': 1, 'sun': 2, 'Who': 1, 'But': 1, 'moon': 1, 
'window': 1, 'sick': 1, 'east': 1, 'breaks': 1, 
'grief': 1, 'with': 1, 'light': 1, 'It': 1, 'Arise': 1, 
'kill': 1, 'the': 3, 'soft': 1, 'Juliet': 1}
</span></pre><p><span class="c006">It is a bit inconvenient to look through the dictionary to find the
most common words and their counts, so we need to add some more 
Python code to get us the output that will be more helpful.</span></p><span class="c005">
</span><!--TOC section id="sec120" <span class="c000"><span class="c005">Looping and dictionaries</span></span>-->
<h2 class="section" id="sec120"><span class="c006">9.3&#XA0;&#XA0;Looping and dictionaries</span></h2><!--SEC END --><p><a id="hevea_default614"></a><span class="c005">
</span><a id="hevea_default615"></a><span class="c005">
</span><a id="hevea_default616"></a></p><p><span class="c006">If you use a dictionary as the sequence 
in a <span class="c001">for</span> statement, it traverses
the keys of the dictionary. This loop
prints each key and the corresponding value:</span></p><pre class="verbatim"><span class="c004">counts = { 'chuck' : 1 , 'annie' : 42, 'jan': 100}
for key in counts:
    print key, counts[key]
</span></pre><p><span class="c006">Here&#X2019;s what the output looks like:</span></p><pre class="verbatim"><span class="c004">jan 100
chuck 1
annie 42
</span></pre><p><span class="c006">Again, the keys are in no particular order.</span></p><p><a id="hevea_default617"></a><span class="c006">
We can use this pattern to implement the various loop idioms
that we have described earlier. For example if we wanted 
to find all the entries in a dictionary with a value 
above ten, we could write the following code:</span></p><pre class="verbatim"><span class="c004">counts = { 'chuck' : 1 , 'annie' : 42, 'jan': 100}
for key in counts:
    if counts[key] &gt; 10 :
        print key, counts[key]
</span></pre><p><span class="c006">The <span class="c001">for</span> loop iterates through the 
<em>keys</em> of the dictionary, so we must 
use the index operator to retrieve the 
corresponding <em>value</em>
for each key.
Here&#X2019;s what the output looks like:</span></p><pre class="verbatim"><span class="c004">jan 100
annie 42
</span></pre><p><span class="c006">We see only the entries with a value above 10.</span></p><p><a id="hevea_default618"></a><span class="c005">
</span><a id="hevea_default619"></a><span class="c006">
If you want to print the keys in alphabetical order, you first 
make a list of the keys in the dictionary using the 
<span class="c001">keys</span> method available in dictionary objects,
and then sort that list
and loop through the sorted list, looking up each
key and printing out key-value pairs in sorted order
as follows:</span></p><pre class="verbatim"><span class="c004">counts = { 'chuck' : 1 , 'annie' : 42, 'jan': 100}
lst = counts.keys()
print lst
lst.sort()
for key in lst:
    print key, counts[key]
</span></pre><p><span class="c006">Here&#X2019;s what the output looks like:</span></p><pre class="verbatim"><span class="c004">['jan', 'chuck', 'annie']
annie 42
chuck 1
jan 100
</span></pre><p><span class="c006">First you see the list of keys in unsorted order that 
we get from the <span class="c001">keys</span> method. Then we see the key-value
pairs in order from the <span class="c001">for</span> loop.</span></p><span class="c005">
</span><!--TOC section id="sec121" <span class="c000"><span class="c005">Advanced text parsing</span></span>-->
<h2 class="section" id="sec121"><span class="c006">9.4&#XA0;&#XA0;Advanced text parsing</span></h2><!--SEC END --><p><a id="hevea_default620"></a><span class="c006">
In the above example using the file <span class="c001">romeo.txt</span>,
we made the file as simple as possible by removing 
all punctuation by hand. The actual text 
has lots of punctuation, as shown below.</span></p><pre class="verbatim"><span class="c004">But, soft! what light through yonder window breaks?
It is the east, and Juliet is the sun.
Arise, fair sun, and kill the envious moon,
Who is already sick and pale with grief,
</span></pre><p><span class="c006">Since the Python <span class="c001">split</span> function looks for spaces and
treats words as tokens separated by spaces, we would treat the
words &#X201C;soft!&#X201D; and &#X201C;soft&#X201D; as <em>different</em> words and create
a separate dictionary entry for each word.</span></p><p><span class="c006">Also since the file has capitalization, we would treat
&#X201C;who&#X201D; and &#X201C;Who&#X201D; as different words with different 
counts.</span></p><p><span class="c006">We can solve both these problems by using the string
methods <span class="c001">lower</span>, <span class="c001">punctuation</span>, and <span class="c001">translate</span>. The 
<span class="c001">translate</span> is the most subtle of the methods. 
Here is the documentation for <span class="c001">translate</span>:</span></p><p><span class="c006"><code>string.translate(s, table[, deletechars])</code></span></p><p><span class="c006"><em>Delete all characters from s that are in deletechars (if present), 
and then translate the characters using table, which must 
be a 256-character string giving the translation for each 
character value, indexed by its ordinal. If table is None, 
then only the character deletion step is performed.</em></span></p><p><span class="c006">We will not specify the <span class="c001">table</span> but we will use 
the <span class="c001">deletechars</span> parameter to delete all of the punctuation.
We will even let Python tell us the list of characters
that it considers &#X201C;punctuation&#X201D;:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; import string
&gt;&gt;&gt; string.punctuation
'!"#$%&amp;\'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~'
</span></pre><p><span class="c006">We make the following modifications to our program:</span></p><pre class="verbatim"><span class="c004">import string                                          # New Code

fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

counts = dict()
for line in fhand:
    line = line.translate(None, string.punctuation)    # New Code
    line = line.lower()                                # New Code
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

print counts
</span></pre><p><span class="c006">We use <span class="c001">translate</span> to remove all punctuation and <span class="c001">lower</span> to 
force the line to lowercase. Otherwise the program is unchanged.
Note that for Python 2.5 and earlier, <span class="c001">translate</span> does not 
accept <span class="c001">None</span> as the first parameter so use this code instead
for the translate call:</span></p><pre class="verbatim"><span class="c004">print a.translate(string.maketrans(' ',' '), string.punctuation
</span></pre><p><span class="c006">Part of learning the &#X201C;Art of Python&#X201D; or &#X201C;Thinking Pythonically&#X201D;
is realizing that Python
often has built-in capabilities for many common data analysis
problems. Over time, you will see enough example code and read
enough of the documentation to know where to look to see if someone
has already written something that makes your job much easier.</span></p><p><span class="c006">The following is an abbreviated version of the output:</span></p><pre class="verbatim"><span class="c004">Enter the file name: romeo-full.txt
{'swearst': 1, 'all': 6, 'afeard': 1, 'leave': 2, 'these': 2, 
'kinsmen': 2, 'what': 11, 'thinkst': 1, 'love': 24, 'cloak': 1, 
a': 24, 'orchard': 2, 'light': 5, 'lovers': 2, 'romeo': 40, 
'maiden': 1, 'whiteupturned': 1, 'juliet': 32, 'gentleman': 1, 
'it': 22, 'leans': 1, 'canst': 1, 'having': 1, ...}
</span></pre><p><span class="c006">Looking through this output is still unwieldy and we can use
Python to give us exactly what we are looking for, but to do 
so, we need to learn about Python <span class="c009">tuples</span>. We
will pick up this example once we learn about tuples.</span></p><span class="c005">
</span><!--TOC section id="sec122" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec122"><span class="c006">9.5&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default621"></a></p><p><span class="c006">As you work with bigger datasets it can become unwieldy to
debug by printing and checking data by hand. Here are some
suggestions for debugging large datasets:</span></p><dl class="description"><dt class="dt-description"><span class="c010">Scale down the input:</span></dt><dd class="dd-description"><span class="c006"> If possible, reduce the size of the
dataset. For example if the program reads a text file, start with
just the first 10 lines, or with the smallest example you can find.
You can either edit the files themselves, or (better) modify the
program so it reads only the first <span class="c001">n</span> lines.</span><p><span class="c006">If there is an error, you can reduce <span class="c001">n</span> to the smallest
value that manifests the error, and then increase it gradually
as you find and correct errors.</span></p></dd><dt class="dt-description"><span class="c010">Check summaries and types:</span></dt><dd class="dd-description"><span class="c006"> Instead of printing and checking the
entire dataset, consider printing summaries of the data: for example,
the number of items in a dictionary or the total of a list of numbers.</span><p><span class="c006">A common cause of runtime errors is a value that is not the right
type. For debugging this kind of error, it is often enough to print
the type of a value.</span></p></dd><dt class="dt-description"><span class="c010">Write self-checks:</span></dt><dd class="dd-description"><span class="c006"> Sometimes you can write code to check
for errors automatically. For example, if you are computing the
average of a list of numbers, you could check that the result is
not greater than the largest element in the list or less than
the smallest. This is called a &#X201C;sanity check&#X201D; because it detects
results that are &#X201C;completely illogical&#X201D;.</span><p><a id="hevea_default622"></a><span class="c005">
</span><a id="hevea_default623"></a></p><p><span class="c006">Another kind of check compares the results of two different
computations to see if they are consistent. This is called a
&#X201C;consistency check&#X201D;.</span></p></dd><dt class="dt-description"><span class="c010">Pretty print the output:</span></dt><dd class="dd-description"><span class="c006"> Formatting debugging output
can make it easier to spot an error. </span></dd></dl><p><span class="c006">Again, time you spend building scaffolding can reduce
the time you spend debugging.</span></p><p><a id="hevea_default624"></a></p><span class="c005">
</span><!--TOC section id="sec123" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec123"><span class="c006">9.6&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">dictionary:</span></dt><dd class="dd-description"><span class="c006"> A mapping from a set of keys to their
corresponding values.
</span><a id="hevea_default625"></a></dd><dt class="dt-description"><span class="c010">hashtable:</span></dt><dd class="dd-description"><span class="c006"> The algorithm used to implement Python
dictionaries.
</span><a id="hevea_default626"></a></dd><dt class="dt-description"><span class="c010">hash function:</span></dt><dd class="dd-description"><span class="c006"> A function used by a hashtable to compute the
location for a key.
</span><a id="hevea_default627"></a></dd><dt class="dt-description"><span class="c010">histogram:</span></dt><dd class="dd-description"><span class="c006"> A set of counters.
</span><a id="hevea_default628"></a></dd><dt class="dt-description"><span class="c010">implementation:</span></dt><dd class="dd-description"><span class="c006"> A way of performing a computation.
</span><a id="hevea_default629"></a></dd><dt class="dt-description"><span class="c010">item:</span></dt><dd class="dd-description"><span class="c006"> Another name for a key-value pair.
</span><a id="hevea_default630"></a></dd><dt class="dt-description"><span class="c010">key:</span></dt><dd class="dd-description"><span class="c006"> An object that appears in a dictionary as the
first part of a key-value pair.
</span><a id="hevea_default631"></a></dd><dt class="dt-description"><span class="c010">key-value pair:</span></dt><dd class="dd-description"><span class="c006"> The representation of the mapping from
a key to a value.
</span><a id="hevea_default632"></a></dd><dt class="dt-description"><span class="c010">lookup:</span></dt><dd class="dd-description"><span class="c006"> A dictionary operation that takes a key and finds
the corresponding value.
</span><a id="hevea_default633"></a></dd><dt class="dt-description"><span class="c010">nested loops:</span></dt><dd class="dd-description"><span class="c006"> When there are one or more loops &#X201C;inside&#X201D; of 
another loop. The inner loop runs to completion each time the outer
loop runs once.
</span><a id="hevea_default634"></a><span class="c005">
</span><a id="hevea_default635"></a></dd><dt class="dt-description"><span class="c010">value:</span></dt><dd class="dd-description"><span class="c006"> An object that appears in a dictionary as the
second part of a key-value pair. This is more specific than
our previous use of the word &#X201C;value&#X201D;.
</span><a id="hevea_default636"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec124" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec124"><span class="c006">9.7&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write a program that categorizes each mail message by which 
day of the week the commit was done. To do this look for 
lines that start with &#X201C;From&#X201D;, then look for the 
third word and keep a running count of each of the 
days of the week. At the end of the program print out the 
contents of your dictionary (order does not matter).</em></span><pre class="verbatim"><span class="c004"><em>Sample Line:
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008

Sample Execution:
python dow.py
Enter a file name: mbox-short.txt
{'Fri': 20, 'Thu': 6, 'Sat': 1}
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Write a program to read through a mail log, 
build a histogram using a dictionary to count how many 
messages have come from each email address, 
and print the dictionary.</em></span><pre class="verbatim"><span class="c004"><em>Enter file name: mbox-short.txt
{'gopal.ramasammycook@gmail.com': 1, 'louis@media.berkeley.edu': 3, 
'cwen@iupui.edu': 5, 'antranig@caret.cam.ac.uk': 1, 
'rjlowe@iupui.edu': 2, 'gsilver@umich.edu': 3, 
'david.horwitz@uct.ac.za': 4, 'wagnermr@iupui.edu': 1, 
'zqian@umich.edu': 4, 'stephen.marquard@uct.ac.za': 2, 
'ray@media.berkeley.edu': 1}
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
Add code to the above program to figure out who has the 
most messages in the file.</em></span><p><span class="c006"><em>After all the data has been read and the dictionary has been
created, look through the dictionary using a maximum loop
(see Section&#XA0;</em></span><a href="#maximumloop"><span class="c006"><em>??</em></span></a><span class="c006"><em>)
to find who has the most 
messages and print how many messages the person has.</em></span></p><pre class="verbatim"><span class="c004"><em>Enter a file name: mbox-short.txt
cwen@iupui.edu 5

Enter a file name: mbox.txt
zqian@umich.edu 195
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
This program records the domain name (instead of the address) 
where the message was sent from instead of who the mail 
came from (i.e., the whole email address). At the end 
of the program, print out the contents of your dictionary. </em></span><pre class="verbatim"><span class="c004"><em>python schoolcount.py
Enter a file name: mbox-short.txt
{'media.berkeley.edu': 4, 'uct.ac.za': 6, 'umich.edu': 7, 
'gmail.com': 1, 'caret.cam.ac.uk': 1, 'iupui.edu': 8}
</em></span></pre></div><span class="c005">
</span><!--TOC chapter id="sec125" <span class="c000"><span class="c005">Tuples</span></span>-->
<h1 class="chapter" id="sec125"><span class="c006">Chapter&#XA0;10&#XA0;&#XA0;Tuples</span></h1><!--SEC END --><p><span class="c005">
</span><a id="tuplechap"></a></p><span class="c005">
</span><!--TOC section id="sec126" <span class="c000"><span class="c005">Tuples are immutable</span></span>-->
<h2 class="section" id="sec126"><span class="c006">10.1&#XA0;&#XA0;Tuples are immutable</span></h2><!--SEC END --><p><a id="hevea_default637"></a><span class="c005">
</span><a id="hevea_default638"></a><span class="c005">
</span><a id="hevea_default639"></a></p><p><span class="c006">A tuple</span><sup><a id="text11" href="#note11"><span class="c006">1</span></a></sup><span class="c006">
is a sequence of values much like a list. 
The values stored in a tuple can be any type, and
they are indexed by integers.
The important difference is that tuples are <span class="c009">immutable</span>.
Tuples are also <span class="c009">comparable</span> and <span class="c009">hashable</span> so we can 
sort lists of them and use tuples as key values in Python
dictionaries.</span></p><p><a id="hevea_default640"></a><span class="c005">
</span><a id="hevea_default641"></a><span class="c005">
</span><a id="hevea_default642"></a><span class="c005">
</span><a id="hevea_default643"></a></p><p><span class="c006">Syntactically, a tuple is a comma-separated list of values:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = 'a', 'b', 'c', 'd', 'e'
</span></pre><p><span class="c006">Although it is not necessary, it is common to enclose tuples in
parentheses to help us quickly identify tuples when we look at
Python code:</span></p><p><a id="hevea_default644"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ('a', 'b', 'c', 'd', 'e')
</span></pre><p><span class="c006">To create a tuple with a single element, you have to include the final
comma:</span></p><p><a id="hevea_default645"></a><span class="c005">
</span><a id="hevea_default646"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t1 = ('a',)
&gt;&gt;&gt; type(t1)
&lt;type 'tuple'&gt;
</span></pre><p><span class="c006">Without the comma Python treats <code>('a')</code> as an expression 
with a string in parentheses that evaluates to a string:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t2 = ('a')
&gt;&gt;&gt; type(t2)
&lt;type 'str'&gt;
</span></pre><p><span class="c006">Another way to construct a tuple is the built-in function <span class="c001">tuple</span>.
With no argument, it creates an empty tuple:</span></p><p><a id="hevea_default647"></a><span class="c005">
</span><a id="hevea_default648"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = tuple()
&gt;&gt;&gt; print t
()
</span></pre><p><span class="c006">If the argument is a sequence (string, list, or tuple), the result
of the call to <span class="c001">tuple</span> is a tuple with the elements of the sequence:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = tuple('lupins')
&gt;&gt;&gt; print t
('l', 'u', 'p', 'i', 'n', 's')
</span></pre><p><span class="c006">Because <span class="c001">tuple</span> is the name of a constructor, you should
avoid using it as a variable name.</span></p><p><span class="c006">Most list operators also work on tuples. The bracket operator
indexes an element:</span></p><p><a id="hevea_default649"></a><span class="c005">
</span><a id="hevea_default650"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ('a', 'b', 'c', 'd', 'e')
&gt;&gt;&gt; print t[0]
'a'
</span></pre><p><span class="c006">And the slice operator selects a range of elements.</span></p><p><a id="hevea_default651"></a><span class="c005">
</span><a id="hevea_default652"></a><span class="c005">
</span><a id="hevea_default653"></a><span class="c005">
</span><a id="hevea_default654"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print t[1:3]
('b', 'c')
</span></pre><p><span class="c006">But if you try to modify one of the elements of the tuple, you get
an error:</span></p><p><a id="hevea_default655"></a><span class="c005">
</span><a id="hevea_default656"></a><span class="c005">
</span><a id="hevea_default657"></a><span class="c005">
</span><a id="hevea_default658"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t[0] = 'A'
TypeError: object doesn't support item assignment
</span></pre><p><span class="c006">You can&#X2019;t modify the elements of a tuple, but you can replace
one tuple with another:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; t = ('A',) + t[1:]
&gt;&gt;&gt; print t
('A', 'b', 'c', 'd', 'e')
</span></pre><span class="c005">
</span><!--TOC section id="sec127" <span class="c000"><span class="c005">Comparing tuples</span></span>-->
<h2 class="section" id="sec127"><span class="c006">10.2&#XA0;&#XA0;Comparing tuples</span></h2><!--SEC END --><p><a id="hevea_default659"></a><span class="c005">
</span><a id="hevea_default660"></a><span class="c005">
</span><a id="hevea_default661"></a><span class="c005">
</span><a id="hevea_default662"></a></p><p><span class="c006">The comparison operators work with tuples and other sequences.
Python starts by comparing the first element from each
sequence. If they are equal, it goes on to the next element,
and so on, until it finds elements that differ. Subsequent
elements are not considered (even if they are really big).</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; (0, 1, 2) &lt; (0, 3, 4)
True
&gt;&gt;&gt; (0, 1, 2000000) &lt; (0, 3, 4)
True
</span></pre><p><span class="c006">The <span class="c001">sort</span> function works the same way. It sorts 
primarily by first element, but in the case of a tie, it sorts
by second element, and so on. </span></p><p><span class="c006">This feature lends itself to a pattern called <span class="c009">DSU</span> for </span></p><dl class="description"><dt class="dt-description"><span class="c010">Decorate</span></dt><dd class="dd-description"><span class="c006"> a sequence by building a list of tuples
with one or more sort keys preceding the elements from the sequence,</span></dd><dt class="dt-description"><span class="c010">Sort</span></dt><dd class="dd-description"><span class="c006"> the list of tuples using the Python built-in <span class="c001">sort</span>, and</span></dd><dt class="dt-description"><span class="c010">Undecorate</span></dt><dd class="dd-description"><span class="c006"> by extracting the sorted elements of the sequence.</span></dd></dl><p><a id="DSU"></a><span class="c005">
</span><a id="hevea_default663"></a><span class="c005">
</span><a id="hevea_default664"></a><span class="c005">
</span><a id="hevea_default665"></a><span class="c005">
</span><a id="hevea_default666"></a><span class="c005">
</span><a id="hevea_default667"></a></p><p><span class="c006">For example, suppose you have a list of words and you want to
sort them from longest to shortest:</span></p><pre class="verbatim"><span class="c004">txt = 'but soft what light in yonder window breaks'
words = txt.split()
t = list()
for word in words:
   t.append((len(word), word))

t.sort(reverse=True)

res = list()
for length, word in t:
    res.append(word)

print res
</span></pre><p><span class="c006">The first loop builds a list of tuples, where each
tuple is a word preceded by its length.</span></p><p><span class="c006"><span class="c001">sort</span> compares the first element, length, first, and
only considers the second element to break ties. The keyword argument
<span class="c001">reverse=True</span> tells <span class="c001">sort</span> to go in decreasing order.</span></p><p><a id="hevea_default668"></a><span class="c005">
</span><a id="hevea_default669"></a><span class="c005">
</span><a id="hevea_default670"></a></p><p><span class="c006">The second loop traverses the list of tuples and builds a list of
words in descending order of length. The four-character words
are sorted in <em>reverse</em> alphabetical order, so &#X201C;what&#X201D; appears
before &#X201C;soft&#X201D; in the following list.</span></p><p><span class="c006">The output of the program is as follows:
</span></p><pre class="verbatim"><span class="c004">['yonder', 'window', 'breaks', 'light', 'what', 
'soft', 'but', 'in']
</span></pre><p><span class="c006">Of course the line loses much of its poetic impact 
when turned into a Python list and sorted in 
descending word length order.</span></p><span class="c005">
</span><!--TOC section id="sec128" <span class="c000"><span class="c005">Tuple assignment</span></span>-->
<h2 class="section" id="sec128"><span class="c006">10.3&#XA0;&#XA0;Tuple assignment</span></h2><!--SEC END --><p><span class="c005">
</span><a id="tuple assignment"></a></p><p><a id="hevea_default671"></a><span class="c005">
</span><a id="hevea_default672"></a><span class="c005">
</span><a id="hevea_default673"></a><span class="c005">
</span><a id="hevea_default674"></a></p><p><span class="c006">One of the unique syntactic features of the Python language
is the ability to have a tuple on the left
side of an assignment statement. This allows you to assign
more than one variable at a time when the left side is a 
sequence.</span></p><p><span class="c006">In this example we have a two-element list (which is a sequence) and
assign the first and second elements of the sequence
to the variables <span class="c001">x</span> and <span class="c001">y</span> in a single statement.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; x, y = m
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</span></pre><p><span class="c006">It is not magic, Python <em>roughly</em> translates the 
tuple assignment syntax
to be the following:</span><sup><a id="text12" href="#note12"><span class="c006">2</span></a></sup></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; x = m[0]
&gt;&gt;&gt; y = m[1]
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</span></pre><p><span class="c006">Stylistically when we use a tuple on the left side of the assignment
statement, we omit the parentheses, but the following is an equally 
valid syntax:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; (x, y) = m
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</span></pre><p><span class="c006">A particularly clever application of tuple assignment allows
us to <span class="c009">swap</span> the values of two variables in a single statement:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a, b = b, a
</span></pre><p><span class="c006">Both sides of this statement are tuples, but
the left side is a tuple of variables; the right side is a tuple of
expressions. Each value on the right side 
is assigned to its respective variable on the left side. 
All the expressions on the right side are evaluated before any
of the assignments.</span></p><p><span class="c006">The number of variables on the left and the number of
values on the right must be the same:</span></p><p><a id="hevea_default675"></a><span class="c005">
</span><a id="hevea_default676"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; a, b = 1, 2, 3
ValueError: too many values to unpack
</span></pre><p><span class="c006">More generally, the right side can be any kind of sequence
(string, list, or tuple). For example, to split an email address
into a user name and a domain, you could write:</span></p><p><a id="hevea_default677"></a><span class="c005">
</span><a id="hevea_default678"></a><span class="c005">
</span><a id="hevea_default679"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; addr = 'monty@python.org'
&gt;&gt;&gt; uname, domain = addr.split('@')
</span></pre><p><span class="c006">The return value from <span class="c001">split</span> is a list with two elements;
the first element is assigned to <span class="c001">uname</span>, the second to
<span class="c001">domain</span>.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; print uname
monty
&gt;&gt;&gt; print domain
python.org
</span></pre><span class="c005">
</span><!--TOC section id="sec129" <span class="c000"><span class="c005">Dictionaries and tuples</span></span>-->
<h2 class="section" id="sec129"><span class="c006">10.4&#XA0;&#XA0;Dictionaries and tuples</span></h2><!--SEC END --><p><a id="hevea_default680"></a><span class="c005">
</span><a id="hevea_default681"></a><span class="c005">
</span><a id="hevea_default682"></a><span class="c005">
</span><a id="hevea_default683"></a></p><p><span class="c006">Dictionaries have a method called <span class="c001">items</span> that returns a list of
tuples, where each tuple is a key-value 
pair</span><sup><a id="text13" href="#note13"><span class="c006">3</span></a></sup><span class="c006">.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; t = d.items()
&gt;&gt;&gt; print t
[('a', 10), ('c', 22), ('b', 1)]
</span></pre><p><span class="c006">As you should expect from a dictionary, the items are in no
particular order.</span></p><p><span class="c006">However, since the list of tuples is a list, and tuples are comparable,
we can now sort the list of tuples. Converting a dictionary
to a list of tuples is a way for us to output the contents of a 
dictionary sorted by key:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; t = d.items()
&gt;&gt;&gt; t
[('a', 10), ('c', 22), ('b', 1)]
&gt;&gt;&gt; t.sort()
&gt;&gt;&gt; t
[('a', 10), ('b', 1), ('c', 22)]
</span></pre><p><span class="c006">The new list is sorted in ascending alphabetical order by the key value.</span></p><span class="c005">
</span><!--TOC section id="sec130" <span class="c000"><span class="c005">Multiple assignment with dictionaries</span></span>-->
<h2 class="section" id="sec130"><span class="c006">10.5&#XA0;&#XA0;Multiple assignment with dictionaries</span></h2><!--SEC END --><p><a id="hevea_default684"></a><span class="c005">
</span><a id="hevea_default685"></a></p><p><span class="c006">Combining <span class="c001">items</span>, tuple assignment, and <span class="c001">for</span>, you
can see a nice code pattern for traversing the keys and values of a dictionary
in a single loop:</span></p><pre class="verbatim"><span class="c004">for key, val in d.items():
    print val, key
</span></pre><p><span class="c006">This loop has two <span class="c009">iteration variables</span> because <span class="c001">items</span> returns
a list of tuples and <span class="c001">key, val</span> is a tuple assignment
that successively iterates through each of the key-value pairs in the
dictionary. </span></p><p><span class="c006">For each iteration
through the loop, both <span class="c001">key</span> and <span class="c001">value</span> are advanced to the
next key-value pair in the dictionary (still in hash order).</span></p><p><span class="c006">The output of this loop is:</span></p><pre class="verbatim"><span class="c004">10 a
22 c
1 b
</span></pre><p><span class="c006">Again, it is in hash key order (i.e., no particular order).</span></p><p><span class="c006">If we combine these two techniques, we can print out the contents
of a dictionary sorted by the <em>value</em> stored in each key-value
pair.</span></p><p><span class="c006">To do this, we first make a list of tuples where each tuple is 
<span class="c001">(value, key)</span>. The <span class="c001">items</span> method would give us a list of 
<span class="c001">(key, value)</span> tuples&#X2014;but this time we want to sort by value, not key.
Once we have constructed the list with the value-key tuples, it is a simple
matter to sort the list in reverse order and print out the new, sorted list.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; l = list()
&gt;&gt;&gt; for key, val in d.items() :
...     l.append( (val, key) )
... 
&gt;&gt;&gt; l
[(10, 'a'), (22, 'c'), (1, 'b')]
&gt;&gt;&gt; l.sort(reverse=True)
&gt;&gt;&gt; l
[(22, 'c'), (10, 'a'), (1, 'b')]
&gt;&gt;&gt; 
</span></pre><p><span class="c006">By carefully constructing the list of tuples to have the value as the first
element of each tuple, we can sort the list of tuples and get our dictionary
contents sorted by value.</span></p><span class="c005">
</span><!--TOC section id="sec131" <span class="c000"><span class="c005">The most common words</span></span>-->
<h2 class="section" id="sec131"><span class="c006">10.6&#XA0;&#XA0;The most common words</span></h2><!--SEC END --><p><a id="hevea_default686"></a><span class="c006">
Coming back to our running example of the text from <em>Romeo and Juliet</em> 
Act 2, Scene 2, we can augment our program to use this technique to 
print the ten most common words in the text as follows:</span></p><pre class="verbatim"><span class="c004">import string
fhand = open('romeo-full.txt')
counts = dict()
for line in fhand:
    line = line.translate(None, string.punctuation)
    line = line.lower()
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

# Sort the dictionary by value
lst = list()
for key, val in counts.items():
    lst.append( (val, key) )

lst.sort(reverse=True)

for key, val in lst[:10] :
    print key, val
</span></pre><p><span class="c006">The first part of the program which reads the file and computes 
the dictionary that maps each word to the count of words in the 
document is unchanged. But instead of simply printing out 
<span class="c001">counts</span> and ending the program, we construct a list 
of <span class="c001">(val, key)</span> tuples and then sort the list in reverse order.</span></p><p><span class="c006">Since the value is first, it will be used for the comparisons. 
If there is more than one tuple with the same value, it will look
at the second element (the key), so tuples where the value is the
same will be further sorted by the alphabetical order of the key.</span></p><p><span class="c006">At the end we write a nice <span class="c001">for</span> loop which does a multiple
assignment iteration and prints out the ten most common words
by iterating through a slice of the list (<span class="c001">lst[:10]</span>).</span></p><p><span class="c006">So now the output finally looks like what we want for our word 
frequency analysis.</span></p><pre class="verbatim"><span class="c004">61 i
42 and
40 romeo
34 to
34 the
32 thou
32 juliet
30 that
29 my
24 thee
</span></pre><p><span class="c006">The fact that this complex data parsing and analysis 
can be done with an easy-to-understand 19-line Python
program is one reason why Python is a good choice as a language 
for exploring information.</span></p><span class="c005">
</span><!--TOC section id="sec132" <span class="c000"><span class="c005">Using tuples as keys in dictionaries</span></span>-->
<h2 class="section" id="sec132"><span class="c006">10.7&#XA0;&#XA0;Using tuples as keys in dictionaries</span></h2><!--SEC END --><p><a id="hevea_default687"></a><span class="c005">
</span><a id="hevea_default688"></a></p><p><span class="c006">Because tuples are <span class="c009">hashable</span> and lists are not, if we want to 
create a <span class="c009">composite</span> key to use in a dictionary we must use a tuple as
the key.</span></p><p><span class="c006">We would encounter a composite key if we wanted to create a 
telephone directory that maps
from last-name, first-name pairs to telephone numbers. Assuming
that we have defined the variables 
<span class="c001">last</span>, <span class="c001">first</span>, and <span class="c001">number</span>, we could write
a dictionary assignment statement as follows:</span></p><pre class="verbatim"><span class="c004">directory[last,first] = number
</span></pre><p><span class="c006">The expression in brackets is a tuple. We could use tuple
assignment in a <span class="c001">for</span> loop to traverse this dictionary.</span></p><p><a id="hevea_default689"></a></p><pre class="verbatim"><span class="c004">for last, first in directory:
    print first, last, directory[last,first]
</span></pre><p><span class="c006">This loop traverses the keys in <span class="c001">directory</span>, which are tuples. It
assigns the elements of each tuple to <span class="c001">last</span> and <span class="c001">first</span>, then
prints the name and corresponding telephone number.</span></p><span class="c005">
</span><!--TOC section id="sec133" <span class="c000"><span class="c005">Sequences: strings, lists, and tuples&#X2014;Oh My!</span></span>-->
<h2 class="section" id="sec133"><span class="c006">10.8&#XA0;&#XA0;Sequences: strings, lists, and tuples&#X2014;Oh My!</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default690"></a></p><p><span class="c006">I have focused on lists of tuples, but almost all of the examples in
this chapter also work with lists of lists, tuples of tuples, and
tuples of lists. To avoid enumerating the possible combinations, it
is sometimes easier to talk about sequences of sequences.</span></p><p><span class="c006">In many contexts, the different kinds of sequences (strings, lists, and
tuples) can be used interchangeably. So how and why do you choose one
over the others?</span></p><p><a id="hevea_default691"></a><span class="c005">
</span><a id="hevea_default692"></a><span class="c005">
</span><a id="hevea_default693"></a><span class="c005">
</span><a id="hevea_default694"></a><span class="c005">
</span><a id="hevea_default695"></a></p><p><span class="c006">To start with the obvious, strings are more limited than other
sequences because the elements have to be characters. They are
also immutable. If you need the ability to change the characters
in a string (as opposed to creating a new string), you might
want to use a list of characters instead.</span></p><p><span class="c006">Lists are more common than tuples, mostly because they are mutable.
But there are a few cases where you might prefer tuples:</span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006">In some contexts, like a <span class="c001">return</span> statement, it is
syntactically simpler to create a tuple than a list. In other
contexts, you might prefer a list.</span></li><li class="li-enumerate"><span class="c006">If you want to use a sequence as a dictionary key, you
have to use an immutable type like a tuple or string.</span></li><li class="li-enumerate"><span class="c006">If you are passing a sequence as an argument to a function,
using tuples reduces the potential for unexpected behavior
due to aliasing.</span></li></ol><p><span class="c006">Because tuples are immutable, they don&#X2019;t provide methods
like <span class="c001">sort</span> and <span class="c001">reverse</span>, which modify existing lists.
However Python provides the built-in functions <span class="c001">sorted</span>
and <span class="c001">reversed</span>, which take any sequence as a parameter
and return a new sequence with the same elements in a different
order.</span></p><p><a id="hevea_default696"></a><span class="c005">
</span><a id="hevea_default697"></a><span class="c005">
</span><a id="hevea_default698"></a><span class="c005">
</span><a id="hevea_default699"></a></p><span class="c005">
</span><!--TOC section id="sec134" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec134"><span class="c006">10.9&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><a id="hevea_default700"></a><span class="c005">
</span><a id="hevea_default701"></a><span class="c005">
</span><a id="hevea_default702"></a><span class="c005">
</span><a id="hevea_default703"></a></p><p><span class="c006">Lists, dictionaries and tuples are known generically as <span class="c009">data
structures</span>; in this chapter we are starting to see compound data
structures, like lists of tuples, and dictionaries that contain tuples
as keys and lists as values. Compound data structures are useful, but
they are prone to what I call <span class="c009">shape errors</span>; that is, errors
caused when a data structure has the wrong type, size, or composition,
or perhaps you write some code and forget the shape of your data
and introduce an error.</span></p><p><span class="c006">For example, if you are expecting a list with one integer and I
give you a plain old integer (not in a list), it won&#X2019;t work.</span></p><p><span class="c006">When you are debugging a program, and especially if you are
working on a hard bug, there are four things to try:</span></p><dl class="description"><dt class="dt-description"><span class="c010">reading:</span></dt><dd class="dd-description"><span class="c006"> Examine your code, read it back to yourself, and
check that it says what you meant to say.</span></dd><dt class="dt-description"><span class="c010">running:</span></dt><dd class="dd-description"><span class="c006"> Experiment by making changes and running different
versions. Often if you display the right thing at the right place
in the program, the problem becomes obvious, but sometimes you have to
spend some time to build scaffolding.</span></dd><dt class="dt-description"><span class="c010">ruminating:</span></dt><dd class="dd-description"><span class="c006"> Take some time to think! What kind of error
is it: syntax, runtime, semantic? What information can you get from
the error messages, or from the output of the program? What kind of
error could cause the problem you&#X2019;re seeing? What did you change
last, before the problem appeared?</span></dd><dt class="dt-description"><span class="c010">retreating:</span></dt><dd class="dd-description"><span class="c006"> At some point, the best thing to do is back
off, undoing recent changes, until you get back to a program that
works and that you understand. Then you can start rebuilding.</span></dd></dl><p><span class="c006">Beginning programmers sometimes get stuck on one of these activities
and forget the others. Each activity comes with its own failure
mode.</span></p><p><a id="hevea_default704"></a></p><p><span class="c006">For example, reading your code might help if the problem is a
typographical error, but not if the problem is a conceptual
misunderstanding. If you don&#X2019;t understand what your program does, you
can read it 100 times and never see the error, because the error is in
your head.</span></p><p><a id="hevea_default705"></a></p><p><span class="c006">Running experiments can help, especially if you run small, simple
tests. But if you run experiments without thinking or reading your
code, you might fall into a pattern I call &#X201C;random walk programming&#X201D;,
which is the process of making random changes until the program
does the right thing. Needless to say, random walk programming
can take a long time.</span></p><p><a id="hevea_default706"></a><span class="c005">
</span><a id="hevea_default707"></a></p><p><span class="c006">You have to take time to think. Debugging is like an
experimental science. You should have at least one hypothesis about
what the problem is. If there are two or more possibilities, try to
think of a test that would eliminate one of them.</span></p><p><span class="c006">Taking a break helps with the thinking. So does talking.
If you explain the problem to someone else (or even to yourself), you
will sometimes find the answer before you finish asking the question.</span></p><p><span class="c006">But even the best debugging techniques will fail if there are too many
errors, or if the code you are trying to fix is too big and
complicated. Sometimes the best option is to retreat, simplifying the
program until you get to something that works and that you
understand.</span></p><p><span class="c006">Beginning programmers are often reluctant to retreat because
they can&#X2019;t stand to delete a line of code (even if it&#X2019;s wrong).
If it makes you feel better, copy your program into another file
before you start stripping it down. Then you can paste the pieces
back in a little bit at a time.</span></p><p><span class="c006">Finding a hard bug requires reading, running, ruminating, and
sometimes retreating. If you get stuck on one of these activities,
try the others.</span></p><span class="c005">
</span><!--TOC section id="sec135" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec135"><span class="c006">10.10&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">comparable:</span></dt><dd class="dd-description"><span class="c006"> A type where one value can be checked to see if it is
greater than, less than, or equal to another value of the same type.
Types which are comparable can be put in a list and sorted.
</span><a id="hevea_default708"></a></dd><dt class="dt-description"><span class="c010">data structure:</span></dt><dd class="dd-description"><span class="c006"> A collection of related values, often
organized in lists, dictionaries, tuples, etc.
</span><a id="hevea_default709"></a></dd><dt class="dt-description"><span class="c010">DSU:</span></dt><dd class="dd-description"><span class="c006"> Abbreviation of &#X201C;decorate-sort-undecorate&#X201D;, a
pattern that involves building a list of tuples, sorting, and
extracting part of the result.
</span><a id="hevea_default710"></a></dd><dt class="dt-description"><span class="c010">gather:</span></dt><dd class="dd-description"><span class="c006"> The operation of assembling a variable-length
argument tuple.
</span><a id="hevea_default711"></a></dd><dt class="dt-description"><span class="c010">hashable:</span></dt><dd class="dd-description"><span class="c006"> A type that has a hash function. Immutable
types like integers,
floats, and strings are hashable; mutable types like lists and
dictionaries are not.
</span><a id="hevea_default712"></a></dd><dt class="dt-description"><span class="c010">scatter:</span></dt><dd class="dd-description"><span class="c006"> The operation of treating a sequence as a list of
arguments.
</span><a id="hevea_default713"></a></dd><dt class="dt-description"><span class="c010">shape (of a data structure):</span></dt><dd class="dd-description"><span class="c006"> A summary of the type,
size, and composition of a data structure.
</span><a id="hevea_default714"></a></dd><dt class="dt-description"><span class="c010">singleton:</span></dt><dd class="dd-description"><span class="c006"> A list (or other sequence) with a single element.
</span><a id="hevea_default715"></a></dd><dt class="dt-description"><span class="c010">tuple:</span></dt><dd class="dd-description"><span class="c006"> An immutable sequence of elements.
</span><a id="hevea_default716"></a></dd><dt class="dt-description"><span class="c010">tuple assignment:</span></dt><dd class="dd-description"><span class="c006"> An assignment with a sequence on the
right side and a tuple of variables on the left. The right
side is evaluated and then its elements are assigned to the
variables on the left.
</span><a id="hevea_default717"></a><span class="c005">
</span><a id="hevea_default718"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec136" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec136"><span class="c006">10.11&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Revise a previous program as follows: Read and 
parse the &#X201C;From&#X201D; lines and pull out the 
addresses from the line. Count the number of
messages from each person using a dictionary.</em></span><p><span class="c006"><em>After all the data has been read, print 
the person with the most commits by creating
a list of (count, email) tuples from the 
dictionary. Then sort the list in reverse
order and print out the person who has the most
commits.</em></span></p><pre class="verbatim"><span class="c004"><em>Sample Line:
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008

Enter a file name: mbox-short.txt
cwen@iupui.edu 5

Enter a file name: mbox.txt
zqian@umich.edu 195
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
This program counts the distribution of the hour of the day for 
each of the messages. You can pull the hour from the &#X201C;From&#X201D; 
line by finding the time string and then splitting that string 
into parts using the colon character. Once you have accumulated 
the counts for each hour, print out the counts, one per line, 
sorted by hour as shown below. 
</em></span><pre class="verbatim"><span class="c004"><em>Sample Execution:
python timeofday.py
Enter a file name: mbox-short.txt
04 3
06 1
07 1
09 2
10 3
11 6
14 1
15 2
16 4
17 2
18 1
19 1
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Write a program that reads a file and 
prints the </em>letters<em> in decreasing order of frequency. Your program
should convert all the input to lower case and only count the letters a-z.
Your program should not count spaces, digits, punctuation, or anything 
other than the letters a-z.
Find text samples from several different languages and see how letter frequency
varies between languages. Compare your results with the tables at
<span class="c001">wikipedia.org/wiki/Letter_frequencies</span>.</em></span><p><a id="hevea_default719"></a><span class="c005">
</span><a id="hevea_default720"></a></p></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note11" href="#text11"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">Fun fact: The word &#X201C;tuple&#X201D; comes from the names
given to sequences of numbers of varying lengths: single, 
double, triple, quadruple, quituple, sextuple, septuple, etc.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note12" href="#text12"><span class="c006">2</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">Python does not translate the 
syntax literally. For example, if you try this with a dictionary,
it will not work as might expect.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note13" href="#text13"><span class="c006">3</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">This behavior is slightly different in Python 3.0.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec137" <span class="c000"><span class="c005">Regular expressions</span></span>-->
<h1 class="chapter" id="sec137"><span class="c006">Chapter&#XA0;11&#XA0;&#XA0;Regular expressions</span></h1><!--SEC END --><p><span class="c006">So far we have been reading through files, looking for patterns and extracting various
bits of lines that we find interesting. We have been using string methods like <span class="c001">split</span>
and <span class="c001">find</span> and using lists and string slicing to extract portions of the lines.
</span><a id="hevea_default721"></a><span class="c005">
</span><a id="hevea_default722"></a><span class="c005">
</span><a id="hevea_default723"></a></p><p><span class="c006">This task of searching and extracting is so common that Python has a very powerful library
called <span class="c009">regular expressions</span> that handles many of these tasks quite elegantly. The
reason we have not introduced regular expressions earlier in the book is because while they
are very powerful, they are a little complicated and their syntax takes some getting used to. </span></p><p><span class="c006">Regular expressions are almost their own little programming language for searching and parsing
strings. As a matter of fact, entire books have been written on the topic of regular expressions.
In this chapter, we will only cover the basics of regular expressions. For more detail on regular
expressions, see:</span></p><p><span class="c002">http://en.wikipedia.org/wiki/Regular_expression</span></p><p><span class="c002">https://docs.python.org/2/library/re.html</span></p><p><span class="c006">The regular expression library <span class="c001">re</span> must be imported into your program before you can use it.
The simplest use of the regular expression library is the <span class="c001">search()</span> function. The following
program demonstrates a trivial use of the search function.
</span><a id="hevea_default724"></a></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('From:', line) :
        print line
</span></pre><p><span class="c006">We open the file, loop through each line, and use the regular expression <span class="c001">search()</span> to
only print out lines that contain the string &#X201C;From:&#X201D;. This program does not use the real
power of regular expressions, since we could have just as easily used <span class="c001">line.find()</span> to
accomplish the same result.
</span><a id="hevea_default725"></a></p><p><span class="c006">The power of the regular expressions comes when we add special characters to the search string
that allow us to more precisely control which lines match the string. Adding these special
characters to our regular expression allow us to do sophisticated matching and extraction while
writing very little code.</span></p><p><span class="c006">For example, the caret character is used in regular 
expressions to match &#X201C;the beginning&#X201D; of a line.
We could change our program to only match 
lines where &#X201C;From:&#X201D; was at the beginning of the line as follows:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^From:', line) :
        print line
</span></pre><p><span class="c006">Now we will only match lines that <em>start with</em> the string &#X201C;From:&#X201D;. This is still a very
simple example that we could have done equivalently with the <span class="c001">startswith()</span> method from
the string library. But it serves to introduce the notion that regular expressions contain
special action characters that give us more control as to what will match the regular expression.
</span><a id="hevea_default726"></a></p><span class="c005">
</span><!--TOC section id="sec138" <span class="c000"><span class="c005">Character matching in regular expressions</span></span>-->
<h2 class="section" id="sec138"><span class="c006">11.1&#XA0;&#XA0;Character matching in regular expressions</span></h2><!--SEC END --><p><span class="c006">There are a number of other special characters that let us build even more powerful regular
expressions. The most commonly used special character is the period or full stop, which matches
any character.
</span><a id="hevea_default727"></a><span class="c005">
</span><a id="hevea_default728"></a></p><p><span class="c006">In the following example, the regular expression &#X201C;F..m:&#X201D; would match any of the strings
&#X201C;From:&#X201D;, &#X201C;Fxxm:&#X201D;, &#X201C;F12m:&#X201D;, or &#X201C;F!@m:&#X201D; since the period characters in the regular
expression match any character.</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^F..m:', line) :
        print line
</span></pre><p><span class="c006">This is particularly powerful when combined with the ability to indicate that a character can
be repeated any number of times using the &#X201C;*&#X201D; or &#X201C;+&#X201D; characters in your regular expression.
These special characters mean that instead of matching a single character in the search string,
they match zero-or-more characters (in the case of the asterisk) or one-or-more of the characters
(in the case of the plus sign).</span></p><p><span class="c006">We can further narrow down the lines that we match using a repeated <span class="c009">wild card</span> character in
the following example:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^From:.+@', line) :
        print line
</span></pre><p><span class="c006">The search string &#X201C;<code>^</code>From:.+@&#X201D; will successfully match lines that start with &#X201C;From:&#X201D;,
followed by one or more characters (&#X201C;.+&#X201D;), followed by an at-sign. So this will match the
following line:</span></p><pre><span class="c004">
<span class="c009"> From:</span><u> stephen.marquard</u><span class="c009"> @</span>uct.ac.za
</span></pre><p><span class="c006">You can think of the &#X201C;.+&#X201D; wildcard as expanding to match all the characters between the 
colon character and the at-sign. </span></p><pre><span class="c004">
<span class="c009"> From:</span><u>.+</u><span class="c009"> @</span>
</span></pre><p><span class="c006">It is good to think of the plus and asterisk characters as &#X201C;pushy&#X201D;. For example, the following
string would match the last at-sign in the string as the &#X201C;.+&#X201D; pushes outwards, as shown below:</span></p><pre><span class="c004">
<span class="c009"> From:</span><u> stephen.marquard@uct.ac.za, csev@umich.edu, and cwen</u><span class="c009"> @</span>iupui.edu
</span></pre><p><span class="c006">It is possible to tell an asterisk or plus sign not to be so &#X201C;greedy&#X201D; by adding 
another character. See the detailed documentation for information on turning off the 
greedy behavior.
</span><a id="hevea_default729"></a></p><span class="c005">
</span><!--TOC section id="sec139" <span class="c000"><span class="c005">Extracting data using regular expressions</span></span>-->
<h2 class="section" id="sec139"><span class="c006">11.2&#XA0;&#XA0;Extracting data using regular expressions</span></h2><!--SEC END --><p><span class="c006">If we want to extract data from a string in Python we can use the <span class="c001">findall()</span> method to extract
all of the substrings which match a regular expression. Let&#X2019;s use the example of wanting to extract
anything that looks like an email address from any line regardless of format. For example, we want
to pull the email addresses from each of the following lines:</span></p><pre class="verbatim"><span class="c004">From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
Return-Path: &lt;postmaster@collab.sakaiproject.org&gt;
          for &lt;source@collab.sakaiproject.org&gt;;
Received: (from apache@localhost)
Author: stephen.marquard@uct.ac.za
</span></pre><p><span class="c006">We don&#X2019;t want to write code for each of the types of lines, splitting and slicing differently for each
line. This following program uses <span class="c001">findall()</span> to find the lines with email addresses in them and
extract one or more addresses from each of those lines.
</span><a id="hevea_default730"></a><span class="c005">
</span><a id="hevea_default731"></a></p><pre class="verbatim"><span class="c004">import re
s = 'Hello from csev@umich.edu to cwen@iupui.edu about the meeting @2PM'
lst = re.findall('\S+@\S+', s)
print lst
</span></pre><p><span class="c006">The <span class="c001">findall()</span> method searches the string in the second argument and returns a list of
all of the strings that look like email addresses. We are using a two-character sequence 
that matches a non-whitespace character (\S). </span></p><p><span class="c006">The output of the program would be:</span></p><pre class="verbatim"><span class="c004">['csev@umich.edu', 'cwen@iupui.edu']
</span></pre><p><span class="c006">Translating the regular expression, we are looking for substrings that have at least one
non-whitespace character, followed by an at-sign, followed by at least one more non-whitespace
character. The &#X201C;\S+&#X201D; matches as many non-whitespace characters as possible.</span></p><p><span class="c006">The regular expression would match twice (csev@umich.edu and cwen@iupui.edu), but it would not
match the string &#X201C;@2PM&#X201D; because there are no non-blank characters <em>before</em> the at-sign. 
We can use this regular expression in a program to read all the lines in a file and print out
anything that looks like an email address as follows:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('\S+@\S+', line)
    if len(x) &gt; 0 :
        print x
</span></pre><p><span class="c006">We read each line and then extract all the substrings that match our regular expression.
Since <span class="c001">findall()</span> returns a list, we simply check if the number of elements in our returned
list is more than zero to print only lines where we found at least one substring that looks
like an email address.</span></p><p><span class="c006">If we run the program on <span class="c001">mbox.txt</span> we get the following output:</span></p><pre class="verbatim"><span class="c004">['wagnermr@iupui.edu']
['cwen@iupui.edu']
['&lt;postmaster@collab.sakaiproject.org&gt;']
['&lt;200801032122.m03LMFo4005148@nakamura.uits.iupui.edu&gt;']
['&lt;source@collab.sakaiproject.org&gt;;']
['&lt;source@collab.sakaiproject.org&gt;;']
['&lt;source@collab.sakaiproject.org&gt;;']
['apache@localhost)']
['source@collab.sakaiproject.org;']
</span></pre><p><span class="c006">Some of our email addresses have incorrect characters like &#X201C;<code>&lt;</code>&#X201D; or &#X201C;;&#X201D; at the beginning
or end. Let&#X2019;s declare that we are only interested in the portion of the string that starts and
ends with a letter or a number.</span></p><p><span class="c006">To do this, we use another feature of regular expressions. Square brackets are used to indicate a
set of multiple acceptable characters we are willing to consider matching. In a sense, the
&#X201C;\S&#X201D; is asking to match the set of &#X201C;non-whitespace characters&#X201D;. Now we will be
a little more explicit in terms of the characters we will match.</span></p><p><span class="c006">Here is our new regular expression:</span></p><pre class="verbatim"><span class="c004">[a-zA-Z0-9]\S*@\S*[a-zA-Z]
</span></pre><p><span class="c006">This is getting a little complicated and you can begin to see why regular expressions are their own
little language unto themselves. Translating this regular expression, we are looking for substrings
that start with a <em>single</em> lowercase letter, uppercase letter, or number &#X201C;[a-zA-Z0-9]&#X201D;, followed
by zero or more non-blank characters (&#X201C;\S*&#X201D;), followed by an at-sign, followed by zero
or more non-blank characters (&#X201C;\S*&#X201D;), followed by an uppercase or lowercase letter.
Note that we switched from &#X201C;+&#X201D; to &#X201C;*&#X201D; to indicate zero or more non-blank characters since &#X201C;[a-zA-Z0-9]&#X201D;
is already one non-blank character. Remember that the &#X201C;*&#X201D; or &#X201C;+&#X201D; applies to the single character
immediately to the left of the plus or asterisk.
</span><a id="hevea_default732"></a></p><p><span class="c006">If we use this expression in our program, our data is much cleaner:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('[a-zA-Z0-9]\S*@\S*[a-zA-Z]', line)
    if len(x) &gt; 0 :
        print x
</span></pre><pre class="verbatim"><span class="c004">...
['wagnermr@iupui.edu']
['cwen@iupui.edu']
['postmaster@collab.sakaiproject.org']
['200801032122.m03LMFo4005148@nakamura.uits.iupui.edu']
['source@collab.sakaiproject.org']
['source@collab.sakaiproject.org']
['source@collab.sakaiproject.org']
['apache@localhost']
</span></pre><p><span class="c006">Notice that on the &#X201C;source@collab.sakaiproject.org&#X201D; lines, our regular expression
eliminated two letters at the end of the string (&#X201C;<code>&gt;</code>;&#X201D;). This is because when we
append &#X201C;[a-zA-Z]&#X201D; to the end of our regular expression, we are demanding that whatever
string the regular expression parser finds must end with a letter. So when it sees the
&#X201C;<code>&gt;</code>&#X201D; after &#X201C;sakaiproject.org<code>&gt;</code>;&#X201D; it simply stops at the last &#X201C;matching&#X201D;
letter it found (i.e., the &#X201C;g&#X201D; was the last good match).</span></p><p><span class="c006">Also note that the output of the program is a Python list that has a string as the single
element in the list.</span></p><span class="c005">
</span><!--TOC section id="sec140" <span class="c000"><span class="c005">Combining searching and extracting</span></span>-->
<h2 class="section" id="sec140"><span class="c006">11.3&#XA0;&#XA0;Combining searching and extracting</span></h2><!--SEC END --><p><span class="c006">If we want to find numbers on lines that start with the string &#X201C;X-&#X201D; such as:</span></p><pre class="verbatim"><span class="c004">X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000  
</span></pre><p><span class="c006">we don&#X2019;t just want any floating-point numbers from any lines. We only want to extract
numbers from lines that have the above syntax.</span></p><p><span class="c006">We can construct the following regular expression to select the lines:</span></p><pre class="verbatim"><span class="c004">^X-.*: [0-9.]+
</span></pre><p><span class="c006">Translating this, we are saying, we want lines that start with &#X201C;X-&#X201D;, followed by zero or
more characters (&#X201C;.*&#X201D;), followed by a colon (&#X201C;:&#X201D;) and then a space. After the space we are
looking for one or more characters that are either a digit (0-9) or a period &#X201C;[0-9.]+&#X201D;.
Note that inside the square brackets, the period matches an actual period (i.e., it is not a
wildcard between the square brackets).</span></p><p><span class="c006">This is a very tight expression that will pretty much match only the lines we are interested
in as follows:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^X\S*: [0-9.]+', line) :
        print line
</span></pre><p><span class="c006">When we run the program, we see the data nicely filtered to show 
only the lines we are looking for.</span></p><pre class="verbatim"><span class="c004">X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000
X-DSPAM-Confidence: 0.6178
X-DSPAM-Probability: 0.0000
</span></pre><p><span class="c006">But now we have to solve the problem of extracting the numbers. While it would be simple
enough to use <span class="c001">split</span>, we can use another feature of regular expressions to both search
and parse the line at the same time.
</span><a id="hevea_default733"></a></p><p><span class="c006">Parentheses are another special character in regular expressions. When you add parentheses
to a regular expression, they are ignored when matching the string. But when you are using
<span class="c001">findall()</span>, parentheses indicate that while you want the whole expression to match,
you only are interested in extracting a portion of the substring that matches the regular
expression. 
</span><a id="hevea_default734"></a><span class="c005">
</span><a id="hevea_default735"></a></p><p><span class="c006">So we make the following change to our program:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^X\S*: ([0-9.]+)', line)
    if len(x) &gt; 0 :
        print x
</span></pre><p><span class="c006">Instead of calling <span class="c001">search()</span>, we add parentheses around the part of the regular expression
that represents the floating-point number to indicate we only want <span class="c001">findall()</span> to give us
back the floating-point number portion of the matching string.</span></p><p><span class="c006">The output from this program is as follows:</span></p><pre class="verbatim"><span class="c004">['0.8475']
['0.0000']
['0.6178']
['0.0000']
['0.6961']
['0.0000']
..
</span></pre><p><span class="c006">The numbers are still in a list and need to be converted from strings to floating point, but we
have used the power of regular expressions to both search and extract the information we found
interesting.</span></p><p><span class="c006">As another example of this technique, if you look at the file there are a number of lines
of the form:</span></p><pre class="verbatim"><span class="c004">Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
</span></pre><p><span class="c006">If we wanted to extract all of the revision numbers (the integer number at the end of these lines)
using the same technique as above, we could write the following program:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^Details:.*rev=([0-9]+)', line)
    if len(x) &gt; 0:
        print x
</span></pre><p><span class="c006">Translating our regular expression, we are looking for lines that start with &#X201C;Details:&#X201D;,
followed by any number of characters (&#X201C;.*&#X201D;), followed by &#X201C;rev=&#X201D;, and then by one or
more digits. We want to find lines that match the entire expression but we only want to
extract the integer number at the end of the line, so we surround &#X201C;[0-9]+&#X201D; with parentheses. </span></p><p><span class="c006">When we run the program, we get the following output:</span></p><pre class="verbatim"><span class="c004">['39772']
['39771']
['39770']
['39769']
...
</span></pre><p><span class="c006">Remember that the &#X201C;[0-9]+&#X201D; is &#X201C;greedy&#X201D; and it tries to make as large a string of digits as
possible before extracting those digits. This &#X201C;greedy&#X201D; behavior is why we get all five digits
for each number. The regular expression library expands in both directions until it encounters a
non-digit, or the beginning or the end of a line.</span></p><p><span class="c006">Now we can use regular expressions to redo an exercise from earlier in the book where we were
interested in the time of day of each mail message. We looked for lines of the form:</span></p><pre class="verbatim"><span class="c004">From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
</span></pre><p><span class="c006">and wanted to extract the hour of the day for each line. Previously we did this with two calls
to <span class="c001">split</span>. First the line was split into words and then we pulled out the fifth word and split
it again on the colon character to pull out the two characters we were interested in.</span></p><p><span class="c006">While this worked, it actually results in pretty brittle code that is assuming the lines are nicely
formatted. If you were to add enough error checking (or a big try/except block) to insure that your
program never failed when presented with incorrectly formatted lines, the code would balloon to 
10-15 lines of code that was pretty hard to read.</span></p><p><span class="c006">We can do this in a far simpler way with the following regular expression:</span></p><pre class="verbatim"><span class="c004">^From .* [0-9][0-9]:
</span></pre><p><span class="c006">The translation of this regular expression is that we are looking for lines that start with &#X201C;From &#X201D;
(note the space), followed by any number of characters (&#X201C;.*&#X201D;), followed by a space, followed by two
digits &#X201C;[0-9][0-9]&#X201D;, followed by a colon character. This is the definition of the kinds of lines
we are looking for. </span></p><p><span class="c006">In order to pull out only the hour using <span class="c001">findall()</span>, we add parentheses around the two digits
as follows:</span></p><pre class="verbatim"><span class="c004">^From .* ([0-9][0-9]):
</span></pre><p><span class="c006">This results in the following program:</span></p><pre class="verbatim"><span class="c004">import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^From .* ([0-9][0-9]):', line)
    if len(x) &gt; 0 : print x
</span></pre><p><span class="c006">When the program runs, it produces the following output:</span></p><pre class="verbatim"><span class="c004">['09']
['18']
['16']
['15']
...
</span></pre><span class="c005">
</span><!--TOC section id="sec141" <span class="c000"><span class="c005">Escape character</span></span>-->
<h2 class="section" id="sec141"><span class="c006">11.4&#XA0;&#XA0;Escape character</span></h2><!--SEC END --><p><span class="c006">Since we use special characters in regular expressions to match the beginning or end of 
a line or specify wild cards, we need a way to indicate that these characters are &#X201C;normal&#X201D; 
and we want to match the actual character such as a dollar sign or caret.</span></p><p><span class="c006">We can indicate that we want to simply match a character by prefixing that character 
with a backslash. For example, we can find money amounts with the following regular
expression.</span></p><pre class="verbatim"><span class="c004">import re
x = 'We just received $10.00 for cookies.'
y = re.findall('\$[0-9.]+',x)
</span></pre><p><span class="c006">Since we prefix the dollar sign with a backslash, it actually matches the dollar sign
in the input string instead of matching the &#X201C;end of line&#X201D;, and the rest of the regular
expression matches one or more digits or the period character. <em>Note:</em> Inside 
square brackets, characters are not &#X201C;special&#X201D;. So when we say &#X201C;[0-9.]&#X201D;, it really 
means digits or a period. Outside of square brackets, a period is the &#X201C;wild-card&#X201D; 
character and matches any character. Inside square brackets, the period is a period.</span></p><span class="c005">
</span><!--TOC section id="sec142" <span class="c000"><span class="c005">Summary</span></span>-->
<h2 class="section" id="sec142"><span class="c006">11.5&#XA0;&#XA0;Summary</span></h2><!--SEC END --><p><span class="c006">While this only scratched the surface of regular expressions, we have learned a bit about
the language of regular expressions. They are search strings with special characters in them
that communicate your wishes to the regular expression system as to what defines &#X201C;matching&#X201D;
and what is extracted from the matched strings. Here are some of those special characters
and character sequences:</span></p><p><span class="c006"><code>^</code> <br />
Matches the beginning of the line.</span></p><p><span class="c006">$ <br />
Matches the end of the line.</span></p><p><span class="c006">. <br />
Matches any character (a wildcard).</span></p><p><span class="c006">\s <br />
Matches a whitespace character.</span></p><p><span class="c006">\S <br />
Matches a non-whitespace character (opposite of \s).</span></p><p><span class="c006">* <br />
Applies to the immediately preceding character and indicates to match zero or more of the
preceding character(s).</span></p><p><span class="c006">*? <br />
Applies to the immediately preceding character and indicates to match zero or more of the
preceding character(s) in &#X201C;non-greedy mode&#X201D;.</span></p><p><span class="c006">+ <br />
Applies to the immediately preceding character and indicates to match one or more of the 
preceding character(s).</span></p><p><span class="c006">+? <br />
Applies to the immediately preceding character and indicates to match one or more of the 
preceding character(s) in &#X201C;non-greedy mode&#X201D;.</span></p><p><span class="c006">[aeiou] <br />
Matches a single character as long as that character is in the specified set. In this example,
it would match &#X201C;a&#X201D;, &#X201C;e&#X201D;, &#X201C;i&#X201D;, &#X201C;o&#X201D;, or &#X201C;u&#X201D;, but no other characters.</span></p><p><span class="c006">[a-z0-9] <br />
You can specify ranges of characters using the minus sign. This example is a single character
that must be a lowercase letter or a digit.</span></p><p><span class="c006">[<code>^</code>A-Za-z] <br />
When the first character in the set notation is a caret, it inverts the logic. This example
matches a single character that is anything <em>other than</em> an uppercase or lowercase letter.</span></p><p><span class="c006">( ) <br />
When parentheses are added to a regular expression, they are ignored for the purpose of matching,
but allow you to extract a particular subset of the matched string rather than the whole string
when using <span class="c001">findall()</span>.</span></p><p><span class="c006">\b <br />
Matches the empty string, but only at the start or end of a word.</span></p><p><span class="c006">\B <br />
Matches the empty string, but not at the start or end of a word.</span></p><p><span class="c006">\d <br />
Matches any decimal digit; equivalent to the set [0-9].</span></p><p><span class="c006">\D <br />
Matches any non-digit character; equivalent to the set [<code>^</code>0-9].</span></p><span class="c005">
</span><!--TOC section id="sec143" <span class="c000"><span class="c005">Bonus section for Unix users</span></span>-->
<h2 class="section" id="sec143"><span class="c006">11.6&#XA0;&#XA0;Bonus section for Unix users</span></h2><!--SEC END --><p><span class="c006">Support for searching files using regular expressions was built into the Unix operating system 
since the 1960s and it is available in nearly all programming languages in one form or another.</span></p><p><a id="hevea_default736"></a><span class="c006">
As a matter of fact, there is a command-line program built into Unix 
called <span class="c009">grep</span> (Generalized Regular Expression Parser) that does pretty much 
the same as the <span class="c001">search()</span> examples in this chapter. So if you have a 
Macintosh or Linux system, you can try the following commands in your command-line window.</span></p><pre class="verbatim"><span class="c004">$ grep '^From:' mbox-short.txt
From: stephen.marquard@uct.ac.za
From: louis@media.berkeley.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
</span></pre><p><span class="c006">This tells <span class="c001">grep</span> to show you lines that start with the string &#X201C;From:&#X201D; in the file
<span class="c001">mbox-short.txt</span>. If you experiment with the <span class="c001">grep</span> command a bit and read the
documentation for <span class="c001">grep</span>, you will find some subtle differences between the regular
expression support in Python and the regular expression support in <span class="c001">grep</span>. As an example,
<span class="c001">grep</span> does not support the non-blank character &#X201C;\S&#X201D; so you will need to
use the slightly more complex set notation &#X201C;[<code>^</code> ]&#X201D;, which simply means match a 
character that is anything other than a space.</span></p><span class="c005">
</span><!--TOC section id="sec144" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec144"><span class="c006">11.7&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c006">Python has some simple and rudimentary built-in documentation that can be quite helpful if
you need a quick refresher to trigger your memory about the exact name of a particular method.
This documentation can be viewed in the Python interpreter in interactive mode.</span></p><p><span class="c006">You can bring up an interactive help system using <span class="c001">help()</span>.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; help()

Welcome to Python 2.6!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help&gt; modules
</span></pre><p><span class="c006">If you know what module you want to use, you can use the <span class="c001">dir()</span> command to find the methods in the module as follows:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; import re
&gt;&gt;&gt; dir(re)
[.. 'compile', 'copy_reg', 'error', 'escape', 'findall', 
'finditer', 'match', 'purge', 'search', 'split', 'sre_compile', 
'sre_parse', 'sub', 'subn', 'sys', 'template']
</span></pre><p><span class="c006">You can also get a small amount of documentation on a particular method using the dir command.</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; help (re.search)
Help on function search in module re:

search(pattern, string, flags=0)
    Scan through string looking for a match to the pattern, returning
    a match object, or None if no match was found.
&gt;&gt;&gt; 
</span></pre><p><span class="c006">The built-in documentation is not very extensive, but it can be helpful when you are in a hurry
or don&#X2019;t have access to a web browser or search engine.</span></p><span class="c005">
</span><!--TOC section id="sec145" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec145"><span class="c006">11.8&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">brittle code:</span></dt><dd class="dd-description"><span class="c006">
Code that works when the input data is in a particular format but is prone to breakage
if there is some deviation from the correct format. We call this &#X201C;brittle code&#X201D; 
because it is easily broken.</span></dd><dt class="dt-description"><span class="c010">greedy matching:</span></dt><dd class="dd-description"><span class="c006">
The notion that the &#X201C;+&#X201D; and &#X201C;*&#X201D; characters in a regular expression expand outward to
match the largest possible string.
</span><a id="hevea_default737"></a><span class="c005">
</span><a id="hevea_default738"></a></dd><dt class="dt-description"><span class="c010">grep:</span></dt><dd class="dd-description"><span class="c006">
A command available in most Unix systems that searches through text files looking for lines
that match regular expressions. The command name stands for "Generalized Regular Expression Parser".
</span><a id="hevea_default739"></a></dd><dt class="dt-description"><span class="c010">regular expression:</span></dt><dd class="dd-description"><span class="c006">
A language for expressing more complex search strings. A regular expression may contain
special characters that indicate that a search only matches at the beginning or end of a line
or many other similar capabilities.</span></dd><dt class="dt-description"><span class="c010">wild card:</span></dt><dd class="dd-description"><span class="c006">
A special character that matches any character. In regular expressions the wild-card
character is the period.
</span><a id="hevea_default740"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec146" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec146"><span class="c006">11.9&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Write a simple program to simulate the operation of the <span class="c001">grep</span> command 
on Unix. Ask the user to enter a regular expression and count the number
of lines that matched the regular expression:</em></span><pre class="verbatim"><span class="c004"><em>$ python grep.py
Enter a regular expression: ^Author
mbox.txt had 1798 lines that matched ^Author

$ python grep.py
Enter a regular expression: ^X-
mbox.txt had 14368 lines that matched ^X-

$ python grep.py
Enter a regular expression: java$
mbox.txt had 4218 lines that matched java$
</em></span></pre></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write a program to look for lines of the form</em></span><p><span class="c006"><em><code>New Revision: 39772</code></em></span></p><p><span class="c006"><em>and extract the number from each of the lines using a regular expression
and the <span class="c001">findall()</span> method. Compute the average of the numbers and 
print out the average.</em></span></p><pre class="verbatim"><span class="c004"><em>Enter file:mbox.txt 
38549.7949721

Enter file:mbox-short.txt
39756.9259259
</em></span></pre></div><span class="c005">
</span><!--TOC chapter id="sec147" <span class="c000"><span class="c005">Networked programs</span></span>-->
<h1 class="chapter" id="sec147"><span class="c006">Chapter&#XA0;12&#XA0;&#XA0;Networked programs</span></h1><!--SEC END --><p><span class="c006">While many of the examples in this book have focused on reading
files and looking for data in those files, there are many different
sources of information when one considers the Internet.</span></p><p><span class="c006">In this chapter we will pretend to be a web browser and retrieve web
pages using the HyperText Transport Protocol (HTTP). Then we will read
through the web page data and parse it.</span></p><span class="c005">
</span><!--TOC section id="sec148" <span class="c000"><span class="c005">HyperText Transport Protocol - HTTP</span></span>-->
<h2 class="section" id="sec148"><span class="c006">12.1&#XA0;&#XA0;HyperText Transport Protocol - HTTP</span></h2><!--SEC END --><p><span class="c006">The network protocol that powers the web is actually quite simple and 
there is built-in support in Python called <span class="c001">sockets</span> which makes it very 
easy to make network connections and retrieve data over those
sockets in a Python program.</span></p><p><span class="c006">A <span class="c009">socket</span> is much like a file, except that a single socket 
provides a two-way connection between two programs. 
You can both read from and write to the same socket. If you write something to 
a socket, it is sent to the application at the other end of the socket. If you 
read from the socket, you are given the data which the other application has sent.</span></p><p><span class="c006">But if you try to read a socket when the program on the other end of the socket
has not sent any data&#X2014;you just sit and wait. If the programs on both ends
of the socket simply wait for some data without sending anything, they will wait for
a very long time.</span></p><p><span class="c006">So an important part of programs that communicate over the Internet is to have some
sort of protocol. A protocol is a set of precise rules that determine who
is to go first, what they are to do, and then what the responses are to that message,
and who sends next, and so on. In a sense the two applications at either end 
of the socket are doing a dance and making sure not to step on each other&#X2019;s toes.</span></p><p><span class="c006">There are many documents which describe these network protocols. The HyperText Transport 
Protocol is described in the following document:</span></p><p><span class="c002">http://www.w3.org/Protocols/rfc2616/rfc2616.txt</span></p><p><span class="c006">This is a long and complex 176-page document with a lot of detail. If you 
find it interesting, feel free to read it all. But if you take a look around page 36 of
RFC2616 you will find the syntax for the GET request. To request a document from a web
server, we make a connection to the <span class="c001">www.py4inf.com</span> server on port 80, and then
send a line of the form</span></p><p><span class="c002">GET http://www.py4inf.com/code/romeo.txt HTTP/1.0 </span></p><p><span class="c006">where the second parameter is the web page we are requesting, and then 
we also send a blank line. The web server will respond with some 
header information about the document and a blank line
followed by the document content.</span></p><span class="c005">
</span><!--TOC section id="sec149" <span class="c000"><span class="c005">The World&#X2019;s Simplest Web Browser</span></span>-->
<h2 class="section" id="sec149"><span class="c006">12.2&#XA0;&#XA0;The World&#X2019;s Simplest Web Browser</span></h2><!--SEC END --><p><span class="c006">Perhaps the easiest way to show how the HTTP protocol works is to write a very 
simple Python program that makes a connection to a web server and follows
the rules of the HTTP protocol to requests a document 
and display what the server sends back.</span></p><pre class="verbatim"><span class="c004">import socket

mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('www.py4inf.com', 80))
mysock.send('GET http://www.py4inf.com/code/romeo.txt HTTP/1.0\n\n')

while True:
    data = mysock.recv(512)
    if ( len(data) &lt; 1 ) :
        break
    print data

mysock.close()
</span></pre><p><span class="c006">First the program makes a connection to port 80 on 
the server <span class="c001">www.py4inf.com</span>.
Since our program is playing the role of the &#X201C;web browser&#X201D;, the HTTP
protocol says we must send the GET command followed by a blank line.</span></p><div class="center"><span class="c006"><img src="book013.png" /></span></div><p><span class="c006">Once we send that blank line, we write a loop that receives data 
in 512-character chunks from the socket and prints the data out 
until there is no more data to read (i.e., the recv() returns 
an empty string).</span></p><p><span class="c006">The program produces the following output:</span></p><pre class="verbatim"><span class="c004">HTTP/1.1 200 OK
Date: Sun, 14 Mar 2010 23:52:41 GMT
Server: Apache
Last-Modified: Tue, 29 Dec 2009 01:31:22 GMT
ETag: "143c1b33-a7-4b395bea"
Accept-Ranges: bytes
Content-Length: 167
Connection: close
Content-Type: text/plain

But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</span></pre><p><span class="c006">The output starts with headers which the web server sends
to describe the document.
For example, the <span class="c001">Content-Type</span> header indicates that
the document is a plain text document (<span class="c001">text/plain</span>).</span></p><p><span class="c006">After the server sends us the headers, it adds a blank line
to indicate the end of the headers, and then sends the actual
data of the file <span class="c001">romeo.txt</span>.</span></p><p><span class="c006">This example shows how to make a low-level network connection
with sockets. Sockets can be used to communicate with a web
server or with a mail server or many other kinds of servers.
All that is needed is to find the document which describes
the protocol and write the code to send and receive the data
according to the protocol.</span></p><p><span class="c006">However, since the protocol that we use most commonly is
the HTTP web protocol, Python has a special 
library specifically designed to support the HTTP protocol 
for the retrieval of documents and data over the web.</span></p><span class="c005">
</span><!--TOC section id="sec150" <span class="c000"><span class="c005">Retrieving an image over HTTP</span></span>-->
<h2 class="section" id="sec150"><span class="c006">12.3&#XA0;&#XA0;Retrieving an image over HTTP</span></h2><!--SEC END --><p><a id="hevea_default741"></a><span class="c005">
</span><a id="hevea_default742"></a><span class="c005">
</span><a id="hevea_default743"></a><span class="c006">
In the above example, we retrieved a plain text file 
which had newlines in the file and we simply copied the
data to the screen as the program ran. We can use a similar
program to retrieve an image across using HTTP. Instead
of copying the data to the screen as the program runs,
we accumulate the data in a string, trim off the headers,
and then save the image data to a file as follows:</span></p><pre class="verbatim"><span class="c004">import socket
import time

mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('www.py4inf.com', 80))
mysock.send('GET http://www.py4inf.com/cover.jpg HTTP/1.0\n\n')


count = 0
picture = "";
while True:
    data = mysock.recv(5120)
    if ( len(data) &lt; 1 ) : break
    # time.sleep(0.25)
    count = count + len(data)
    print len(data),count
    picture = picture + data

mysock.close()

# Look for the end of the header (2 CRLF)
pos = picture.find("\r\n\r\n");
print 'Header length',pos
print picture[:pos]

# Skip past the header and save the picture data
picture = picture[pos+4:]
fhand = open("stuff.jpg","wb")
fhand.write(picture);
fhand.close()
</span></pre><p><span class="c006">When the program runs it produces the following output:</span></p><pre class="verbatim"><span class="c004">$ python urljpeg.py 
2920 2920
1460 4380
1460 5840
1460 7300
...
1460 62780
1460 64240
2920 67160
1460 68620
1681 70301
Header length 240
HTTP/1.1 200 OK
Date: Sat, 02 Nov 2013 02:15:07 GMT
Server: Apache
Last-Modified: Sat, 02 Nov 2013 02:01:26 GMT
ETag: "19c141-111a9-4ea280f8354b8"
Accept-Ranges: bytes
Content-Length: 70057
Connection: close
Content-Type: image/jpeg
</span></pre><p><span class="c006">You can see that for this url, the 
<span class="c001">Content-Type</span> header indicates that
body of the document is an image (<span class="c001">image/jpeg</span>).
Once the program completes, you can view the image data by opening
the file <span class="c001">stuff.jpg</span> in an image viewer.</span></p><p><span class="c006">As the program runs, you can see that we don&#X2019;t get 5120 characters
each time we call the <span class="c001">recv()</span> method.
We get as many characters as have been transferred across the network 
to us by the web server at the moment we call <span class="c001">recv()</span>. 
In this example, we either get 1460 or 2920 characters each time we
request up to 5120 characters of data.</span></p><p><span class="c006">Your results may be different depending on your network speed. Also
note that on the last call to <span class="c001">recv()</span> we get 1681 bytes, which is the end
of the stream, and in the next call to <span class="c001">recv()</span> we get a zero-length
string that tells us that the server has called <span class="c001">close()</span> on its end 
of the socket and there is no more data forthcoming.</span></p><p><a id="hevea_default744"></a><span class="c005">
</span><a id="hevea_default745"></a><span class="c006">
We can slow down our successive <span class="c001">recv()</span> calls by uncommenting the call 
to <span class="c001">time.sleep()</span>. This way, we wait a quarter of a second after each call
so that the server can &#X201C;get ahead&#X201D; of us and send more data to us
before we call <span class="c001">recv()</span> again. With the delay, in place the program 
executes as follows:
</span></p><pre class="verbatim"><span class="c004">$ python urljpeg.py 
1460 1460
5120 6580
5120 11700
...
5120 62900
5120 68020
2281 70301
Header length 240
HTTP/1.1 200 OK
Date: Sat, 02 Nov 2013 02:22:04 GMT
Server: Apache
Last-Modified: Sat, 02 Nov 2013 02:01:26 GMT
ETag: "19c141-111a9-4ea280f8354b8"
Accept-Ranges: bytes
Content-Length: 70057
Connection: close
Content-Type: image/jpeg
</span></pre><p><span class="c006">Now other than the first and last calls to <span class="c001">recv()</span>, we now get 
5120 characters each time we ask for new data. </span></p><p><span class="c006">There is a buffer between the server making <span class="c001">send()</span> requests 
and our application making <span class="c001">recv()</span> requests. When we run the 
program with the delay in place, at some point the server might 
fill up the buffer in the socket and be forced to pause until our
program starts to empty the buffer. The pausing of either the 
sending application or the receiving application is called 
&#X201C;flow control&#X201D;.
</span><a id="hevea_default746"></a></p><span class="c005">
</span><!--TOC section id="sec151" <span class="c000"><span class="c005">Retrieving web pages with </span></span><span class="c000"><span class="c005"><span class="c001">urllib</span></span></span>-->
<h2 class="section" id="sec151"><span class="c006">12.4&#XA0;&#XA0;Retrieving web pages with <span class="c001">urllib</span></span></h2><!--SEC END --><p><span class="c006">While we can manually send and receive data over HTTP 
using the socket library, there is a much simpler way to 
perform this common task in Python by 
using the <span class="c001">urllib</span> library.</span></p><p><span class="c006">Using <span class="c001">urllib</span>,
you can treat a web page much like a file. You simply
indicate which web page you would like to retrieve and
<span class="c001">urllib</span> handles all of the HTTP protocol and header 
details.</span></p><p><span class="c006">The equivalent code to read the <span class="c001">romeo.txt</span> file
from the web using <span class="c001">urllib</span> is as follows:</span></p><pre class="verbatim"><span class="c004">import urllib

fhand = urllib.urlopen('http://www.py4inf.com/code/romeo.txt')
for line in fhand:
   print line.strip()
</span></pre><p><span class="c006">Once the web page has been opened with 
<span class="c001">urllib.urlopen</span>, we can treat it like 
a file and read through it using a 
<span class="c001">for</span> loop. </span></p><p><span class="c006">When the program runs, we only see the output
of the contents of the file. The headers
are still sent, but the <span class="c001">urllib</span> code
consumes the headers and only returns the 
data to us.</span></p><pre class="verbatim"><span class="c004">But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</span></pre><p><span class="c006">As an example, we can write 
a program to retrieve the data for
<span class="c001">romeo.txt</span> and compute the frequency
of each word in the file as follows:</span></p><pre class="verbatim"><span class="c004">import urllib

counts = dict()
fhand = urllib.urlopen('http://www.py4inf.com/code/romeo.txt')
for line in fhand:
    words = line.split()
    for word in words:
        counts[word] = counts.get(word,0) + 1   
print counts
</span></pre><p><span class="c006">Again, once we have opened the web page, 
we can read it like a local file.</span></p><span class="c005">
</span><!--TOC section id="sec152" <span class="c000"><span class="c005">Parsing HTML and scraping the web</span></span>-->
<h2 class="section" id="sec152"><span class="c006">12.5&#XA0;&#XA0;Parsing HTML and scraping the web</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default747"></a><span class="c005">
</span><a id="hevea_default748"></a></p><p><span class="c006">One of the common uses of the <span class="c001">urllib</span> capability in Python is 
to <span class="c009">scrape</span> the web. Web scraping is when we write a program
that pretends to be a web browser and retrieves pages, then 
examines the data in those pages looking for patterns.</span></p><p><span class="c006">As an example, a search engine such as Google will look at the source 
of one web page and extract the links to other pages and retrieve
those pages, extracting links, and so on. Using this technique,
Google <span class="c009">spiders</span> its way through nearly all of the pages on 
the web. </span></p><p><span class="c006">Google also uses the frequency of links from pages it finds 
to a particular page as one measure of how &#X201C;important&#X201D; 
a page is and how high the page should appear in its search results.</span></p><span class="c005">
</span><!--TOC section id="sec153" <span class="c000"><span class="c005">Parsing HTML using regular expressions</span></span>-->
<h2 class="section" id="sec153"><span class="c006">12.6&#XA0;&#XA0;Parsing HTML using regular expressions</span></h2><!--SEC END --><p><span class="c006">One simple way to parse HTML is to use regular expressions to repeatedly
search for and extract substrings that match a particular pattern.</span></p><p><span class="c006">Here is a simple web page:</span></p><pre class="verbatim"><span class="c004">&lt;h1&gt;The First Page&lt;/h1&gt;
&lt;p&gt;
If you like, you can switch to the
&lt;a href="http://www.dr-chuck.com/page2.htm"&gt;
Second Page&lt;/a&gt;.
&lt;/p&gt;
</span></pre><p><span class="c006">We can construct a well-formed regular expression to match
and extract the link values from the above text as follows:</span></p><pre class="verbatim"><span class="c004">href="http://.+?"
</span></pre><p><span class="c006">Our regular expression looks for strings that start with
&#X201C;href="http://&#X201D;, followed by one or more characters
(&#X201C;.+?&#X201D;), followed by another double quote. The question mark 
added to the &#X201C;.+?&#X201D; indicates that the match is to be done
in a &#X201C;non-greedy&#X201D; fashion instead of a &#X201C;greedy&#X201D; fashion. 
A non-greedy match tries to find the <em>smallest</em> possible matching
string and a greedy match tries to find the <em>largest</em> possible
matching string.
</span><a id="hevea_default749"></a><span class="c005">
</span><a id="hevea_default750"></a></p><p><span class="c006">We add parentheses to our regular expression to indicate
which part of our matched string we would like to extract, and
produce the following program:
</span><a id="hevea_default751"></a><span class="c005">
</span><a id="hevea_default752"></a></p><pre class="verbatim"><span class="c004">import urllib
import re

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
links = re.findall('href="(http://.*?)"', html)
for link in links:
    print link
</span></pre><p><span class="c006">The <span class="c001">findall</span> regular expression method will give us a list of all
of the strings that match our regular expression, returning only
the link text between the double quotes.</span></p><p><span class="c006">When we run the program, we get the following output:</span></p><pre class="verbatim"><span class="c004">python urlregex.py 
Enter - http://www.dr-chuck.com/page1.htm
http://www.dr-chuck.com/page2.htm

python urlregex.py 
Enter - http://www.py4inf.com/book.htm
http://www.greenteapress.com/thinkpython/thinkpython.html
http://allendowney.com/
http://www.py4inf.com/code
http://www.lib.umich.edu/espresso-book-machine
http://www.py4inf.com/py4inf-slides.zip
</span></pre><p><span class="c006">Regular expressions work very nicely when your HTML is well formatted
and predictable. But since there are a lot of &#X201C;broken&#X201D; HTML pages
out there, a solution only using regular expressions might either miss
some valid links or end up with bad data.</span></p><p><span class="c006">This can be solved by using a robust HTML parsing library.</span></p><span class="c005">
</span><!--TOC section id="sec154" <span class="c000"><span class="c005">Parsing HTML using BeautifulSoup</span></span>-->
<h2 class="section" id="sec154"><span class="c006">12.7&#XA0;&#XA0;Parsing HTML using BeautifulSoup</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default753"></a></p><p><span class="c006">There are a number of Python libraries which can help you parse
HTML and extract data from the pages. Each of the libraries
has its strengths and weaknesses and you can pick one based on 
your needs.</span></p><p><span class="c006">As an example, we will simply parse some HTML input 
and extract links using the <span class="c009">BeautifulSoup</span> library. 
You can download and install the BeautifulSoup code
from:</span></p><p><span class="c002">http://www.crummy.com/software/</span></p><p><span class="c006">You can download and &#X201C;install&#X201D; BeautifulSoup or you 
can simply place the <span class="c001">BeautifulSoup.py</span> file in the
same folder as your application.</span></p><p><span class="c006">Even though HTML looks like XML</span><sup><a id="text14" href="#note14"><span class="c006">1</span></a></sup><span class="c006"> and some pages are carefully 
constructed to be XML, most HTML is generally broken in ways
that cause an XML parser to reject the entire page of HTML as
improperly formed. BeautifulSoup tolerates highly flawed 
HTML and still lets you easily extract the data you need.</span></p><p><span class="c006">We will use <span class="c001">urllib</span> to read the page and then use
<span class="c001">BeautifulSoup</span> to extract the <span class="c001">href</span> attributes from the
anchor (<span class="c001">a</span>) tags.
</span><a id="hevea_default754"></a><span class="c005">
</span><a id="hevea_default755"></a><span class="c005">
</span><a id="hevea_default756"></a></p><pre class="verbatim"><span class="c004">import urllib
from BeautifulSoup import *

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)

# Retrieve all of the anchor tags
tags = soup('a')
for tag in tags:
   print tag.get('href', None)
</span></pre><p><span class="c006">The program prompts for a web address, then opens the web
page, reads the data and passes the data to the BeautifulSoup
parser, and then retrieves all of the anchor tags and prints
out the <span class="c001">href</span> attribute for each tag.</span></p><p><span class="c006">When the program runs it looks as follows:</span></p><pre class="verbatim"><span class="c004">python urllinks.py 
Enter - http://www.dr-chuck.com/page1.htm
http://www.dr-chuck.com/page2.htm

python urllinks.py 
Enter - http://www.py4inf.com/book.htm
http://www.greenteapress.com/thinkpython/thinkpython.html
http://allendowney.com/
http://www.si502.com/
http://www.lib.umich.edu/espresso-book-machine
http://www.py4inf.com/code
http://www.pythonlearn.com/
</span></pre><p><span class="c006">You can use BeautifulSoup to pull out various parts of each 
tag as follows:</span></p><pre class="verbatim"><span class="c004">import urllib
from BeautifulSoup import *

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)

# Retrieve all of the anchor tags
tags = soup('a')
for tag in tags:
   # Look at the parts of a tag
   print 'TAG:',tag
   print 'URL:',tag.get('href', None)
   print 'Content:',tag.contents[0]
   print 'Attrs:',tag.attrs
</span></pre><p><span class="c006">This produces the following output:</span></p><pre class="verbatim"><span class="c004">python urllink2.py 
Enter - http://www.dr-chuck.com/page1.htm
TAG: &lt;a href="http://www.dr-chuck.com/page2.htm"&gt;
Second Page&lt;/a&gt;
URL: http://www.dr-chuck.com/page2.htm
Content: [u'\nSecond Page']
Attrs: [(u'href', u'http://www.dr-chuck.com/page2.htm')]
</span></pre><p><span class="c006">These examples only begin to show the power of BeautifulSoup
when it comes to parsing HTML. See the documentation 
and samples at
<span class="c001">http://www.crummy.com/software/BeautifulSoup/</span> for more detail.</span></p><span class="c005">
</span><!--TOC section id="sec155" <span class="c000"><span class="c005">Reading binary files using urllib</span></span>-->
<h2 class="section" id="sec155"><span class="c006">12.8&#XA0;&#XA0;Reading binary files using urllib</span></h2><!--SEC END --><p><span class="c006">Sometimes you want to retrieve a non-text (or binary) file such as
an image or video file. The data in these files is generally not 
useful to print out, but you can easily make a copy of a URL to a local
file on your hard disk using <span class="c001">urllib</span>.
</span><a id="hevea_default757"></a></p><p><span class="c006">The pattern is to open the URL and use <span class="c001">read</span> to download the entire
contents of the document into a string variable (<span class="c001">img</span>) then write that
information to a local file as follows:</span></p><pre class="verbatim"><span class="c004">img = urllib.urlopen('http://www.py4inf.com/cover.jpg').read()
fhand = open('cover.jpg', 'w')
fhand.write(img)
fhand.close()
</span></pre><p><span class="c006">This program reads all of the data in at once across the network and 
stores it in the variable <span class="c001">img</span> in the main memory of your computer,
then opens the file <span class="c001">cover.jpg</span> and writes the data out to your 
disk. This will work if the size of the file is less than the size
of the memory of your computer.</span></p><p><span class="c006">However if this is a large audio or video file, this program may crash
or at least run extremely slowly when your computer runs out of memory.
In order to avoid running out of memory, we retrieve the data in blocks
(or buffers) and then write each block to your disk before retrieving
the next block. This way the program can read any size file without
using up all of the memory you have in your computer.</span></p><pre class="verbatim"><span class="c004">import urllib

img = urllib.urlopen('http://www.py4inf.com/cover.jpg')
fhand = open('cover.jpg', 'w')
size = 0
while True:
    info = img.read(100000)
    if len(info) &lt; 1 : break
    size = size + len(info)
    fhand.write(info)

print size,'characters copied.'
fhand.close()
</span></pre><p><span class="c006">In this example, we read only 100,000 characters at a time and then 
write those characters to the <span class="c001">cover.jpg</span> file
before retrieving the next 100,000 characters of data from the
web.</span></p><p><span class="c006">This program runs as follows:</span></p><pre class="verbatim"><span class="c004">python curl2.py 
568248 characters copied.
</span></pre><p><span class="c006">If you have a Unix or Macintosh computer, you probably have a command
built in to your operating system that performs this operation
as follows:
</span><a id="hevea_default758"></a></p><pre class="verbatim"><span class="c004">curl -O http://www.py4inf.com/cover.jpg
</span></pre><p><span class="c006">The command <span class="c001">curl</span> is short for &#X201C;copy URL&#X201D; and so these two 
examples are cleverly named <span class="c001">curl1.py</span> and <span class="c001">curl2.py</span> on 
<span class="c001">www.py4inf.com/code</span> as they implement similar functionality
to the <span class="c001">curl</span> command. There is also a <span class="c001">curl3.py</span> sample 
program that does this task a little more effectively, in case you
actually want to use this pattern in a program you are writing.</span></p><span class="c005">
</span><!--TOC section id="sec156" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec156"><span class="c006">12.9&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">BeautifulSoup:</span></dt><dd class="dd-description"><span class="c006"> A Python library for parsing HTML documents
and extracting data from HTML documents
that compensates for most of the imperfections in the HTML that browsers
generally ignore.
You can download the BeautifulSoup code
from 
<span class="c001">www.crummy.com</span>.
</span><a id="hevea_default759"></a></dd><dt class="dt-description"><span class="c010">port:</span></dt><dd class="dd-description"><span class="c006"> A number that generally indicates which application 
you are contacting when you make a socket connection to a server.
As an example, web traffic usually uses port 80 while email 
traffic uses port 25.
</span><a id="hevea_default760"></a></dd><dt class="dt-description"><span class="c010">scrape:</span></dt><dd class="dd-description"><span class="c006"> When a program pretends to be a web browser and
retrieves a web page, then looks at the web page content. 
Often programs are following the links in one page to find the next
page so they can traverse a network of pages or a social network.
</span><a id="hevea_default761"></a></dd><dt class="dt-description"><span class="c010">socket:</span></dt><dd class="dd-description"><span class="c006"> A network connection between two applications
where the applications can send and receive data in either direction.
</span><a id="hevea_default762"></a></dd><dt class="dt-description"><span class="c010">spider:</span></dt><dd class="dd-description"><span class="c006"> The act of a web search engine retrieving a page and
then all the pages linked from a page and so on until they have 
nearly all of the pages on the Internet which they 
use to build their search index.
</span><a id="hevea_default763"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec157" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec157"><span class="c006">12.10&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Change the socket program <span class="c001">socket1.py</span> to prompt the user for 
the URL so it can read any web page. 
You can use <span class="c001">split(&#X2019;/&#X2019;)</span> to break the URL into its component parts
so you can extract the host name for the socket <span class="c001">connect</span> call.
Add error checking using <span class="c001">try</span> and <span class="c001">except</span> to handle the condition where the 
user enters an improperly formatted or non-existent URL. 
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Change your socket program so that it counts the number of characters it has received 
and stops displaying any text after it has shown 3000 characters. The program 
should retrieve the entire document and count the total number of characters 
and display the count of the number of characters at the end of the document.
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;3</span>&#XA0;&#XA0;<em>
Use <span class="c001">urllib</span> to replicate the previous exercise of (1) retrieving the document
from a URL, (2) displaying up to 3000 characters, and (3) counting the overall number
of characters in the document. Don&#X2019;t worry about the headers for this exercise, simply
show the first 3000 characters of the document contents.
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;4</span>&#XA0;&#XA0;<em>
Change the <span class="c001">urllinks.py</span> program to extract and count 
paragraph (p) tags from the retrieved HTML document and 
display the count of the paragraphs as the 
output of your program. 
Do not display the paragraph text, only count them.
Test your program on several small web pages
as well as some larger web pages.
</em></span></div><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;5</span>&#XA0;&#XA0;<em>
(Advanced) Change the socket program so that it only shows data after the 
headers and a blank line have been received. Remember that <span class="c001">recv</span> is
receiving characters (newlines and all), not lines.
</em></span></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note14" href="#text14"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">The XML format is described in
the next chapter.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec158" <span class="c000"><span class="c005">Using Web Services</span></span>-->
<h1 class="chapter" id="sec158"><span class="c006">Chapter&#XA0;13&#XA0;&#XA0;Using Web Services</span></h1><!--SEC END --><p><span class="c006">Once it became easy to retrieve documents and parse documents 
over HTTP using programs, it did not take long to develop 
an approach where we started producing documents that were specifically
designed to be consumed by other 
programs (i.e., not HTML to be displayed in a browser).</span></p><p><span class="c006">There are two common formats that we use when exchanging data across the web.
The &#X201C;eXtensible Markup Language&#X201D; or XML has been in use for a very long time 
and is best suited for exchanging document-style data. When programs just want 
to exchange dictionaries, lists, or other internal information with each other,
they use JavaScript Object Notation or JSON (see <span class="c001">www.json.org</span>). 
We will look at both formats.</span></p><span class="c005">
</span><!--TOC section id="sec159" <span class="c000"><span class="c005">eXtensible Markup Language - XML</span></span>-->
<h2 class="section" id="sec159"><span class="c006">13.1&#XA0;&#XA0;eXtensible Markup Language - XML</span></h2><!--SEC END --><p><span class="c006">XML looks very similar to HTML, but XML is more structured 
than HTML. Here is a sample of an XML document:</span></p><pre class="verbatim"><span class="c004">&lt;person&gt;
  &lt;name&gt;Chuck&lt;/name&gt;
  &lt;phone type="intl"&gt;
     +1 734 303 4456
   &lt;/phone&gt;
   &lt;email hide="yes"/&gt;
&lt;/person&gt;
</span></pre><p><span class="c006">Often it is helpful to think of an XML document as a tree structure
where there is a top tag <span class="c001">person</span> and other tags such as <span class="c001">phone</span>
are drawn as <em>children</em> of their parent nodes.</span></p><div class="center"><span class="c006"><img src="book014.png" /></span></div><span class="c005">
</span><!--TOC section id="sec160" <span class="c000"><span class="c005">Parsing XML</span></span>-->
<h2 class="section" id="sec160"><span class="c006">13.2&#XA0;&#XA0;Parsing XML</span></h2><!--SEC END --><p><a id="hevea_default764"></a><span class="c005">
</span><a id="hevea_default765"></a><span class="c005">
</span><a id="hevea_default766"></a><span class="c006">
Here is a simple application that parses some XML
and extracts some data elements from the XML:</span></p><pre class="verbatim"><span class="c004">import xml.etree.ElementTree as ET

data = "'
&lt;person&gt;
  &lt;name&gt;Chuck&lt;/name&gt;
  &lt;phone type="intl"&gt;
     +1 734 303 4456
   &lt;/phone&gt;
   &lt;email hide="yes"/&gt;
&lt;/person&gt;"'

tree = ET.fromstring(data)
print 'Name:',tree.find('name').text
print 'Attr:',tree.find('email').get('hide')
</span></pre><p><span class="c006">Calling <span class="c001">fromstring</span> converts the string representation
of the XML into a &#X201C;tree&#X201D; of XML nodes. When the
XML is in a tree, we have a series of methods we can call to 
extract portions of data from the XML. </span></p><p><span class="c006">The <span class="c001">find</span> function searches through the 
XML tree and retrieves a <span class="c009">node</span> that matches the specified tag.
Each node can have some text, some attributes (like hide), and
some &#X201C;child&#X201D; nodes. Each node can be the top of a tree of nodes.</span></p><pre class="verbatim"><span class="c004">Name: Chuck
Attr: yes
</span></pre><p><span class="c006">Using an XML parser such as <span class="c001">ElementTree</span> has the advantage
that while the XML in this example is quite simple, it turns
out there are many rules regarding valid XML and using 
<span class="c001">ElementTree</span> allows us to extract data from XML without 
worrying about the rules of XML syntax.</span></p><span class="c005">
</span><!--TOC section id="sec161" <span class="c000"><span class="c005">Looping through nodes</span></span>-->
<h2 class="section" id="sec161"><span class="c006">13.3&#XA0;&#XA0;Looping through nodes</span></h2><!--SEC END --><p><a id="hevea_default767"></a><span class="c005">
</span><a id="hevea_default768"></a><span class="c006">
Often the XML has multiple nodes and we need to write a loop
to process all of the nodes. In the following program, 
we loop through all of the <span class="c001">user</span> nodes:</span></p><pre class="verbatim"><span class="c004">import xml.etree.ElementTree as ET

input = "'
&lt;stuff&gt;
    &lt;users&gt;
        &lt;user x="2"&gt;
            &lt;id&gt;001&lt;/id&gt;
            &lt;name&gt;Chuck&lt;/name&gt;
        &lt;/user&gt;
        &lt;user x="7"&gt;
            &lt;id&gt;009&lt;/id&gt;
            &lt;name&gt;Brent&lt;/name&gt;
        &lt;/user&gt;
    &lt;/users&gt;
&lt;/stuff&gt;"'

stuff = ET.fromstring(input)
lst = stuff.findall('users/user')
print 'User count:', len(lst)

for item in lst:
    print 'Name', item.find('name').text
    print 'Id', item.find('id').text
    print 'Attribute', item.get('x')
</span></pre><p><span class="c006">The <span class="c001">findall</span> method retrieves a Python list of subtrees that
represent the <span class="c001">user</span> structures in the XML tree. Then we can 
write a <span class="c001">for</span> loop that looks at each of the user nodes, and 
prints the <span class="c001">name</span> and <span class="c001">id</span> text elements as well as the 
<span class="c001">x</span> attribute from the <span class="c001">user</span> node.</span></p><pre class="verbatim"><span class="c004">User count: 2
Name Chuck
Id 001
Attribute 2
Name Brent
Id 009
Attribute 7
</span></pre><span class="c005">
</span><!--TOC section id="sec162" <span class="c000"><span class="c005">JavaScript Object Notation - JSON</span></span>-->
<h2 class="section" id="sec162"><span class="c006">13.4&#XA0;&#XA0;JavaScript Object Notation - JSON</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default769"></a><span class="c005">
</span><a id="hevea_default770"></a></p><p><span class="c006">The JSON format was inspired by the object and array format used in the JavaScript
language. But since Python was invented before JavaScript, Python&#X2019;s syntax
for dictionaries and lists influenced the syntax of JSON. So the format of JSON
is nearly identical to a combination of Python lists and dictionaries.</span></p><p><span class="c006">Here is a JSON encoding that is roughly equivalent to the simple XML from above:</span></p><pre class="verbatim"><span class="c004">{
  "name" : "Chuck",
  "phone" : {
    "type" : "intl",
    "number" : "+1 734 303 4456"
   },
   "email" : {
     "hide" : "yes"
   }
}
</span></pre><p><span class="c006">You will notice some differences. First, in XML, we can add attributes like
&#X201C;intl&#X201D; to the &#X201C;phone&#X201D; tag. In JSON, we simply have key-value pairs. Also
the XML &#X201C;person&#X201D; tag is gone, replaced by a set of outer curly braces. </span></p><p><span class="c006">In general, JSON structures are simpler than XML because JSON has fewer capabilities
than XML. But JSON has the advantage that it maps <em>directly</em> to some combination
of dictionaries and lists. And since nearly all programming languages 
have something equivalent to Python&#X2019;s dictionaries and lists, JSON is a very
natural format to have two cooperating programs exchange data.</span></p><p><span class="c006">JSON is quickly becoming the format of choice for nearly all data exchange between 
applications because of its relative simplicity compared to XML.</span></p><span class="c005">
</span><!--TOC section id="sec163" <span class="c000"><span class="c005">Parsing JSON</span></span>-->
<h2 class="section" id="sec163"><span class="c006">13.5&#XA0;&#XA0;Parsing JSON</span></h2><!--SEC END --><p><span class="c006">We construct our JSON by nesting dictionaries (objects) and lists as needed. In 
this example, we represent a list of users where each user is a set of 
key-value pairs (i.e., a dictionary). So we have a list of dictionaries.</span></p><p><span class="c006">In the following program, we use the built-in <span class="c009">json</span> library to parse 
the JSON and read through the data. Compare this closely to the equivalent
XML data and code above. The JSON has less detail, so we must know in advance 
that we are getting a list and that the list is of users and each user is a
set of key-value pairs. The JSON is more succinct (an advantage) but also is 
less self-describing (a disadvantage).</span></p><pre class="verbatim"><span class="c004">import json

input = "'
[
  { "id" : "001",
    "x" : "2",
    "name" : "Chuck"
  } ,
  { "id" : "009",
    "x" : "7",
    "name" : "Brent"
  } 
]"'

info = json.loads(input)
print 'User count:', len(info)

for item in info:
    print 'Name', item['name']
    print 'Id', item['id']
    print 'Attribute', item['x']
</span></pre><p><span class="c006">If you compare the code to extract data from the parsed JSON and XML
you will see that what we get from <span class="c009">json.loads()</span> is a Python list
which we traverse with a <span class="c001">for</span> loop, and each item within that list
is a Python dictionary. Once the JSON has been parsed, we can use the Python
index operator to extract the various bits of data for each user. We don&#X2019;t
have to use the JSON library to dig through the parsed JSON, since the returned
data is simply native Python structures.</span></p><p><span class="c006">The output of this program is exactly the same as the XML version above.</span></p><pre class="verbatim"><span class="c004">User count: 2
Name Chuck
Id 001
Attribute 2
Name Brent
Id 009
Attribute 7
</span></pre><p><span class="c006">In general, there is an industry trend away from XML and towards JSON for 
web services. Because the JSON is simpler and more directly maps to native 
data structures we already have in programming languages, the parsing 
and data extraction code is usually simpler and more direct when using JSON.
But XML is more self-descriptive than JSON and so there are 
some applications where XML retains an advantage. For example, most word 
processors store documents internally using XML rather than JSON.</span></p><span class="c005">
</span><!--TOC section id="sec164" <span class="c000"><span class="c005">Application Programming Interfaces</span></span>-->
<h2 class="section" id="sec164"><span class="c006">13.6&#XA0;&#XA0;Application Programming Interfaces</span></h2><!--SEC END --><p><span class="c006">We now have the ability to exchange data between applications using HyperText
Transport Protocol (HTTP) and a way to represent complex data that we are 
sending back and forth between these applications using eXtensible 
Markup Language (XML) or JavaScript Object Notation (JSON).</span></p><p><span class="c006">The next step is to begin to define and document &#X201C;contracts&#X201D; between 
applications using these techniques. The general name for these 
application-to-application contracts is <span class="c009">Application Program 
Interfaces</span> or APIs. When we use an API, generally one program
makes a set of <span class="c009">services</span> available for use by other applications
and publishes the APIs (i.e., the &#X201C;rules&#X201D;) that must be followed to 
access the services provided by the program.</span></p><p><span class="c006">When we begin to build our programs where the functionality of
our program includes access to services provided by other programs, 
we call the approach a <span class="c009">Service-Oriented Architecture</span> or SOA.
A SOA approach is one where our overall application makes use of 
the services of other applications. A non-SOA approach is where the
application is a single standalone application which contains all of the
code necessary to implement the application.</span></p><p><span class="c006">We see many examples of SOA when we use the web. We can go to a single 
web site and book air travel, hotels, and automobiles all from a 
single site. The data for hotels is not stored on the airline computers. 
Instead, the airline computers contact the services on the hotel computers
and retrieve the hotel data and present it to the user. When the user
agrees to make a hotel reservation using the airline site, the airline site uses
another web service on the hotel systems to actually make the reservation.
And when it comes time to charge your credit card for the whole transaction, 
still other computers become involved in the process.</span></p><div class="center"><span class="c006"><img src="book015.png" /></span></div><p><span class="c006">A Service-Oriented Architecture has many advantages including: (1) we 
always maintain only one copy of data (this is particularly important
for things like hotel reservations where we do not want to over-commit)
and (2) the owners of the data can set the rules about the use of their 
data. With these advantages, an SOA system must be carefully designed
to have good performance and meet the user&#X2019;s needs.</span></p><p><span class="c006">When an application makes a set of services in its API available over the web, 
we call these <span class="c009">web services</span>. </span></p><span class="c005">
</span><!--TOC section id="sec165" <span class="c000"><span class="c005">Google geocoding web service</span></span>-->
<h2 class="section" id="sec165"><span class="c006">13.7&#XA0;&#XA0;Google geocoding web service</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default771"></a><span class="c005">
</span><a id="hevea_default772"></a><span class="c005">
</span><a id="hevea_default773"></a></p><p><span class="c006">Google has an excellent web service that allows us to make use of their 
large database of geographic information. We can submit a geographical
search string like &#X201C;Ann Arbor, MI&#X201D; to their geocoding API and have Google 
return its best guess as to where on a map we might find our search string and
tell us about the landmarks nearby.</span></p><p><span class="c006">The geocoding service is free but rate limited so you cannot make unlimited
use of the API in a commercial application. But if you have some survey data
where an end user has entered a location in a free-format input box, you can use
this API to clean up your data quite nicely. </span></p><p><span class="c006"><em>When you are using a free API like Google&#X2019;s geocoding API, you need
to be respectful in your use of these resources. If too many people abuse the
service, Google might drop or significantly curtail its free service.
</em></span><a id="hevea_default774"></a></p><p><span class="c006">You can read the online documentation for this service, but it is quite simple
and you can even test it using a browser by typing the following URL into your 
browser:</span></p><p><span class="c002">http://maps.googleapis.com/maps/api/geocode/json?sensor=false &amp;address=Ann+Arbor%2C+MI</span></p><p><span class="c006">Make sure to unwrap the URL and remove any spaces from the URL before pasting
it into your browser.</span></p><p><span class="c006">The following is a simple application to prompt the user for a search string,
call the Google geocoding API, and extract information from the returned JSON.</span></p><pre class="verbatim"><span class="c004">import urllib
import json

serviceurl = 'http://maps.googleapis.com/maps/api/geocode/json?'

while True:
    address = raw_input('Enter location: ')
    if len(address) &lt; 1 : break

    url = serviceurl + urllib.urlencode({'sensor':'false', 
          'address': address})
    print 'Retrieving', url
    uh = urllib.urlopen(url)
    data = uh.read()
    print 'Retrieved',len(data),'characters'

    try: js = json.loads(str(data))
    except: js = None
    if 'status' not in js or js['status'] != 'OK':
        print '==== Failure To Retrieve ===='
        print data
        continue

    print json.dumps(js, indent=4)

    lat = js["results"][0]["geometry"]["location"]["lat"]
    lng = js["results"][0]["geometry"]["location"]["lng"]
    print 'lat',lat,'lng',lng
    location = js['results'][0]['formatted_address']
    print location
</span></pre><p><span class="c006">The program takes the search string and constructs a URL with the
search string as a properly encoded parameter and then uses
<span class="c009">urllib</span> to retrieve the text from the Google geocoding API.
Unlike a fixed web page, the data we get depends on the parameters
we send and the geographical data stored in Google&#X2019;s servers.</span></p><p><span class="c006">Once we retrieve the JSON data, we parse it with the <span class="c009">json</span>
library and do a few checks to make sure that we received good data, 
then extract the information that we are looking for.</span></p><p><span class="c006">The output of the program is as follows (some of the returned
JSON has been removed):</span></p><pre class="verbatim"><span class="c004">$ python geojson.py
Enter location: Ann Arbor, MI
Retrieving http://maps.googleapis.com/maps/api/
  geocode/json?sensor=false&amp;address=Ann+Arbor%2C+MI
Retrieved 1669 characters
{
    "status": "OK", 
    "results": [
        {
            "geometry": {
                "location_type": "APPROXIMATE", 
                "location": {
                    "lat": 42.2808256, 
                    "lng": -83.7430378
                }
            }, 
            "address_components": [
                {
                    "long_name": "Ann Arbor", 
                    "types": [
                        "locality", 
                        "political"
                    ], 
                    "short_name": "Ann Arbor"
                } 
            ], 
            "formatted_address": "Ann Arbor, MI, USA", 
            "types": [
                "locality", 
                "political"
            ]
        }
    ]
}
lat 42.2808256 lng -83.7430378
Ann Arbor, MI, USA
Enter location:
</span></pre><p><span class="c006">You can download 
<span class="c001">www.py4inf.com/code/geojson.py</span> and 
<span class="c001">www.py4inf.com/code/geoxml.py</span> to explore the JSON
and XML variants of the Google geocoding API. </span></p><span class="c005">
</span><!--TOC section id="sec166" <span class="c000"><span class="c005">Security and API usage</span></span>-->
<h2 class="section" id="sec166"><span class="c006">13.8&#XA0;&#XA0;Security and API usage</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default775"></a><span class="c005">
</span><a id="hevea_default776"></a></p><p><span class="c006">It is quite common that you need some kind of 
&#X201C;API key&#X201D; to make use of a vendor&#X2019;s API. The
general idea is that they want to know who is using 
their services and how much each user is using. 
Perhaps they have free and pay tiers of their services
or have a policy that limits the number of requests 
that a single individual can make during a particular 
time period.</span></p><p><span class="c006">Sometimes once you get your API key, you simply include
the key as part of POST data or perhaps as a parameter
on the URL when calling the API.</span></p><p><span class="c006">Other times, the vendor wants increased assurance of
the source of the requests and so they add expect you 
to send cryptographically signed messages using shared
keys and secrets. A very common technology that is used 
to sign requests over the Internet is called <span class="c009">OAuth</span>.
You can read more about the OAuth protocol at
<span class="c001">http://www.oauth.net</span>.</span></p><p><span class="c006">As the Twitter API became increasingly valuable, Twitter
went from an open and public API to an API that required
the use of OAuth signatures on each API request. Thankfully
there are still a number of convenient and free OAuth libraries
so you can avoid writing an OAuth implementation from scratch
by reading the specification. These libraries are of 
varying complexity and have varying degrees of
richness. The OAuth web site has information about various 
OAuth libraries.</span></p><p><span class="c006">For this next sample program we will download the files 
<span class="c009">twurl.py</span>, <span class="c009">hidden.py</span>, 
<span class="c009">oauth.py</span>, 
and
<span class="c009">twitter1.py</span> from 
<span class="c001">www.py4inf.com/code</span> and put them all in a folder
on your computer.</span></p><p><span class="c006">To make use of these programs you will need to have a Twitter
account, and authorize your Python code as an application,
set up a key, secret, token and token secret. You will edit
the file <span class="c009">hidden.py</span> and put these four strings into the
appropriate variables in the file:</span></p><pre class="verbatim"><span class="c004">    def auth() :
        return { "consumer_key" : "h7L...GNg",
            "consumer_secret" : "dNK...7Q",
            "token_key" : "101...GI",
            "token_secret" : "H0yM...Bo" }
</span></pre><p><span class="c006">The Twitter web service are accessed using a URL like this:</span></p><p><span class="c002">https://api.twitter.com/1.1/statuses/user_timeline.json</span></p><p><span class="c006">But once all of the security information has been added, the URL
will look more like:</span></p><pre class="verbatim"><span class="c004">https://api.twitter.com/1.1/statuses/user_timeline.json?count=2
&amp;oauth_version=1.0&amp;oauth_token=101...SGI&amp;screen_name=drchuck
&amp;oauth_nonce=09239679&amp;oauth_timestamp=1380395644
&amp;oauth_signature=rLK...BoD&amp;oauth_consumer_key=h7Lu...GNg
&amp;oauth_signature_method=HMAC-SHA1
</span></pre><p><span class="c006">You can read the OAuth specification if you want to
know more about the meaning of the various parameters that
are added to meet the security requirements of OAuth. </span></p><p><span class="c006">For the programs we run with Twitter, we hide all the 
complexity in the files <span class="c009">oauth.py</span> and <span class="c009">twurl.py</span>.
We simply set the secrets in <span class="c009">hidden.py</span> and then 
send the desired URL to the <span class="c009">twurl.augment()</span> 
function and the library code adds all the necessary 
parameters to the URL for us.</span></p><p><span class="c006">This program (<span class="c009">twitter1.py</span>) retrieves the timeline
for a particular Twitter user and returns it to us in JSON
format in a string. We simply print the first 250 characters
of the string:</span></p><pre class="verbatim"><span class="c004">import urllib
import twurl

TWITTER_URL='https://api.twitter.com/1.1/statuses/user_timeline.json'

while True:
    print "
    acct = raw_input('Enter Twitter Account:')
    if ( len(acct) &lt; 1 ) : break
    url = twurl.augment(TWITTER_URL,
        {'screen_name': acct, 'count': '2'} )
    print 'Retrieving', url
    connection = urllib.urlopen(url)
    data = connection.read()
    print data[:250]
    headers = connection.info().dict
    # print headers
    print 'Remaining', headers['x-rate-limit-remaining']
</span></pre><p><span class="c006">When the program runs it produces the following output: </span></p><pre class="verbatim"><span class="c004">Enter Twitter Account:drchuck
Retrieving https://api.twitter.com/1.1/ ...
[{"created_at":"Sat Sep 28 17:30:25 +0000 2013","
id":384007200990982144,"id_str":"384007200990982144",
"text":"RT @fixpert: See how the Dutch handle traffic 
intersections: http:\/\/t.co\/tIiVWtEhj4\n#brilliant",
"source":"web","truncated":false,"in_rep
Remaining 178

Enter Twitter Account:fixpert
Retrieving https://api.twitter.com/1.1/ ...
[{"created_at":"Sat Sep 28 18:03:56 +0000 2013",
"id":384015634108919808,"id_str":"384015634108919808",
"text":"3 months after my freak bocce ball accident, 
my wedding ring fits again! :)\n\nhttps:\/\/t.co\/2XmHPx7kgX",
"source":"web","truncated":false,
Remaining 177

Enter Twitter Account:
</span></pre><p><span class="c006">Along with the returned timeline data, Twitter also returns
metadata about the request in the HTTP response headers. 
One header in particular, <span class="c009">x-rate-limit-remaining</span>, informs
us how many more requests we can make before we will be shut 
off for a short time period. You can see that our remaining 
retrievals drop by one each time we make a request to the 
API.</span></p><p><span class="c006">In the following example, we retrieve a user&#X2019;s Twitter friends,
parse the returned JSON, and extract some of the information
about the friends. We also dump the JSON after parsing and
&#X201C;pretty-print&#X201D; it with an indent of four characters to allow
us to pore through the data when we want to extract more fields.</span></p><pre class="verbatim"><span class="c004">import urllib
import twurl
import json

TWITTER_URL = 'https://api.twitter.com/1.1/friends/list.json'

while True:
    print "
    acct = raw_input('Enter Twitter Account:')
    if ( len(acct) &lt; 1 ) : break
    url = twurl.augment(TWITTER_URL,
        {'screen_name': acct, 'count': '5'} )
    print 'Retrieving', url
    connection = urllib.urlopen(url)
    data = connection.read()
    headers = connection.info().dict
    print 'Remaining', headers['x-rate-limit-remaining']
    js = json.loads(data)
    print json.dumps(js, indent=4)

    for u in js['users'] :
        print u['screen_name']
        s = u['status']['text']
        print '  ',s[:50]
</span></pre><p><span class="c006">Since the JSON becomes a set of nested Python lists and dictionaries,
we can use a combination of the index operation and <span class="c001">for</span> loops to 
wander through the returned data structures with very little 
Python code.</span></p><p><span class="c006">The output of the program looks as follows (some of the data items 
are shortened to fit on the page):</span></p><pre class="verbatim"><span class="c004">Enter Twitter Account:drchuck
Retrieving https://api.twitter.com/1.1/friends ...
Remaining 14
{
    "next_cursor": 1444171224491980205, 
    "users": [
        {
            "id": 662433, 
            "followers_count": 28725, 
            "status": {
                "text": "@jazzychad I just bought one .__.", 
                "created_at": "Fri Sep 20 08:36:34 +0000 2013", 
                "retweeted": false, 
            }, 
            "location": "San Francisco, California", 
            "screen_name": "leahculver", 
            "name": "Leah Culver", 
        }, 
        {
            "id": 40426722, 
            "followers_count": 2635, 
            "status": {
                "text": "RT @WSJ: Big employers like Google ...", 
                "created_at": "Sat Sep 28 19:36:37 +0000 2013", 
            }, 
            "location": "Victoria Canada", 
            "screen_name": "_valeriei", 
            "name": "Valerie Irvine", 
    ], 
    "next_cursor_str": "1444171224491980205"
}
leahculver
   @jazzychad I just bought one .__.
_valeriei
   RT @WSJ: Big employers like Google, AT&amp;amp;T are h
ericbollens
   RT @lukew: sneak peek: my LONG take on the good &amp;a
halherzog
   Learning Objects is 10. We had a cake with the LO,
scweeker
   @DeviceLabDC love it! Now where so I get that "etc

Enter Twitter Account:
</span></pre><p><span class="c006">The last bit of the output is where we see the for loop reading the
five most recent &#X201C;friends&#X201D; of the <span class="c009">drchuck</span> Twitter account 
and printing the most recent status for each friend. There is a 
great deal more data available in the returned JSON. If you look
in the output of the program, you can also see that the &#X201C;find the friends&#X201D;
of a particular account has a different rate limitation than 
the number of timeline queries we are allowed to run per time period.</span></p><p><span class="c006">These secure API keys allow Twitter to have solid confidence that they 
know who is using their API and data and at what level. The 
rate-limiting approach allows us to do simple, personal data retrievals but
does not allow us to build a product that pulls data from their API 
millions of times per day.</span></p><span class="c005">
</span><!--TOC section id="sec167" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec167"><span class="c006">13.9&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">API:</span></dt><dd class="dd-description"><span class="c006"> Application Program Interface - A contract between
applications that defines the patterns of interaction between 
two application components.
</span><a id="hevea_default777"></a></dd><dt class="dt-description"><span class="c010">ElementTree:</span></dt><dd class="dd-description"><span class="c006"> A built-in Python library used to parse XML data.
</span><a id="hevea_default778"></a></dd><dt class="dt-description"><span class="c010">JSON:</span></dt><dd class="dd-description"><span class="c006"> JavaScript Object Notation. A format that allows for 
the markup of structured data based on the syntax of JavaScript
Objects.
</span><a id="hevea_default779"></a><span class="c005">
</span><a id="hevea_default780"></a></dd><dt class="dt-description"><span class="c010">SOA:</span></dt><dd class="dd-description"><span class="c006"> Service-Oriented Architecture. When an application is 
made of components connected across a network.
</span><a id="hevea_default781"></a><span class="c005">
</span><a id="hevea_default782"></a></dd><dt class="dt-description"><span class="c010">XML:</span></dt><dd class="dd-description"><span class="c006"> eXtensible Markup Language. A format that allows for 
the markup of structured data.
</span><a id="hevea_default783"></a><span class="c005">
</span><a id="hevea_default784"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec168" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec168"><span class="c006">13.10&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Change either the 
<span class="c001">www.py4inf.com/code/geojson.py</span> or
<span class="c001">www.py4inf.com/code/geoxml.py</span> to print out the 
two-character country code from the retrieved data.
Add error checking so your program does not traceback
if the country code is not there. Once you have it 
working, search for &#X201C;Atlantic Ocean&#X201D; and make sure
it can handle locations that are not in any country.
</em></span></div><span class="c005">
</span><!--TOC chapter id="sec169" <span class="c000"><span class="c005">Using databases and Structured Query Language (SQL)</span></span>-->
<h1 class="chapter" id="sec169"><span class="c006">Chapter&#XA0;14&#XA0;&#XA0;Using databases and Structured Query Language (SQL)</span></h1><!--SEC END --><span class="c005">
</span><!--TOC section id="sec170" <span class="c000"><span class="c005">What is a database?</span></span>-->
<h2 class="section" id="sec170"><span class="c006">14.1&#XA0;&#XA0;What is a database?</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default785"></a></p><p><span class="c006">A <span class="c009">database</span> is a file that is organized for storing data.
Most databases are organized like a dictionary in the sense
that they map from keys to values. The biggest difference
is that the database is on disk (or other permanent storage),
so it persists after the program ends. Because a database is
stored on permanent storage, it can store far more data than
a dictionary, which is limited to the size of the memory 
in the computer.</span></p><p><a id="hevea_default786"></a><span class="c006">
Like a dictionary, database software is designed to keep 
the inserting and accessing of data very fast, even for large
amounts of data. Database software maintains its performance by 
building <span class="c009">indexes</span> as data is added to the database
to allow the computer to jump quickly to a particular
entry.</span></p><p><span class="c006">There are many different database systems which are used for a wide
variety of purposes including: Oracle, MySQL, Microsoft SQL Server, 
PostgreSQL, and SQLite. We focus on SQLite in this book because
it is a very common database and is already built into Python. 
SQLite is designed to be <em>embedded</em> into other applications
to provide database support within the application. For example,
the Firefox browser also uses the SQLite database internally as do 
many other products.</span></p><p><span class="c002">http://sqlite.org/</span></p><p><span class="c006">SQLite is well suited to some of the data manipulation problems that we 
see in Informatics such as the Twitter spidering application that we 
describe in this chapter.</span></p><span class="c005">
</span><!--TOC section id="sec171" <span class="c000"><span class="c005">Database concepts</span></span>-->
<h2 class="section" id="sec171"><span class="c006">14.2&#XA0;&#XA0;Database concepts</span></h2><!--SEC END --><p><span class="c006">When you first look at a database it looks like a 
spreadsheet with multiple sheets. The primary data structures 
in a database are:
<span class="c009">tables</span>, <span class="c009">rows</span>, and <span class="c009">columns</span>. </span></p><div class="center"><span class="c006"><img src="book016.png" /></span></div><p><span class="c006">In technical descriptions of relational databases the concepts of 
table, row, and column are more formally referred
to as <span class="c009">relation</span>, <span class="c009">tuple</span>, and <span class="c009">attribute</span>, respectively.
We will use the less formal terms in this chapter.</span></p><span class="c005">
</span><!--TOC section id="sec172" <span class="c000"><span class="c005">SQLite manager Firefox add-on</span></span>-->
<h2 class="section" id="sec172"><span class="c006">14.3&#XA0;&#XA0;SQLite manager Firefox add-on</span></h2><!--SEC END --><p><span class="c006">While this chapter will focus on using Python to work with data 
in SQLite database files, many operations can be done more
conveniently using a Firefox add-on called the <span class="c009">SQLite
Database Manager</span> which is freely available from:</span></p><p><span class="c002">https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/</span></p><p><span class="c006">Using the browser you can easily create tables, insert data, edit data, 
or run simple SQL queries on the data in the database.</span></p><p><span class="c006">In a sense, the database manager is similar to a text editor
when working with text files. When you want to do one or
very few operations on a text file, you can just open it
in a text editor and make the changes you want. When you have 
many changes that you need to do to a text file, often you 
will write a simple Python program. You will find the same 
pattern when working with databases. You will do simple
operations in the database manager and more complex operations
will be most conveniently done in Python.</span></p><span class="c005">
</span><!--TOC section id="sec173" <span class="c000"><span class="c005">Creating a database table</span></span>-->
<h2 class="section" id="sec173"><span class="c006">14.4&#XA0;&#XA0;Creating a database table</span></h2><!--SEC END --><p><span class="c006">Databases require more defined structure than Python lists 
or dictionaries</span><sup><a id="text15" href="#note15"><span class="c006">1</span></a></sup><span class="c006">. </span></p><p><span class="c006">When we create a database <span class="c009">table</span> we
must tell the database in advance the names of each of the
<span class="c009">columns</span> in the table and the type of data which we are 
planning to store in each <span class="c009">column</span>. When the database software
knows the type of data in each column, it can choose the most 
efficient way to store and look up the data based on the type of
data. </span></p><p><span class="c006">You can look at the various data types supported by SQLite
at the following url:</span></p><p><span class="c002">http://www.sqlite.org/datatypes.html</span></p><p><span class="c006">Defining structure for your data up front may seem inconvenient
at the beginning, but the payoff is fast access to your data 
even when the database contains a large amount of data.</span></p><p><span class="c006">The code to create a database file and a table 
named <span class="c001">Tracks</span> with two columns in the 
database is as follows:</span></p><p><a id="hevea_default787"></a><span class="c005">
</span><a id="hevea_default788"></a><span class="c005">
</span></p><pre class="verbatim"><span class="c004">import sqlite3

conn = sqlite3.connect('music.sqlite3')
cur = conn.cursor()

cur.execute('DROP TABLE IF EXISTS Tracks ')
cur.execute('CREATE TABLE Tracks (title TEXT, plays INTEGER)')

conn.close()
</span></pre><p><a id="hevea_default789"></a><span class="c005">
</span><a id="hevea_default790"></a><span class="c005">
</span><a id="hevea_default791"></a><span class="c005">
</span><a id="hevea_default792"></a><span class="c006">
The <span class="c001">connect</span> operation makes a &#X201C;connection&#X201D; to the database 
stored in the file <span class="c001">music.sqlite3</span> in the current directory. If
the file does not exist, it will be created. The reason this
is called a &#X201C;connection&#X201D; is that sometimes the database is stored
on a separate &#X201C;database server&#X201D; from the server on which we 
are running our application. In our simple examples 
the database will just be a local file in the same directory
as the Python code we are running.</span></p><p><span class="c006">A <span class="c009">cursor</span> is like a file handle that we can use to perform
operations on the data stored in the database. Calling 
<span class="c001">cursor()</span> is very similar conceptually to calling
<span class="c001">open()</span> when dealing with text files.</span></p><div class="center"><span class="c006"><img src="book017.png" /></span></div><p><span class="c006">Once we have the cursor, we can begin to execute 
commands on the contents of the database using the <span class="c001">execute()</span>
method.</span></p><p><span class="c006">Database commands are expressed in a special language that has 
been standardized across many different database vendors 
to allow us to learn a single database language. The database
language is called <span class="c009">Structured Query Language</span> or <span class="c009">SQL</span>
for short.</span></p><p><span class="c002">http://en.wikipedia.org/wiki/SQL</span></p><p><span class="c006">In our example, we are executing two SQL commands in our database.
As a convention, we will show the SQL keywords in uppercase 
and the parts of the command that we are adding (such as the
table and column names) will be shown in lowercase.</span></p><p><span class="c006">The first SQL command removes the <span class="c001">Tracks</span> table from the 
database if it exists. This pattern is simply to allow us to 
run the same program to create the <span class="c001">Tracks</span> table over 
and over again without causing an error. Note that the
<span class="c001">DROP TABLE</span> command deletes the table and all of its contents
from the database (i.e., there is no &#X201C;undo&#X201D;).</span></p><pre class="verbatim"><span class="c004">cur.execute('DROP TABLE IF EXISTS Tracks ')
</span></pre><p><span class="c006">The second command creates a table named
<span class="c001">Tracks</span> with a text column named <span class="c001">title</span>
and an integer column named <span class="c001">plays</span>.</span></p><pre class="verbatim"><span class="c004">cur.execute('CREATE TABLE Tracks (title TEXT, plays INTEGER)')
</span></pre><p><span class="c006">Now that we have created a table named <span class="c001">Tracks</span>, we can put some data
into that table using the SQL <span class="c001">INSERT</span> operation. Again, we begin
by making a connection to the database and obtaining the <span class="c001">cursor</span>.
We can then execute SQL commands using the cursor.</span></p><p><span class="c006">The SQL <span class="c001">INSERT</span> command indicates which table we are using 
and then defines a new row by listing the fields we want to 
include <span class="c001">(title, plays)</span> followed by the <span class="c001">VALUES</span> we want
placed in the new row. We specify the values as question marks
<span class="c001">(?, ?)</span> to indicate that the actual values are passed in as a
tuple <span class="c001">( &#X2019;My Way&#X2019;, 15 ) </span> as the second parameter to the
<span class="c001">execute()</span> call.</span></p><pre class="verbatim"><span class="c004">import sqlite3

conn = sqlite3.connect('music.sqlite3')
cur = conn.cursor()

cur.execute('INSERT INTO Tracks (title, plays) VALUES ( ?, ? )', 
    ( 'Thunderstruck', 20 ) )
cur.execute('INSERT INTO Tracks (title, plays) VALUES ( ?, ? )', 
    ( 'My Way', 15 ) )
conn.commit()

print 'Tracks:'
cur.execute('SELECT title, plays FROM Tracks')
for row in cur :
   print row

cur.execute('DELETE FROM Tracks WHERE plays &lt; 100')
conn.commit()

cur.close()
</span></pre><p><span class="c006">First we <span class="c001">INSERT</span> two rows into our table and use <span class="c001">commit()</span> 
to force the data to be written to the database file.</span></p><div class="center"><span class="c006"><img src="book018.png" /></span></div><p><span class="c006">Then we use the <span class="c001">SELECT</span> command
to retrieve the rows we just inserted from the table. 
On the 
<span class="c001">SELECT</span> command, we indicate which columns we would like <span class="c001">(title, plays)</span>
and indicate which table we want to retrieve the data from. After we 
execute the <span class="c001">SELECT</span> statement, the cursor is something we can loop through
in a <span class="c001">for</span> statement. For efficiency,
the cursor does not read all of the data from the
database when we execute the <span class="c001">SELECT</span> statement. 
Instead, the data is read on demand
as we loop through the rows in the <span class="c001">for</span> statement.</span></p><p><span class="c006">The output of the program is as follows:</span></p><pre class="verbatim"><span class="c004">Tracks:
(u'Thunderstruck', 20)
(u'My Way', 15)
</span></pre><p><a id="hevea_default793"></a><span class="c006">
Our <span class="c001">for</span> loop finds two rows, and each row is a Python tuple with the
first value as the <span class="c001">title</span> and the second value as the number of <span class="c001">plays</span>.
Do not be concerned that the title strings are shown starting with 
<span class="c001">u&#X2019;</span>. This is an indication that the strings are <span class="c009">Unicode</span> strings
that are capable of storing non-Latin character sets.</span></p><p><span class="c006">At the very end of the program, we execute an SQL command to <span class="c001">DELETE</span> 
the rows we have just created so we can run the program over and over.
The <span class="c001">DELETE</span> command shows the use of a <span class="c001">WHERE</span> clause that
allows us to express a selection criterion so that we can ask the database
to apply the command to only the rows that match the criterion. In this example
the criterion happens to apply to all the rows so we empty the table
out so we can run the program repeatedly. After the <span class="c001">DELETE</span> is performed,
we also call <span class="c001">commit()</span> to force the data to be removed from the database.</span></p><span class="c005">
</span><!--TOC section id="sec174" <span class="c000"><span class="c005">Structured Query Language summary</span></span>-->
<h2 class="section" id="sec174"><span class="c006">14.5&#XA0;&#XA0;Structured Query Language summary</span></h2><!--SEC END --><p><span class="c006">So far, we have been using the Structured Query Language in our Python
examples and have covered many of the basics of the SQL commands.
In this section, we look at the SQL language in particular
and give an overview of SQL syntax.</span></p><p><span class="c006">Since there are so many different database vendors, the Structured Query
Language (SQL) was standardized so we could communicate in a portable
manner to database systems from multiple vendors.</span></p><p><span class="c006">A relational database is made up of tables, rows, and columns. The columns
generally have a type such as text, numeric, or date data. When we create
a table, we indicate the names and types of the columns:</span></p><pre class="verbatim"><span class="c004">CREATE TABLE Tracks (title TEXT, plays INTEGER)
</span></pre><p><span class="c006">To insert a row into a table, we use the SQL <span class="c001">INSERT</span> command:</span></p><pre class="verbatim"><span class="c004">INSERT INTO Tracks (title, plays) VALUES ('My Way', 15)
</span></pre><p><span class="c006">The <span class="c001">INSERT</span> statement specifies the table name, then a list of
the fields/columns that you would like to set in the new row, and then 
the keyword <span class="c001">VALUES</span> and a list of corresponding values 
for each of the fields.</span></p><p><span class="c006">The SQL <span class="c001">SELECT</span> command is used to retrieve rows and columns from a database.
The <span class="c001">SELECT</span> statement lets you specify which columns you would
like to retrieve as well as a <span class="c001">WHERE</span> clause to select which 
rows you would like to see. It also allows an optional 
<span class="c001">ORDER BY</span> clause to control the sorting of the returned rows.</span></p><pre class="verbatim"><span class="c004">SELECT * FROM Tracks WHERE title = 'My Way'
</span></pre><p><span class="c006">Using <code>*</code> indicates that you want the database to return all of 
the columns for each row that matches the <span class="c001">WHERE</span> clause. </span></p><p><span class="c006">Note, unlike in Python, in a SQL <span class="c001">WHERE</span> clause 
we use a single equal sign 
to indicate a test for equality rather than a double equal sign.
Other logical operations allowed in a <span class="c001">WHERE</span> clause include 
<code>&lt;</code>,
<code>&gt;</code>,
<code>&lt;=</code>,
<code>&gt;=</code>,
<code>!=</code>,
as well as <span class="c001">AND</span> and <span class="c001">OR</span> and parentheses
to build your logical expressions.</span></p><p><span class="c006">You can request that the returned rows be sorted by one of 
the fields as follows:</span></p><pre class="verbatim"><span class="c004">SELECT title,plays FROM Tracks ORDER BY title
</span></pre><p><span class="c006">To remove a row, you need a <span class="c001">WHERE</span> clause on an SQL <span class="c001">DELETE</span>
statement. The <span class="c001">WHERE</span> clause determines which rows are to be deleted:</span></p><pre class="verbatim"><span class="c004">DELETE FROM Tracks WHERE title = 'My Way'
</span></pre><p><span class="c006">It is possible to <span class="c001">UPDATE</span> a column or columns within one or more rows
in a table using the SQL <span class="c001">UPDATE</span> statement as follows:</span></p><pre class="verbatim"><span class="c004">UPDATE Tracks SET plays = 16 WHERE title = 'My Way'
</span></pre><p><span class="c006">The <span class="c001">UPDATE</span> statement specifies a table and 
then a list of fields and values to change after the <span class="c001">SET</span> 
keyword and then an optional <span class="c001">WHERE</span> clause to select
the rows that are to be updated. A single <span class="c001">UPDATE</span> statement
will change all of the rows that match the <span class="c001">WHERE</span> clause. If 
a <span class="c001">WHERE</span> clause is not specified, it performs the <span class="c001">UPDATE</span>
on all of the rows in the table.</span></p><p><span class="c006">These four basic SQL commands (INSERT, SELECT, UPDATE, and DELETE) allow 
the four basic operations needed to create and maintain data.</span></p><span class="c005">
</span><!--TOC section id="sec175" <span class="c000"><span class="c005">Spidering Twitter using a database</span></span>-->
<h2 class="section" id="sec175"><span class="c006">14.6&#XA0;&#XA0;Spidering Twitter using a database</span></h2><!--SEC END --><p><span class="c006">In this section, we will create a simple spidering program that will 
go through Twitter accounts and build a database of them.
<em>Note: Be very careful when running this program. You do not
want to pull too much data or run the program for too long and
end up having your Twitter access shut off.</em></span></p><p><span class="c006">One of the problems of any kind of spidering program is that it 
needs to be able to be stopped and restarted many times and 
you do not want to lose the data that you have retrieved so far.
You don&#X2019;t want to always restart your data retrieval at the
very beginning so we want to store data as we retrieve it so our
program can start back up and pick up where it left off.</span></p><p><span class="c006">We will start by retrieving one person&#X2019;s Twitter friends and their
statuses, looping through the list of friends, and adding each 
of the friends to a database to be retrieved in the future. After
we process one person&#X2019;s Twitter friends, we check in our database
and retrieve one of the friends of the friend. We do this over and
over, picking an &#X201C;unvisited&#X201D; person, retrieving their friend list,
and adding friends we have not seen to our list for a future visit.</span></p><p><span class="c006">We also track how many times we have seen a particular friend in the
database to get some sense of their &#X201C;popularity&#X201D;.</span></p><p><span class="c006">By storing our list of known accounts and whether 
we have retrieved the account or not, 
and how popular the account is in a database on the disk
of the computer, we can stop and
restart our program as many times as we like.</span></p><p><span class="c006">This program is a bit complex. It is based on the code 
from the exercise earlier in the book that uses
the Twitter API.</span></p><p><span class="c006">Here is the source code for our Twitter spidering application:</span></p><pre class="verbatim"><span class="c004">import urllib
import twurl
import json
import sqlite3

TWITTER_URL = 'https://api.twitter.com/1.1/friends/list.json'

conn = sqlite3.connect('spider.sqlite3')
cur = conn.cursor()

cur.execute("'
CREATE TABLE IF NOT EXISTS Twitter 
(name TEXT, retrieved INTEGER, friends INTEGER)"')

while True:
    acct = raw_input('Enter a Twitter account, or quit: ')
    if ( acct == 'quit' ) : break
    if ( len(acct) &lt; 1 ) :
        cur.execute('SELECT name FROM Twitter WHERE retrieved = 0 LIMIT 1')
        try:
            acct = cur.fetchone()[0]
        except:
            print 'No unretrieved Twitter accounts found'
            continue

    url = twurl.augment(TWITTER_URL, 
               {'screen_name': acct, 'count': '20'} )
    print 'Retrieving', url
    connection = urllib.urlopen(url)
    data = connection.read()
    headers = connection.info().dict
    # print 'Remaining', headers['x-rate-limit-remaining']
    js = json.loads(data)
    # print json.dumps(js, indent=4)

    cur.execute('UPDATE Twitter SET retrieved=1 WHERE name = ?', (acct, ) )

    countnew = 0
    countold = 0
    for u in js['users'] :
        friend = u['screen_name']
        print friend
        cur.execute('SELECT friends FROM Twitter WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            count = cur.fetchone()[0]
            cur.execute('UPDATE Twitter SET friends = ? WHERE name = ?', 
                (count+1, friend) )
            countold = countold + 1
        except:
            cur.execute("'INSERT INTO Twitter (name, retrieved, friends) 
                VALUES ( ?, 0, 1 )"', ( friend, ) )
            countnew = countnew + 1
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()

cur.close()
</span></pre><p><span class="c006">Our database is stored in the file <span class="c001">spider.sqlite3</span> and it has one 
table named <span class="c001">Twitter</span>. Each row in the <span class="c001">Twitter</span> table
has a column for the account name, whether we have retrieved the friends
of this account, and how many times this account has been &#X201C;friended&#X201D;.</span></p><p><span class="c006">In the main loop of the program, we prompt the user for a Twitter
account name or &#X201C;quit&#X201D; to exit the program. 
If the user enters a Twitter account, we retrieve the 
list of friends and statuses
for that user and add each friend to the database if 
not already in the database. If the friend is already in the list, 
we add 1 to the <span class="c001">friends</span> field in the row in the database.</span></p><p><span class="c006">If the user presses enter, we look in the database for the next 
Twitter account that we have not yet retrieved, retrieve the
friends and statuses for that account, add them to the database 
or update them, and increase their <span class="c001">friends</span> count.</span></p><p><span class="c006">Once we retrieve the list of friends and statuses, we loop 
through all of the <span class="c001">user</span> items in the returned JSON
and retrieve the <code>screen_name</code> for each user. Then we use
the <span class="c001">SELECT</span> statement to see if we already have stored this
particular <code>screen_name</code> in the database and retrieve the
friend count (<span class="c001">friends</span>) if the record exists.</span></p><pre class="verbatim"><span class="c004">    countnew = 0
    countold = 0
    for u in js['users'] :
        friend = u['screen_name']
        print friend
        cur.execute('SELECT friends FROM Twitter WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            count = cur.fetchone()[0]
            cur.execute('UPDATE Twitter SET friends = ? WHERE name = ?', 
                (count+1, friend) )
            countold = countold + 1
        except:
            cur.execute("'INSERT INTO Twitter (name, retrieved, friends) 
                VALUES ( ?, 0, 1 )"', ( friend, ) )
            countnew = countnew + 1
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()
</span></pre><p><span class="c006">Once the cursor executes the <span class="c001">SELECT</span> statement, 
we must retrieve the rows. We could do this with a <span class="c001">for</span> 
statement, but since we are only retrieving
one row (<span class="c001">LIMIT 1</span>), we can use the <span class="c001">fetchone()</span> method to fetch the
first (and only) row that is the result of the <span class="c001">SELECT</span> operation. 
Since <span class="c001">fetchone()</span> returns the row as a <span class="c009">tuple</span> (even though there is only
one field), we take the first value from the tuple using <span class="c001">[0]</span> to get the 
current friend count into the variable <span class="c001">count</span>. </span></p><p><span class="c006">If this retrieval is successful, we use the SQL <span class="c001">UPDATE</span> statement with a 
<span class="c001">WHERE</span> clause to add 1 to the <span class="c001">friends</span> column for the row that 
matches the friend&#X2019;s account. Notice that there are two placeholders (i.e.,
question marks) in the SQL, and the second parameter to the <span class="c001">execute()</span> is
a two-element tuple that holds the values to be substituted into the SQL
in place of the question marks.</span></p><p><span class="c006">If the code in the <span class="c001">try</span> block fails, it is probably because no record
matched the <span class="c001">WHERE name = ?</span> clause on the SELECT statement. So in the
<span class="c001">except</span> block, we use the SQL <span class="c001">INSERT</span> statement to add the friend&#X2019;s
<code>screen_name</code> to the table with an indication that we have not yet 
retrieved the <code>screen_name</code> and set the friend count to zero.</span></p><p><span class="c006">So the first time the program runs and we enter a Twitter account, the program
runs as follows:</span></p><pre class="verbatim"><span class="c004">Enter a Twitter account, or quit: drchuck
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 20  revisited= 0
Enter a Twitter account, or quit: quit
</span></pre><p><span class="c006">Since this is the first time we have run the program, the database
is empty and we create the database in the file <span class="c001">spider.sqlite3</span> and
add a table named <span class="c001">Twitter</span> to the database. Then we retrieve
some friends and add them all to the database since the database is
empty.</span></p><p><span class="c006">At this point, we might want to write a simple database dumper
to take a look at what is in our <span class="c001">spider.sqlite3</span> file:</span></p><pre class="verbatim"><span class="c004">import sqlite3

conn = sqlite3.connect('spider.sqlite3')
cur = conn.cursor()
cur.execute('SELECT * FROM Twitter')
count = 0
for row in cur :
   print row
   count = count + 1
print count, 'rows.'
cur.close()
</span></pre><p><span class="c006">This program simply opens the database and selects all of the 
columns of all of the rows in the table <span class="c001">Twitter</span>, then 
loops through the rows and prints out each row.</span></p><p><span class="c006">If we run this program after the first execution of our Twitter
spider above, its output will be as follows:</span></p><pre class="verbatim"><span class="c004">(u'opencontent', 0, 1)
(u'lhawthorn', 0, 1)
(u'steve_coppin', 0, 1)
(u'davidkocher', 0, 1)
(u'hrheingold', 0, 1)
...
20 rows.
</span></pre><p><span class="c006">We see one row for each <code>screen_name</code>, that we 
have not retrieved the data for that <code>screen_name</code>, and 
everyone in the database has one friend.</span></p><p><span class="c006">Now our database reflects the retrieval of the friends of 
our first Twitter account (<span class="c009">drchuck</span>). We can run the program
again and tell it to retrieve the friends of the next 
&#X201C;unprocessed&#X201D; account by simply pressing enter instead of
a Twitter account as follows:</span></p><pre class="verbatim"><span class="c004">Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 18  revisited= 2
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 17  revisited= 3
Enter a Twitter account, or quit: quit
</span></pre><p><span class="c006">Since we pressed enter (i.e., we did not specify a Twitter account),
the following code is executed:</span></p><pre class="verbatim"><span class="c004">    if ( len(acct) &lt; 1 ) :
        cur.execute('SELECT name FROM Twitter WHERE retrieved = 0 LIMIT 1')
        try:
            acct = cur.fetchone()[0]
        except:
            print 'No unretrieved twitter accounts found'
            continue
</span></pre><p><span class="c006">We use the SQL <span class="c001">SELECT</span> statement to retrieve the name of the first 
(<span class="c001">LIMIT 1</span>) user who still has their &#X201C;have we retrieved this user&#X201D;
value set to zero. We also use the <span class="c001">fetchone()[0]</span> pattern within 
a try/except block to either extract a <code>screen_name</code> from the retrieved
data or put out an error message and loop back up.</span></p><p><span class="c006">If we successfully retrieved an unprocessed <code>screen_name</code>, we retrieve
their data as follows:</span></p><pre class="verbatim"><span class="c004">    url = twurl.augment(TWITTER_URL, {'screen_name': acct, 'count': '20'} )
    print 'Retrieving', url
    connection = urllib.urlopen(url)
    data = connection.read()
    js = json.loads(data)

    cur.execute('UPDATE Twitter SET retrieved=1 WHERE name = ?', (acct, ) )
</span></pre><p><span class="c006">Once we retrieve the data successfully, we use the <span class="c001">UPDATE</span> statement 
to set the <span class="c001">retrieved</span> column to 1 to indicate that we have completed 
the retrieval of the friends of this account. This keeps us from retrieving
the same data over and over and keeps us progressing forward through the network
of Twitter friends.</span></p><p><span class="c006">If we run the friend program and press enter twice to retrieve the next 
unvisited friend&#X2019;s friends,
then run the dumping program, it will give us the following output:</span></p><pre class="verbatim"><span class="c004">(u'opencontent', 1, 1)
(u'lhawthorn', 1, 1)
(u'steve_coppin', 0, 1)
(u'davidkocher', 0, 1)
(u'hrheingold', 0, 1)
...
(u'cnxorg', 0, 2)
(u'knoop', 0, 1)
(u'kthanos', 0, 2)
(u'LectureTools', 0, 1)
...
55 rows.
</span></pre><p><span class="c006">We can see that we have properly recorded that we have visited 
<span class="c001">lhawthorn</span> and <span class="c001">opencontent</span>. Also the accounts 
<span class="c001">cnxorg</span> and <span class="c001">kthanos</span> already have two followers.
Since we now have retrieved the friends of three people
(<span class="c001">drchuck</span>, <span class="c001">opencontent</span>, and <span class="c001">lhawthorn</span>) our table has 55 rows 
of friends to retrieve.</span></p><p><span class="c006">Each time we run the program and press enter it will pick the next 
unvisited account (e.g., the next account will be <code>steve_coppin</code>),
retrieve their friends, mark them as retrieved, and for each of the 
friends of <code>steve_coppin</code> either add them to the end of the 
database or update their friend count if they are already in the
database.</span></p><p><span class="c006">Since the program&#X2019;s data is all stored on disk in a database, 
the spidering activity can be suspended and resumed as many times as you 
like with no loss of data.</span></p><span class="c005">
</span><!--TOC section id="sec176" <span class="c000"><span class="c005">Basic data modeling</span></span>-->
<h2 class="section" id="sec176"><span class="c006">14.7&#XA0;&#XA0;Basic data modeling</span></h2><!--SEC END --><p><span class="c006">The real power of a relational database is when we create multiple tables
and make links between those tables. The act of deciding how to break
up your application data into multiple tables and establishing the
relationships between the tables is called <span class="c009">data modeling</span>. The
design document that shows the tables and their relationships 
is called a <span class="c009">data model</span>.</span></p><p><span class="c006">Data modeling is a relatively sophisticated skill and we will only introduce
the most basic concepts of relational data modeling in this section. For more
detail on data modeling you can start with:</span></p><p><span class="c002">http://en.wikipedia.org/wiki/Relational_model</span></p><p><span class="c006">Let&#X2019;s say for our Twitter spider application, instead of just 
counting a person&#X2019;s friends, we wanted to keep a list of 
all of the incoming relationships so we could find a list of 
everyone who is following a particular account.</span></p><p><span class="c006">Since everyone will potentially have many accounts that follow
them, we cannot simply add a single column to our <span class="c001">Twitter</span> table. 
So we create a new table that keeps track of pairs of friends.
The following is a simple way of making such a table:</span></p><pre class="verbatim"><span class="c004">CREATE TABLE Pals (from_friend TEXT, to_friend TEXT)
</span></pre><p><span class="c006">Each time we encounter a person who <span class="c001">drchuck</span> is following, we
would insert a row of the form:</span></p><pre class="verbatim"><span class="c004">INSERT INTO Pals (from_friend,to_friend) VALUES ('drchuck', 'lhawthorn')
</span></pre><p><span class="c006">As we are processing the 20 friends from the <span class="c001">drchuck</span>
Twitter feed, we will insert 20 records with &#X201C;drchuck&#X201D;
as the first parameter so we will end up duplicating the 
string many times in the database.</span></p><p><span class="c006">This duplication of string data violates one of the best practices 
for <span class="c009">database normalization</span> which basically states that
we should never put the same string data in the database more than once. 
If we need the data more than once, we create a 
numeric <span class="c009">key</span> for the data and reference the actual data 
using this key.</span></p><p><span class="c006">In practical terms, a string takes up a lot more 
space than an integer on the disk
and in the memory of our computer, and takes more processor time
to compare and sort. If we only have a few hundred entries, 
the storage and processor time hardly matters. But if we have 
a million people in our database and a possibility of 100 million
friend links, it is important to be able to scan data as quickly
as possible.</span></p><p><span class="c006">We will store our Twitter accounts in a table named <span class="c001">People</span>
instead of the <span class="c001">Twitter</span> table used in the previous example.
The <span class="c001">People</span> table has an additional column 
to store the numeric key associated with the 
row for this Twitter user. 
SQLite has a feature that automatically adds the key value
for any row we insert into a table using a special type of 
data column (<span class="c001">INTEGER PRIMARY KEY</span>).</span></p><p><span class="c006">We can create the <span class="c001">People</span> table with this additional 
<span class="c001">id</span> column as follows:</span></p><pre class="verbatim"><span class="c004">CREATE TABLE People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)
</span></pre><p><span class="c006">Notice that we are no longer maintaining a friend count in each row
of the <span class="c001">People</span> table.
When we select <span class="c001">INTEGER PRIMARY KEY</span> as the type of our <span class="c001">id</span> column,
we are indicating that we would like SQLite to manage this column and 
assign a unique numeric key to each row we insert automatically.
We also add the keyword <span class="c001">UNIQUE</span> to indicate that we will not 
allow SQLite to insert two rows with the same value for <span class="c001">name</span>.</span></p><p><span class="c006">Now instead of creating the table <span class="c001">Pals</span> above, we create
a table called <span class="c001">Follows</span> with two integer columns
<code>from_id</code> and <code>to_id</code> and a constraint on the table that
the <em>combination</em> of <code>from_id</code> and <code>to_id</code> must be unique 
in this table (i.e., we cannot insert duplicate rows) in our database.</span></p><pre class="verbatim"><span class="c004">CREATE TABLE Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id) )
</span></pre><p><span class="c006">When we add <span class="c001">UNIQUE</span> clauses to our tables, we are communicating a set
of rules that we are asking the database to enforce when we attempt to insert
records. We are creating these rules as a convenience in our programs, as we
will see in a moment. The rules both keep us from making mistakes and make
it simpler to write some of our code.</span></p><p><span class="c006">In essence, in creating this <span class="c001">Follows</span> table, we are modelling a 
&#X201C;relationship&#X201D; where one person &#X201C;follows&#X201D; someone else
and representing it with a pair of numbers indicating that (a) the people are
connected and (b) the direction of the relationship.</span></p><div class="center"><span class="c006"><img src="book019.png" /></span></div><span class="c005">
</span><!--TOC section id="sec177" <span class="c000"><span class="c005">Programming with multiple tables</span></span>-->
<h2 class="section" id="sec177"><span class="c006">14.8&#XA0;&#XA0;Programming with multiple tables</span></h2><!--SEC END --><p><span class="c006">We will now redo the Twitter spider program using two tables, the primary
keys, and the key references as described above. Here is the code for 
the new version of the program:</span></p><pre class="verbatim"><span class="c004">import urllib
import twurl
import json
import sqlite3

TWITTER_URL = 'https://api.twitter.com/1.1/friends/list.json'

conn = sqlite3.connect('friends.sqlitesqlite3')
cur = conn.cursor()

cur.execute("'CREATE TABLE IF NOT EXISTS People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)"')
cur.execute("'CREATE TABLE IF NOT EXISTS Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id))"')

while True:
    acct = raw_input('Enter a Twitter account, or quit: ')
    if ( acct == 'quit' ) : break
    if ( len(acct) &lt; 1 ) :
        cur.execute("'SELECT id, name FROM People 
            WHERE retrieved = 0 LIMIT 1"')
        try:
            (id, acct) = cur.fetchone()
        except:
            print 'No unretrieved Twitter accounts found'
            continue
    else:
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1', 
            (acct, ) )
        try:
            id = cur.fetchone()[0]
        except:
            cur.execute("'INSERT OR IGNORE INTO People (name, retrieved) 
                VALUES ( ?, 0)"', ( acct, ) )
            conn.commit()
            if cur.rowcount != 1 : 
                print 'Error inserting account:',acct
                continue
            id = cur.lastrowid

    url = twurl.augment(TWITTER_URL, 
       {'screen_name': acct, 'count': '20'} )
    print 'Retrieving account', acct
    connection = urllib.urlopen(url)
    data = connection.read()
    headers = connection.info().dict
    print 'Remaining', headers['x-rate-limit-remaining']

    js = json.loads(data)
    # print json.dumps(js, indent=4)

    cur.execute('UPDATE People SET retrieved=1 WHERE name = ?', (acct, ) )

    countnew = 0
    countold = 0
    for u in js['users'] :
        friend = u['screen_name']
        print friend
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            friend_id = cur.fetchone()[0]
            countold = countold + 1
        except:
            cur.execute("'INSERT OR IGNORE INTO People (name, retrieved) 
                VALUES ( ?, 0)"', ( friend, ) )
            conn.commit()
            if cur.rowcount != 1 :
                print 'Error inserting account:',friend
                continue
            friend_id = cur.lastrowid
            countnew = countnew + 1
        cur.execute("'INSERT OR IGNORE INTO Follows (from_id, to_id) 
            VALUES (?, ?)"', (id, friend_id) )
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()

cur.close()
</span></pre><p><span class="c006">This program is starting to get a bit complicated, but it illustrates
the patterns that we need to use when we are
using integer keys to link tables. The basic patterns are:</span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006">Create tables with primary keys and constraints.</span></li><li class="li-enumerate"><span class="c006">When we have a logical key for a person (i.e., account
name) and we need the <span class="c001">id</span> value for the person,
depending on whether or not the person is already
in the <span class="c001">People</span> table we either need to: 
(1) look up the person in the <span class="c001">People</span> table and 
retrieve the <span class="c001">id</span> value for the person 
or (2) add the person to the <span class="c001">People</span> table and get the 
<span class="c001">id</span> value for the newly added row.</span></li><li class="li-enumerate"><span class="c006">Insert the row that captures the &#X201C;follows&#X201D; relationship.</span></li></ol><p><span class="c006">We will cover each of these in turn.</span></p><span class="c005">
</span><!--TOC subsection id="sec178" <span class="c000"><span class="c005">Constraints in database tables</span></span>-->
<h3 class="subsection" id="sec178"><span class="c006">14.8.1&#XA0;&#XA0;Constraints in database tables</span></h3><!--SEC END --><p><span class="c006">As we design our table structures, we can tell the database system 
that we would like it to enforce a few rules on us. These rules
help us from making mistakes and introducing incorrect data into 
out tables. When we create our tables:</span></p><pre class="verbatim"><span class="c004">cur.execute("'CREATE TABLE IF NOT EXISTS People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)"')
cur.execute("'CREATE TABLE IF NOT EXISTS Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id))"')
</span></pre><p><span class="c006">We indicate that the <span class="c001">name</span> column in the <span class="c001">People</span> table must be
<span class="c001">UNIQUE</span>. We also indicate that the combination of the two numbers
in each row of the <span class="c001">Follows</span> table must be unique. These constraints
keep us from making mistakes such as adding the same relationship more than
once.</span></p><p><span class="c006">We can take advantage of these constraints in the following code:</span></p><pre class="verbatim"><span class="c004">cur.execute("'INSERT OR IGNORE INTO People (name, retrieved) 
    VALUES ( ?, 0)"', ( friend, ) )
</span></pre><p><span class="c006">We add the <span class="c001">OR IGNORE</span> clause to our <span class="c001">INSERT</span> statement to indicate
that if this particular <span class="c001">INSERT</span> would cause a violation of the
&#X201C;<span class="c001">name</span> must be unique&#X201D; rule, the database system is allowed to ignore the 
<span class="c001">INSERT</span>. We are using the database constraint as a safety net
to make sure we don&#X2019;t inadvertently do something incorrect.</span></p><p><span class="c006">Similarly, the following code ensures that we don&#X2019;t add the 
exact same <span class="c001">Follows</span> relationship twice.</span></p><pre class="verbatim"><span class="c004">cur.execute("'INSERT OR IGNORE INTO Follows 
    (from_id, to_id) VALUES (?, ?)"', (id, friend_id) )
</span></pre><p><span class="c006">Again, we simply tell the database to ignore our attempted 
<span class="c001">INSERT</span> if it would violate the uniqueness constraint
that we specified for the <span class="c001">Follows</span> rows.</span></p><span class="c005">
</span><!--TOC subsection id="sec179" <span class="c000"><span class="c005">Retrieve and/or insert a record</span></span>-->
<h3 class="subsection" id="sec179"><span class="c006">14.8.2&#XA0;&#XA0;Retrieve and/or insert a record</span></h3><!--SEC END --><p><span class="c006">When we prompt the user for a Twitter account, if the account 
exists, we must look up its <span class="c001">id</span> value. If the account
does not yet exist in the <span class="c001">People</span> table, we must insert 
the record and get the <span class="c001">id</span> value from the inserted
row.</span></p><p><span class="c006">This is a very common pattern and is done twice in the program above.
This code shows how we look up the <span class="c001">id</span> for a 
friend&#X2019;s account when we have extracted a <code>screen_name</code>
from a <span class="c001">user</span> node in the retrieved Twitter JSON.</span></p><p><span class="c006">Since over time it will be increasingly likely that the account
will already be in the database, we first check to see if the
<span class="c001">People</span> record exists using a <span class="c001">SELECT</span> statement.</span></p><p><span class="c006">If all goes well</span><sup><a id="text16" href="#note16"><span class="c006">2</span></a></sup><span class="c006"> inside the <span class="c001">try</span> section, we retrieve the
record using <span class="c001">fetchone()</span> and then retrieve the
first (and only) element of the returned tuple and store it in 
<code>friend_id</code>.</span></p><p><span class="c006">If the <span class="c001">SELECT</span> fails, the <span class="c001">fetchone()[0]</span> code will fail
and control will transfer into the <span class="c001">except</span> section.</span></p><pre class="verbatim"><span class="c004">        friend = u['screen_name']
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1',
            (friend, ) )
        try:
            friend_id = cur.fetchone()[0]
            countold = countold + 1
        except:
            cur.execute("'INSERT OR IGNORE INTO People (name, retrieved) 
                VALUES ( ?, 0)"', ( friend, ) )
            conn.commit()
            if cur.rowcount != 1 :
                print 'Error inserting account:',friend
                continue
            friend_id = cur.lastrowid
            countnew = countnew + 1
</span></pre><p><span class="c006">If we end up in the <span class="c001">except</span> code, it simply means that the row
was not found, so we must insert the row. We use <span class="c001">INSERT OR 
IGNORE</span> just to avoid errors and then call <span class="c001">commit()</span> to 
force the database to really be updated. After the write is done, we can 
check the <span class="c001">cur.rowcount</span> to see how many rows were affected. Since
we are attempting to insert a single row, if the number of 
affected rows is something other than 1, it is an error. </span></p><p><span class="c006">If the <span class="c001">INSERT</span> is successful, we can look at <span class="c001">cur.lastrowid</span> 
to find out what value the database assigned to the <span class="c001">id</span> column in 
our newly created row.</span></p><span class="c005">
</span><!--TOC subsection id="sec180" <span class="c000"><span class="c005">Storing the friend relationship</span></span>-->
<h3 class="subsection" id="sec180"><span class="c006">14.8.3&#XA0;&#XA0;Storing the friend relationship</span></h3><!--SEC END --><p><span class="c006">Once we know the key value for both the Twitter user
and the friend in the JSON, it is a simple matter to insert
the two numbers into the <span class="c001">Follows</span> table
with the following code:</span></p><pre class="verbatim"><span class="c004">cur.execute('INSERT OR IGNORE INTO Follows (from_id, to_id) VALUES (?, ?)',
    (id, friend_id) )
</span></pre><p><span class="c006">Notice that we let the database take care of keeping us from &#X201C;double-inserting&#X201D;
a relationship by creating the table with a uniqueness constraint and then
adding <span class="c001">OR IGNORE</span> to our <span class="c001">INSERT</span> statement.</span></p><p><span class="c006">Here is a sample execution of this program:</span></p><pre class="verbatim"><span class="c004">Enter a Twitter account, or quit: 
No unretrieved Twitter accounts found
Enter a Twitter account, or quit: drchuck
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 20  revisited= 0
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 17  revisited= 3
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/1.1/friends ...
New accounts= 17  revisited= 3
Enter a Twitter account, or quit: quit
</span></pre><p><span class="c006">We started with the <span class="c001">drchuck</span> account and then let the program
automatically pick the next two accounts to retrieve and add to 
our database.</span></p><p><span class="c006">The following is the first few rows in the <span class="c001">People</span> 
and <span class="c001">Follows</span> tables after this run is completed:</span></p><pre class="verbatim"><span class="c004">People:
(1, u'drchuck', 1)
(2, u'opencontent', 1)
(3, u'lhawthorn', 1)
(4, u'steve_coppin', 0)
(5, u'davidkocher', 0)
55 rows.
Follows:
(1, 2)
(1, 3)
(1, 4)
(1, 5)
(1, 6)
60 rows.
</span></pre><p><span class="c006">You can see the <span class="c001">id</span>, <span class="c001">name</span>, and <span class="c001">visited</span> fields in the 
<span class="c001">People</span> table and you see the numbers of both ends of 
the relationship in the <span class="c001">Follows</span> table. 
In the <span class="c001">People</span> table, we can see that the first three people
have been visited and their data has been retrieved.
The data in the <span class="c001">Follows</span> table indicates that
<span class="c001">drchuck</span> (user 1) is a friend to all of the people shown in the first
five rows. This makes sense because
the first data we retrieved and stored was the Twitter friends of
<span class="c001">drchuck</span>. If you were to print more rows from the <span class="c001">Follows</span> table,
you would see the friends of users 2 and 3 as well.</span></p><span class="c005">
</span><!--TOC section id="sec181" <span class="c000"><span class="c005">Three kinds of keys</span></span>-->
<h2 class="section" id="sec181"><span class="c006">14.9&#XA0;&#XA0;Three kinds of keys</span></h2><!--SEC END --><p><span class="c006">Now that we have started building a data model putting our
data into multiple linked tables and linking the rows in those
tables using <span class="c009">keys</span>, we need to look at some terminology 
around keys. There are generally three kinds of keys used 
in a database model.</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">A <span class="c009">logical key</span> is a key that the &#X201C;real world&#X201D; might use
to look up a row. In our example data model, the <span class="c001">name</span>
field is a logical key. It is the screen name for the user 
and we indeed look up a user&#X2019;s row several times in the program
using the <span class="c001">name</span> field. You will often find that it makes
sense to add a <span class="c001">UNIQUE</span> constraint to a logical key. Since the 
logical key is how we look up a row from the outside world, it makes
little sense to allow multiple rows with the same value in the table.</span></li><li class="li-itemize"><span class="c006">A <span class="c009">primary key</span> is usually a number that is assigned
automatically by the database. It generally has no meaning outside
the program and is only used to link rows from different tables
together. When we want to look up a row in a table, usually 
searching for the row using the primary key is the fastest 
way to find the row. Since primary keys are integer numbers, they 
take up very little storage and can be compared or sorted very quickly.
In our data model, the <span class="c001">id</span> field is an example of a primary key.</span></li><li class="li-itemize"><span class="c006">A <span class="c009">foreign key</span> is usually a number that points to the primary key
of an associated row in a different table. An example of a foreign
key in our data model is the <code>from_id</code>. </span></li></ul><p><span class="c006">We are using a
naming convention of always calling the primary key field name
<span class="c001">id</span> and appending the suffix <code>_id</code> to any field name
that is a foreign key.</span></p><span class="c005">
</span><!--TOC section id="sec182" <span class="c000"><span class="c005">Using JOIN to retrieve data</span></span>-->
<h2 class="section" id="sec182"><span class="c006">14.10&#XA0;&#XA0;Using JOIN to retrieve data</span></h2><!--SEC END --><p><span class="c006">Now that we have followed the rules of database normalization
and have data separated into two tables, linked together using
primary and foreign keys, we need to be able to build a 
<span class="c001">SELECT</span> that reassembles the data across the tables.</span></p><p><span class="c006">SQL uses the <span class="c001">JOIN</span> clause to reconnect these tables. 
In the <span class="c001">JOIN</span> clause you specify the fields that are used 
to reconnect the rows between the tables.</span></p><p><span class="c006">The following is an example of a <span class="c001">SELECT</span> with a 
<span class="c001">JOIN</span> clause:</span></p><pre class="verbatim"><span class="c004">SELECT * FROM Follows JOIN People 
    ON Follows.from_id = People.id WHERE People.id = 1
</span></pre><p><span class="c006">The <span class="c001">JOIN</span> clause indicates that the fields we are selecting
cross both the <span class="c001">Follows</span> and <span class="c001">People</span> tables. The <span class="c001">ON</span>
clause indicates how the two tables are to be joined: Take the rows
from <span class="c001">Follows</span> and append the row from <span class="c001">People</span> where the
field <code>from_id</code> in <span class="c001">Follows</span> is the same the <span class="c001">id</span> value
in the <span class="c001">People</span> table.</span></p><div class="center"><span class="c006"><img src="book020.png" /></span></div><p><span class="c006">The result of the JOIN is to create extra-long &#X201C;metarows&#X201D; which have both 
the fields from <span class="c001">People</span> and the matching fields from <span class="c001">Follows</span>.
Where there is more than one match between the <span class="c001">id</span> field from <span class="c001">People</span>
and the <code>from_id</code> from <span class="c001">People</span>, then JOIN creates a metarow 
for <em>each</em> of the matching pairs of rows, duplicating data as needed.</span></p><p><span class="c006">The following code demonstrates the data that we will have in the 
database after the multi-table Twitter spider program (above) has
been run several times.</span></p><pre class="verbatim"><span class="c004">import sqlite3

conn = sqlite3.connect('spider.sqlite3')
cur = conn.cursor()

cur.execute('SELECT * FROM People')
count = 0
print 'People:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.execute('SELECT * FROM Follows')
count = 0
print 'Follows:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.execute("'SELECT * FROM Follows JOIN People 
    ON Follows.from_id = People.id WHERE People.id = 2"')
count = 0
print 'Connections for id=2:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.close()
</span></pre><p><span class="c006">In this program, we first dump out the <span class="c001">People</span>
and <span class="c001">Follows</span> and then dump out a subset of the
data in the tables joined together.</span></p><p><span class="c006">Here is the output of the program:</span></p><pre class="verbatim"><span class="c004">python twjoin.py 
People:
(1, u'drchuck', 1)
(2, u'opencontent', 1)
(3, u'lhawthorn', 1)
(4, u'steve_coppin', 0)
(5, u'davidkocher', 0)
55 rows.
Follows:
(1, 2)
(1, 3)
(1, 4)
(1, 5)
(1, 6)
60 rows.
Connections for id=2:
(2, 1, 1, u'drchuck', 1)
(2, 28, 28, u'cnxorg', 0)
(2, 30, 30, u'kthanos', 0)
(2, 102, 102, u'SomethingGirl', 0)
(2, 103, 103, u'ja_Pac', 0)
20 rows.
</span></pre><p><span class="c006">You see the columns from the <span class="c001">People</span> and <span class="c001">Follows</span> tables and the last
set of rows is the result of the <span class="c001">SELECT</span> with the <span class="c001">JOIN</span> clause.</span></p><p><span class="c006">In the last select, we are looking for accounts that are friends of 
&#X201C;opencontent&#X201D; (i.e., <span class="c001">People.id=2</span>).</span></p><p><span class="c006">In each of the &#X201C;metarows&#X201D; in the last select, the first two columns are
from the <span class="c001">Follows</span>
table followed by columns three through five from the <span class="c001">People</span> table. You can also
see that the second column (<code>Follows.to_id</code>) matches the third column
(<span class="c001">People.id</span>) in each of the joined-up &#X201C;metarows&#X201D;.</span></p><span class="c005">
</span><!--TOC section id="sec183" <span class="c000"><span class="c005">Summary</span></span>-->
<h2 class="section" id="sec183"><span class="c006">14.11&#XA0;&#XA0;Summary</span></h2><!--SEC END --><p><span class="c006">This chapter has covered a lot of ground to give you an overview of the basics
of using a database in Python. It is more complicated to write the code to use 
a database to store data than Python dictionaries or flat files so there is 
little reason to use a database unless your application truly needs the capabilities
of a database. The situations where a database can be quite useful are: 
(1) when your application needs to make small many random updates within a large data set,
(2) when your data is so large it cannot fit in a dictionary and you need to 
look up information repeatedly, or (3) when you have a long-running process that you
want to be able to stop and restart and retain the data from one run to the next.</span></p><p><span class="c006">You can build a simple database with a single table to suit many application 
needs, but most problems will require several tables and links/relationships
between rows in different tables. When you start making links between 
tables, it is important to do some thoughtful design and follow the 
rules of database normalization to make the best use of the database&#X2019;s
capabilities. Since the primary motivation for using a database
is that you have a large amount of data to deal with, it is important
to model your data efficiently so your programs run as fast as possible.</span></p><span class="c005">
</span><!--TOC section id="sec184" <span class="c000"><span class="c005">Debugging</span></span>-->
<h2 class="section" id="sec184"><span class="c006">14.12&#XA0;&#XA0;Debugging</span></h2><!--SEC END --><p><span class="c006">One common pattern when you are developing a Python program to connect to
an SQLite database will be to run a Python program and check the
results using the SQLite Database Browser. The browser allows you 
to quickly check to see if your program is working properly.</span></p><p><span class="c006">You must be careful because SQLite takes care to keep two programs
from changing the same data at the same time. For example, if
you open a database in the browser and make a change to the database
and have not yet pressed the &#X201C;save&#X201D; button in the browser, the 
browser &#X201C;locks&#X201D; the database file and keeps any other program
from accessing the file. In particular, your Python program
will not be able to access the file if it is locked.</span></p><p><span class="c006">So a solution is to make sure to either close the database browser 
or use the <span class="c009">File</span> menu to close the database in the browser
before you attempt to access the database from Python to avoid
the problem of your Python code failing because the database is
locked.</span></p><span class="c005">
</span><!--TOC section id="sec185" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec185"><span class="c006">14.13&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">attribute:</span></dt><dd class="dd-description"><span class="c006"> One of the values within a tuple. More commonly
called a &#X201C;column&#X201D; or &#X201C;field&#X201D;.
</span><a id="hevea_default794"></a></dd><dt class="dt-description"><span class="c010">constraint:</span></dt><dd class="dd-description"><span class="c006"> 
When we tell the database to enforce a rule on a field or a row
in a table. A common constraint is to insist that there can be no
duplicate values in a particular field (i.e., all the values must be unique).
</span><a id="hevea_default795"></a></dd><dt class="dt-description"><span class="c010">cursor:</span></dt><dd class="dd-description"><span class="c006"> A cursor allows you to execute SQL commands in a database
and retrieve data from the database. A cursor is similar to 
a socket or file handle for network connections and files, respectively.
</span><a id="hevea_default796"></a></dd><dt class="dt-description"><span class="c010">database browser:</span></dt><dd class="dd-description"><span class="c006"> 
A piece of software that allows you to directly connect to a database 
and manipulate the database directly without writing a program.
</span><a id="hevea_default797"></a></dd><dt class="dt-description"><span class="c010">foreign key:</span></dt><dd class="dd-description"><span class="c006"> A numeric key that points to the primary key of 
a row in another table. Foreign keys establish relationships between rows
stored in different tables.
</span><a id="hevea_default798"></a></dd><dt class="dt-description"><span class="c010">index:</span></dt><dd class="dd-description"><span class="c006"> Additional data that the database software maintains as rows
and inserts into a table to make lookups very fast.
</span><a id="hevea_default799"></a></dd><dt class="dt-description"><span class="c010">logical key:</span></dt><dd class="dd-description"><span class="c006"> A key that the &#X201C;outside world&#X201D; uses to look up a particular
row. For example in a table of user accounts, a person&#X2019;s email address
might be a good candidate as the logical key for the user&#X2019;s data. 
</span><a id="hevea_default800"></a></dd><dt class="dt-description"><span class="c010">normalization:</span></dt><dd class="dd-description"><span class="c006"> Designing a data model so that no data
is replicated. We store each item of data at one place in the database
and reference it elsewhere using a foreign key.
</span><a id="hevea_default801"></a><span class="c005">
</span><a id="hevea_default802"></a></dd><dt class="dt-description"><span class="c010">primary key:</span></dt><dd class="dd-description"><span class="c006"> A numeric key assigned to each row that is used to 
refer to one row in a table from another table. Often the database
is configured to automatically assign primary keys as rows are inserted.
</span><a id="hevea_default803"></a></dd><dt class="dt-description"><span class="c010">relation:</span></dt><dd class="dd-description"><span class="c006"> An area within a database that contains tuples and 
attributes. More typically called a &#X201C;table&#X201D;.
</span><a id="hevea_default804"></a></dd><dt class="dt-description"><span class="c010">tuple:</span></dt><dd class="dd-description"><span class="c006"> A single entry in a database table that is a set 
of attributes. More typically called &#X201C;row&#X201D;.
</span><a id="hevea_default805"></a></dd></dl><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note15" href="#text15"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">SQLite actually does allow some 
flexibility in the type of data stored in a column,
but we will keep our data types strict in this chapter
so the concepts apply equally to other database systems 
such as MySQL.</div>
</span></dd><dt class="dt-thefootnotes"><a id="note16" href="#text16"><span class="c006">2</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">In general, when a sentence starts 
with &#X201C;if all goes well&#X201D; you will find that the code needs
to use try/except.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec186" <span class="c000"><span class="c005">Visualizing data</span></span>-->
<h1 class="chapter" id="sec186"><span class="c006">Chapter&#XA0;15&#XA0;&#XA0;Visualizing data</span></h1><!--SEC END --><p><span class="c006">So far we have been learning the Python language and then 
learning how to use Python, the network, and databases 
to manipulate data.</span></p><p><span class="c006">In this chapter, we take a look at three 
complete applications that bring all of these things together
to manage and visualize data. You might use these applications 
as sample code to help get you started in solving a
real-world problem.</span></p><p><span class="c006">Each of the applications is a ZIP file that you can download
and extract onto your computer and execute.</span></p><span class="c005">
</span><!--TOC section id="sec187" <span class="c000"><span class="c005">Building a Google map from geocoded data</span></span>-->
<h2 class="section" id="sec187"><span class="c006">15.1&#XA0;&#XA0;Building a Google map from geocoded data</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default806"></a><span class="c005">
</span><a id="hevea_default807"></a></p><p><span class="c006">In this project, we are using the Google geocoding API
to clean up some user-entered geographic locations of 
university names and then placing the data on a Google
map. </span></p><div class="center"><span class="c006"><img src="book021.png" /></span></div><p><span class="c006">To get started, download the application from:</span></p><p><span class="c002">www.py4inf.com/code/geodata.zip</span></p><p><span class="c006">The first problem to solve is that the free Google geocoding
API is rate-limited to a certain number of requests per day. If you have
a lot of data, you might need to stop and restart the lookup
process several times. So we break the problem into two
phases. </span></p><p><a id="hevea_default808"></a><span class="c006">
In the first phase we take our input &#X201C;survey&#X201D; data in the file
<span class="c009">where.data</span> and read it one line at a time, and retrieve the
geocoded information from Google and store it 
in a database <span class="c009">geodata.sqlite</span>.
Before we use the geocoding API for each user-entered location, 
we simply check to see if we already have the data for that 
particular line of input. The database is functioning as a 
local &#X201C;cache&#X201D; of our geocoding data to make sure we never ask 
Google for the same data twice.</span></p><p><span class="c006">You can restart the process at any time by removing the file
<span class="c009">geodata.sqlite</span>.</span></p><p><span class="c006">Run the <span class="c009">geoload.py</span> program. This program will read the input
lines in <span class="c009">where.data</span> and for each line check to see if it is already
in the database. If we don&#X2019;t have the data for the location, it will
call the geocoding API to retrieve the data and store it in 
the database.</span></p><p><span class="c006">Here is a sample run after there is already some data in the 
database:</span></p><pre class="verbatim"><span class="c004">Found in database  Northeastern University
Found in database  University of Hong Kong, ...
Found in database  Technion
Found in database  Viswakarma Institute, Pune, India
Found in database  UMD
Found in database  Tufts University

Resolving Monash University
Retrieving http://maps.googleapis.com/maps/api/
    geocode/json?sensor=false&amp;address=Monash+University
Retrieved 2063 characters {    "results" : [  
{u'status': u'OK', u'results': ... }

Resolving Kokshetau Institute of Economics and Management
Retrieving http://maps.googleapis.com/maps/api/
    geocode/json?sensor=false&amp;address=Kokshetau+Inst ...
Retrieved 1749 characters {    "results" : [  
{u'status': u'OK', u'results': ... }
...
</span></pre><p><span class="c006">The first five locations are already in the database and so they 
are skipped. The program scans to the point where it finds new
locations and starts retrieving them.</span></p><p><span class="c006">The <span class="c009">geoload.py</span> program can be stopped at any time, and there is a counter 
that you can use to limit the number of calls to the geocoding
API for each run. Given that the <span class="c009">where.data</span> only has a few hundred
data items, you should not run into the daily rate limit, but if you 
had more data it might take several runs over several days to 
get your database to have all of the geocoded data for your input.</span></p><p><span class="c006">Once you have some data loaded into <span class="c009">geodata.sqlite</span>, you can 
visualize the data using the <span class="c009">geodump.py</span> program. This
program reads the database and writes the file <span class="c009">where.js</span>
with the location, latitude, and longitude in the form of
executable JavaScript code. </span></p><p><span class="c006">A run of the <span class="c009">geodump.py</span> program is as follows:</span></p><pre class="verbatim"><span class="c004">Northeastern University, ... Boston, MA 02115, USA 42.3396998 -71.08975
Bradley University, 1501 ... Peoria, IL 61625, USA 40.6963857 -89.6160811
...
Technion, Viazman 87, Kesalsaba, 32000, Israel 32.7775 35.0216667
Monash University Clayton ... VIC 3800, Australia -37.9152113 145.134682
Kokshetau, Kazakhstan 53.2833333 69.3833333
...
12 records written to where.js
Open where.html to view the data in a browser
</span></pre><p><span class="c006">The file <span class="c009">where.html</span> consists of HTML and JavaScript to visualize 
a Google map. It reads the most recent data in <span class="c009">where.js</span> to get 
the data to be visualized. Here is the format of the <span class="c009">where.js</span> file:</span></p><pre class="verbatim"><span class="c004">myData = [
[42.3396998,-71.08975, 'Northeastern Uni ... Boston, MA 02115'],
[40.6963857,-89.6160811, 'Bradley University, ... Peoria, IL 61625, USA'],
[32.7775,35.0216667, 'Technion, Viazman 87, Kesalsaba, 32000, Israel'],
   ...
];
</span></pre><p><span class="c006">This is a JavaScript variable that contains a list of lists. 
The syntax for JavaScript list constants is very similar to 
Python, so the syntax should be familiar to you.</span></p><p><span class="c006">Simply open <span class="c009">where.html</span> in a browser to see the locations. You 
can hover over each map pin to find the location that the 
geocoding API returned for the user-entered input. If you 
cannot see any data when you open the <span class="c009">where.html</span> file, you might 
want to check the JavaScript or developer console for your browser.</span></p><span class="c005">
</span><!--TOC section id="sec188" <span class="c000"><span class="c005">Visualizing networks and interconnections</span></span>-->
<h2 class="section" id="sec188"><span class="c006">15.2&#XA0;&#XA0;Visualizing networks and interconnections</span></h2><!--SEC END --><p><span class="c005">
</span><a id="hevea_default809"></a><span class="c005">
</span><a id="hevea_default810"></a><span class="c005">
</span><a id="hevea_default811"></a></p><p><span class="c006">In this application, we will perform some of the functions of a search
engine. We will first spider a small subset of the web and run
a simplified version of the Google page rank algorithm to
determine which pages are most highly connected, and then visualize
the page rank and connectivity of our small corner of the web.
We will use the D3 JavaScript visualization library 
<span class="c001">http://d3js.org/</span> to produce the visualization output.</span></p><p><span class="c006">You can download and extract this application from:</span></p><p><span class="c002">www.py4inf.com/code/pagerank.zip</span></p><div class="center"><span class="c006"><img src="book022.png" /></span></div><p><span class="c006">The first program (<span class="c009">spider.py</span>) program crawls a web 
site and pulls a series of pages into the
database (<span class="c009">spider.sqlite</span>), recording the links between pages.
You can restart the process at any time by removing the 
<span class="c009">spider.sqlite</span> file and rerunning <span class="c009">spider.py</span>.</span></p><pre class="verbatim"><span class="c004">Enter web url or enter: http://www.dr-chuck.com/
['http://www.dr-chuck.com']
How many pages:2
1 http://www.dr-chuck.com/ 12
2 http://www.dr-chuck.com/csev-blog/ 57
How many pages:
</span></pre><p><span class="c006">In this sample run, we told it to crawl a website and retrieve two 
pages. If you restart the program and tell it to crawl more
pages, it will not re-crawl any pages already in the database. Upon 
restart it goes to a random non-crawled page and starts there. So 
each successive run of <span class="c009">spider.py</span> is additive.</span></p><pre class="verbatim"><span class="c004">Enter web url or enter: http://www.dr-chuck.com/
['http://www.dr-chuck.com']
How many pages:3
3 http://www.dr-chuck.com/csev-blog 57
4 http://www.dr-chuck.com/dr-chuck/resume/speaking.htm 1
5 http://www.dr-chuck.com/dr-chuck/resume/index.htm 13
How many pages:
</span></pre><p><span class="c006">You can have multiple starting points in the same database&#X2014;within
the program, these are called &#X201C;webs&#X201D;. The spider
chooses randomly amongst all non-visited links across all
the webs as the next page to spider.</span></p><p><span class="c006">If you want to dump the contents of the <span class="c009">spider.sqlite</span> file, you can 
run <span class="c009">spdump.py</span> as follows:</span></p><pre class="verbatim"><span class="c004">(5, None, 1.0, 3, u'http://www.dr-chuck.com/csev-blog')
(3, None, 1.0, 4, u'http://www.dr-chuck.com/dr-chuck/resume/speaking.htm')
(1, None, 1.0, 2, u'http://www.dr-chuck.com/csev-blog/')
(1, None, 1.0, 5, u'http://www.dr-chuck.com/dr-chuck/resume/index.htm')
4 rows.
</span></pre><p><span class="c006">This shows the number of incoming links, the old page rank, the new page
rank, the id of the page, and the url of the page. The <span class="c009">spdump.py</span> program
only shows pages that have at least one incoming link to them.</span></p><p><span class="c006">Once you have a few pages in the database, you can run page rank on the
pages using the <span class="c009">sprank.py</span> program. You simply tell it how many page
rank iterations to run.</span></p><pre class="verbatim"><span class="c004">How many iterations:2
1 0.546848992536
2 0.226714939664
[(1, 0.559), (2, 0.659), (3, 0.985), (4, 2.135), (5, 0.659)]
</span></pre><p><span class="c006">You can dump the database again to see that page rank has been updated:</span></p><pre class="verbatim"><span class="c004">(5, 1.0, 0.985, 3, u'http://www.dr-chuck.com/csev-blog')
(3, 1.0, 2.135, 4, u'http://www.dr-chuck.com/dr-chuck/resume/speaking.htm')
(1, 1.0, 0.659, 2, u'http://www.dr-chuck.com/csev-blog/')
(1, 1.0, 0.659, 5, u'http://www.dr-chuck.com/dr-chuck/resume/index.htm')
4 rows.
</span></pre><p><span class="c006">You can run <span class="c009">sprank.py</span> as many times as you like and it will simply refine
the page rank each time you run it. You can even run <span class="c009">sprank.py</span> a few times
and then go spider a few more pages sith <span class="c009">spider.py</span> and then run <span class="c009">sprank.py</span>
to reconverge the page rank values. A search engine usually runs both the crawling and 
ranking programs all the time.</span></p><p><span class="c006">If you want to restart the page rank calculations without respidering the 
web pages, you can use <span class="c009">spreset.py</span> and then restart <span class="c009">sprank.py</span>.</span></p><pre class="verbatim"><span class="c004">How many iterations:50
1 0.546848992536
2 0.226714939664
3 0.0659516187242
4 0.0244199333
5 0.0102096489546
6 0.00610244329379
...
42 0.000109076928206
43 9.91987599002e-05
44 9.02151706798e-05
45 8.20451504471e-05
46 7.46150183837e-05
47 6.7857770908e-05
48 6.17124694224e-05
49 5.61236959327e-05
50 5.10410499467e-05
[(512, 0.0296), (1, 12.79), (2, 28.93), (3, 6.808), (4, 13.46)]
</span></pre><p><span class="c006">For each iteration of the page rank algorithm it prints the average
change in page rank per page. The network initially is quite
unbalanced and so the individual page rank values change wildly between
iterations. But in a few short iterations, the page rank converges. You
should run <span class="c009">prank.py</span> long enough that the page rank values converge.</span></p><p><span class="c006">If you want to visualize the current top pages in terms of page rank,
run <span class="c009">spjson.py</span> to read the database and write the data for the 
most highly linked pages in JSON format to be viewed in a
web browser.</span></p><pre class="verbatim"><span class="c004">Creating JSON output on spider.json...
How many nodes? 30
Open force.html in a browser to view the visualization
</span></pre><p><span class="c006">You can view this data by opening the file <span class="c009">force.html</span> in your web browser. 
This shows an automatic layout of the nodes and links. You can click and 
drag any node and you can also double-click on a node to find the URL
that is represented by the node.</span></p><p><span class="c006">If you rerun the other utilities, rerun <span class="c009">spjson.py</span> and
press refresh in the browser to get the new data from <span class="c009">spider.json</span>.</span></p><span class="c005">
</span><!--TOC section id="sec189" <span class="c000"><span class="c005">Visualizing mail data</span></span>-->
<h2 class="section" id="sec189"><span class="c006">15.3&#XA0;&#XA0;Visualizing mail data</span></h2><!--SEC END --><p><span class="c006">Up to this point in the book, you have become quite familiar with our 
<span class="c009">mbox-short.txt</span> and <span class="c009">mbox.txt</span> data files. Now it is time to take
our analysis of email data to the next level. </span></p><p><span class="c006">In the real world, sometimes you have to pull down mail data from servers.
That might take quite some time and the data might be inconsistent, 
error-filled, and need a lot of cleanup or adjustment. In this section, we
work with an application that is the most complex so far and pull down nearly a 
gigabyte of data and visualize it.</span></p><div class="center"><span class="c006"><img src="book023.png" /></span></div><p><span class="c006">You can download this application from:</span></p><p><span class="c002">www.py4inf.com/code/gmane.zip</span></p><p><span class="c006">We will be using data from a free email list archiving service called 
<span class="c001">www.gmane.org</span>. This service is very popular with open source
projects because it provides a nice searchable archive of their 
email activity. They also have a very liberal policy regarding accessing 
their data through their API. They have no rate limits, but ask that you 
don&#X2019;t overload their service and take only the data you need. You can read
gmane&#X2019;s terms and conditions at this page:</span></p><p><span class="c002">http://gmane.org/export.php</span></p><p><span class="c006"><em>It is very important that you make use of the gmane.org data
responsibly by adding delays to your access of their services and spreading
long-running jobs over a longer period of time. Do not abuse this free service
and ruin it for the rest of us.</em></span></p><p><span class="c006">When the Sakai email data was spidered using this software, it produced nearly 
a Gigabyte of data and took a number of runs on several days.
The file <span class="c009">README.txt</span> in the above ZIP may have instructions as to how
you can download a pre-spidered copy of the <span class="c009">content.sqlite</span> file for 
a majority of the Sakai email corpus so you don&#X2019;t have to spider for 
five days just to run the programs. If you download the pre-spidered
content, you should still run the spidering process to catch up with 
more recent messages.</span></p><p><span class="c006">The first step is to spider the gmane repository. The base URL 
is hard-coded in the <span class="c009">gmane.py</span> and is hard-coded to the Sakai
developer list. You can spider another repository by changing that
base url. Make sure to delete the <span class="c009">content.sqlite</span> file if you 
switch the base url. </span></p><p><span class="c006">The <span class="c009">gmane.py</span> file operates as a responsible caching spider in 
that it runs slowly and retrieves one mail message per second so 
as to avoid getting throttled by gmane. It stores all of
its data in a database and can be interrupted and restarted 
as often as needed. It may take many hours to pull all the data
down. So you may need to restart several times.</span></p><p><span class="c006">Here is a run of <span class="c009">gmane.py</span> retrieving the last five messages of the
Sakai developer list:</span></p><pre class="verbatim"><span class="c004">How many messages:10
http://download.gmane.org/gmane.comp.cms.sakai.devel/51410/51411 9460
    nealcaidin@sakaifoundation.org 2013-04-05 re: [building ...
http://download.gmane.org/gmane.comp.cms.sakai.devel/51411/51412 3379
    samuelgutierrezjimenez@gmail.com 2013-04-06 re: [building ...
http://download.gmane.org/gmane.comp.cms.sakai.devel/51412/51413 9903
    da1@vt.edu 2013-04-05 [building sakai] melete 2.9 oracle ...
http://download.gmane.org/gmane.comp.cms.sakai.devel/51413/51414 349265
    m.shedid@elraed-it.com 2013-04-07 [building sakai] ...
http://download.gmane.org/gmane.comp.cms.sakai.devel/51414/51415 3481
    samuelgutierrezjimenez@gmail.com 2013-04-07 re: ...
http://download.gmane.org/gmane.comp.cms.sakai.devel/51415/51416 0

Does not start with From 
</span></pre><p><span class="c006">The program scans <span class="c009">content.sqlite</span> from one up to the first message number not
already spidered and starts spidering at that message. It continues spidering
until it has spidered the desired number of messages or it reaches a page
that does not appear to be a properly formatted message.</span></p><p><span class="c006">Sometimes <span class="c001">gmane.org</span> is missing a message. Perhaps administrators can delete messages
or perhaps they get lost. If your spider stops, and it seems it has hit
a missing message, go into the SQLite Manager and add a row with the missing id leaving
all the other fields blank and restart <span class="c009">gmane.py</span>. This will unstick the 
spidering process and allow it to continue. These empty messages will be ignored in the next
phase of the process.</span></p><p><span class="c006">One nice thing is that once you have spidered all of the messages and have them in 
<span class="c009">content.sqlite</span>, you can run <span class="c009">gmane.py</span> again to get new messages as 
they are sent to the list. </span></p><p><span class="c006">The <span class="c009">content.sqlite</span> data is pretty raw, with an inefficient data model, 
and not compressed.
This is intentional as it allows you to look at <span class="c009">content.sqlite</span>
in the SQLite Manager to debug problems with the spidering process.
It would be a bad idea to run any queries against this database, as they 
would be quite slow.</span></p><p><span class="c006">The second process is to run the program <span class="c009">gmodel.py</span>. This program reads the raw 
data from <span class="c009">content.sqlite</span> and produces a cleaned-up and well-modeled version of the 
data in the file <span class="c009">index.sqlite</span>. This file will be much smaller (often 10X
smaller) than <span class="c009">content.sqlite</span> because it also compresses the header and body text.</span></p><p><span class="c006">Each time <span class="c009">gmodel.py</span> runs it deletes and rebuilds <span class="c009">index.sqlite</span>, allowing
you to adjust its parameters and edit the mapping tables in <span class="c009">content.sqlite</span> to tweak the 
data cleaning process. This is a sample run of <span class="c009">gmodel.py</span>. It prints a line out each time
250 mail messages are processed so you can see some progress happening, as this program may
run for a while processing nearly a Gigabyte of mail data.</span></p><pre class="verbatim"><span class="c004">Loaded allsenders 1588 and mapping 28 dns mapping 1
1 2005-12-08T23:34:30-06:00 ggolden22@mac.com
251 2005-12-22T10:03:20-08:00 tpamsler@ucdavis.edu
501 2006-01-12T11:17:34-05:00 lance@indiana.edu
751 2006-01-24T11:13:28-08:00 vrajgopalan@ucmerced.edu
...
</span></pre><p><span class="c006">The <span class="c009">gmodel.py</span> program handles a number of data cleaning tasks.</span></p><p><span class="c006">Domain names are truncated to two levels for .com, .org, .edu, and .net.
Other domain names are truncated to three levels. So si.umich.edu becomes
umich.edu and caret.cam.ac.uk becomes cam.ac.uk. Email addresses are also
forced to lower case, and some of the @gmane.org address like the following</span></p><pre class="verbatim"><span class="c004">   arwhyte-63aXycvo3TyHXe+LvDLADg@public.gmane.org
</span></pre><p><span class="c006">are converted to the real address whenever there is a matching real email
address elsewhere in the message corpus.</span></p><p><span class="c006">In the <span class="c009">content.sqlite</span> database there are two tables that allow
you to map both domain names and individual email addresses that change over 
the lifetime of the email list. For example, Steve Githens used the following
email addresses as he changed jobs over the life of the Sakai developer list:</span></p><pre class="verbatim"><span class="c004">s-githens@northwestern.edu
sgithens@cam.ac.uk
swgithen@mtu.edu
</span></pre><p><span class="c006">We can add two entries to the Mapping table in <span class="c009">content.sqlite</span> so 
<span class="c009">gmodel.py</span> will map all three to one address:</span></p><pre class="verbatim"><span class="c004">s-githens@northwestern.edu -&gt;  swgithen@mtu.edu
sgithens@cam.ac.uk -&gt; swgithen@mtu.edu
</span></pre><p><span class="c006">You can also make similar entries in the DNSMapping table if there are multiple
DNS names you want mapped to a single DNS. The following mapping was added to the Sakai data:</span></p><pre class="verbatim"><span class="c004">iupui.edu -&gt; indiana.edu
</span></pre><p><span class="c006">so all the accounts from the various Indiana University campuses are tracked together.</span></p><p><span class="c006">You can rerun the <span class="c009">gmodel.py</span> over and over as you look at the data, and add mappings
to make the data cleaner and cleaner. When you are done, you will have a nicely
indexed version of the email in <span class="c009">index.sqlite</span>. This is the file to use to do data
analysis. With this file, data analysis will be really quick.</span></p><p><span class="c006">The first, simplest data analysis is to determine "who sent the most mail?" and "which 
organization sent the most mail"? This is done using <span class="c009">gbasic.py</span>:</span></p><pre class="verbatim"><span class="c004">How many to dump? 5
Loaded messages= 51330 subjects= 25033 senders= 1584

Top 5 Email list participants
steve.swinsburg@gmail.com 2657
azeckoski@unicon.net 1742
ieb@tfd.co.uk 1591
csev@umich.edu 1304
david.horwitz@uct.ac.za 1184

Top 5 Email list organizations
gmail.com 7339
umich.edu 6243
uct.ac.za 2451
indiana.edu 2258
unicon.net 2055
</span></pre><p><span class="c006">Note how much more quickly <span class="c009">gbasic.py</span> runs compared to <span class="c009">gmane.py</span>
or even <span class="c009">gmodel.py</span>. They are all working on the same data, but 
<span class="c009">gbasic.py</span> is using the compressed and normalized data in 
<span class="c009">index.sqlite</span>. If you have a lot of data to manage, a multistep
process like the one in this application may take a little longer to develop,
but will save you a lot of time when you really start to explore
and visualize your data.</span></p><p><span class="c006">You can produce a simple visualization of the word frequency in the subject lines
in the file <span class="c009">gword.py</span>:</span></p><pre class="verbatim"><span class="c004">Range of counts: 33229 129
Output written to gword.js
</span></pre><p><span class="c006">This produces the file <span class="c009">gword.js</span> which you can visualize using
<span class="c009">gword.htm</span> to produce a word cloud similar to the one at the beginning 
of this section.</span></p><p><span class="c006">A second visualization is produced by <span class="c009">gline.py</span>. It computes email 
participation by organizations over time.</span></p><pre class="verbatim"><span class="c004">Loaded messages= 51330 subjects= 25033 senders= 1584
Top 10 Oranizations
['gmail.com', 'umich.edu', 'uct.ac.za', 'indiana.edu', 
'unicon.net', 'tfd.co.uk', 'berkeley.edu', 'longsight.com', 
'stanford.edu', 'ox.ac.uk']
Output written to gline.js
</span></pre><p><span class="c006">Its output is written to <span class="c009">gline.js</span> which is visualized using <span class="c009">gline.htm</span>.</span></p><div class="center"><span class="c006"><img src="book024.png" /></span></div><p><span class="c006">This is a relatively complex and sophisticated application and 
has features to do some real data retrieval, cleaning, and visualization.

</span></p><span class="c005">
</span><!--TOC chapter id="sec190" <span class="c000"><span class="c005">Automating common tasks on your computer</span></span>-->
<h1 class="chapter" id="sec190"><span class="c006">Chapter&#XA0;16&#XA0;&#XA0;Automating common tasks on your computer</span></h1><!--SEC END --><p><span class="c006">We have been reading data from files, networks, services,
and databases. Python can also go through all of the 
directories and folders on your computers and read those files
as well.</span></p><p><span class="c006">In this chapter, we will write programs that scan 
through your computer and 
perform some operation on each file. 
Files are organized into directories (also called &#X201C;folders&#X201D;).
Simple Python scripts
can make short work of simple tasks that must be done to 
hundreds or thousands of files
spread across a directory tree or your entire computer.</span></p><p><span class="c006">To walk through all the directories and files in a tree we use 
<span class="c001">os.walk</span> and a <span class="c001">for</span> loop. This is similar to how 
<span class="c001">open</span> allows us to write a loop to read the contents of a file,
<span class="c001">socket</span> allows us to write a loop to read the contents of a network connection, and
<span class="c001">urllib</span> allows us to open a web document and loop through its contents.</span></p><span class="c005">
</span><!--TOC section id="sec191" <span class="c000"><span class="c005">File names and paths</span></span>-->
<h2 class="section" id="sec191"><span class="c006">16.1&#XA0;&#XA0;File names and paths</span></h2><!--SEC END --><p><span class="c005">
</span><a id="paths"></a></p><p><a id="hevea_default812"></a><span class="c005">
</span><a id="hevea_default813"></a><span class="c005">
</span><a id="hevea_default814"></a><span class="c005">
</span><a id="hevea_default815"></a></p><p><span class="c006">Every running program has a &#X201C;current directory,&#X201D; which is the
default directory for most operations. For example, when you open a file
for reading, Python looks for it in the current directory.</span></p><p><a id="hevea_default816"></a><span class="c005">
</span><a id="hevea_default817"></a></p><p><span class="c006">The <span class="c001">os</span> module provides functions for working with files and
directories (<span class="c001">os</span> stands for &#X201C;operating system&#X201D;). <span class="c001">os.getcwd</span>
returns the name of the current directory:</span></p><p><a id="hevea_default818"></a><span class="c005">
</span><a id="hevea_default819"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; import os
&gt;&gt;&gt; cwd = os.getcwd()
&gt;&gt;&gt; print cwd
/Users/csev
</span></pre><p><span class="c006"><span class="c001">cwd</span> stands for <span class="c009">current working directory</span>. The result in
this example is <span class="c001">/Users/csev</span>, which is the home directory of a
user named <span class="c001">csev</span>.</span></p><p><a id="hevea_default820"></a><span class="c005">
</span><a id="hevea_default821"></a></p><p><span class="c006">A string like <span class="c001">cwd</span> that identifies a file is called a path.
A <span class="c009">relative path</span> starts from the current directory;
an <span class="c009">absolute path</span> starts from the topmost directory in the
file system.</span></p><p><a id="hevea_default822"></a><span class="c005">
</span><a id="hevea_default823"></a><span class="c005">
</span><a id="hevea_default824"></a><span class="c005">
</span><a id="hevea_default825"></a></p><p><span class="c006">The paths we have seen so far are simple file names, so they are
relative to the current directory. To find the absolute path to
a file, you can use <span class="c001">os.path.abspath</span>:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; os.path.abspath('memo.txt')
'/Users/csev/memo.txt'
</span></pre><p><span class="c006"><span class="c001">os.path.exists</span> checks
whether a file or directory exists:</span></p><p><a id="hevea_default826"></a><span class="c005">
</span><a id="hevea_default827"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; os.path.exists('memo.txt')
True
</span></pre><p><span class="c006">If it exists, <span class="c001">os.path.isdir</span> checks whether it&#X2019;s a directory:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; os.path.isdir('memo.txt')
False
&gt;&gt;&gt; os.path.isdir('music')
True
</span></pre><p><span class="c006">Similarly, <span class="c001">os.path.isfile</span> checks whether it&#X2019;s a file.</span></p><p><span class="c006"><span class="c001">os.listdir</span> returns a list of the files (and other directories)
in the given directory:</span></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; os.listdir(cwd)
['music', 'photos', 'memo.txt']
</span></pre><span class="c005">
</span><!--TOC section id="sec192" <span class="c000"><span class="c005">Example: Cleaning up a photo directory</span></span>-->
<h2 class="section" id="sec192"><span class="c006">16.2&#XA0;&#XA0;Example: Cleaning up a photo directory</span></h2><!--SEC END --><p><span class="c006">Some time ago, I built a bit of Flickr-like software that 
received photos from my cell phone and stored those photos
on my server. I wrote this before Flickr existed and kept 
using it after Flickr existed because I wanted to keep original
copies of my images forever.</span></p><p><span class="c006">I would also send a simple one-line text description in the MMS message
or the subject line of the email message. I stored these messages
in a text file in the same directory as the image file. I came up 
with a directory structure based on the month, year, day, and time the 
photo was taken. The following would be an example of the naming for 
one photo and its existing description:</span></p><pre class="verbatim"><span class="c004">./2006/03/24-03-06_2018002.jpg
./2006/03/24-03-06_2018002.txt
</span></pre><p><span class="c006">After seven years, I had a lot of photos and captions. Over the years
as I switched cell phones, sometimes my code to extract the caption from the message 
would break and add a bunch of useless data on my server instead of a caption. </span></p><p><span class="c006">I wanted to go through these files and figure out which of the 
text files were really captions and which were junk and then delete the bad
files. The first thing to do was to get a simple inventory of 
how many text files I had in one the subfolders
using the following program:</span></p><pre class="verbatim"><span class="c004">import os
count = 0
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           count = count + 1
print 'Files:', count

python txtcount.py
Files: 1917
</span></pre><p><span class="c006">The key bit of code that makes this possible is the <span class="c001">os.walk</span>
library in Python. When we call <span class="c001">os.walk</span> and give it a starting
directory, it will &#X201C;walk&#X201D; through all of the directories 
and subdirectories recursively. The string &#X201C;.&#X201D; indicates
to start in the current directory and walk downward.
As it encounters each directory, we get three values in a tuple in the
body of the <span class="c001">for</span> loop. The first value is the current
directory name, the second value is the list of subdirectories 
in the current directory, and the third value is a list of files
in the current directory.</span></p><p><span class="c006">We do not have to explicitly look into each of the subdirectories
because we can count on <span class="c001">os.walk</span> to visit every 
folder eventually. But we do want to look at each file, so 
we write a simple <span class="c001">for</span> loop to examine each of the files 
in the current directory. We check each file to see if 
it ends with &#X201C;.txt&#X201D; and then count the number of 
files through the whole directory tree that end with the
suffix &#X201C;.txt&#X201D;.</span></p><p><span class="c006">Once we have a sense of how many files end with &#X201C;.txt&#X201D;, the next
thing to do is try to automatically
determine in Python which files are bad and which files
are good. So we write a simple program to print out the
files and the size of each file:</span></p><pre class="verbatim"><span class="c004">import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           print os.path.getsize(thefile), thefile
</span></pre><p><span class="c006">Now instead of just counting the files, we create 
a file name by concatenating the directory name with
the name of the file within the directory using
<span class="c001">os.path.join</span>. It is important to use 
<span class="c001">os.path.join</span> instead of string concatenation 
because on Windows we use a backslash
(<code>\</code>) to construct file paths and on Linux
or Apple we use a forward slash (<code>/</code>) 
to construct file paths. The <span class="c001">os.path.join</span>
knows these differences and knows what system
we are running on and it does the proper concatenation
depending on the system. So the same Python code
runs on either Windows or Unix-style systems.</span></p><p><span class="c006">Once we have the full file name with directory
path, we use the <span class="c001">os.path.getsize</span> utility
to get the size and print it out, producing the 
following output:</span></p><pre class="verbatim"><span class="c004">python txtsize.py
...
18 ./2006/03/24-03-06_2303002.txt
22 ./2006/03/25-03-06_1340001.txt
22 ./2006/03/25-03-06_2034001.txt
...
2565 ./2005/09/28-09-05_1043004.txt
2565 ./2005/09/28-09-05_1141002.txt
...
2578 ./2006/03/27-03-06_1618001.txt
2578 ./2006/03/28-03-06_2109001.txt
2578 ./2006/03/29-03-06_1355001.txt
...
</span></pre><p><span class="c006">Scanning the output, we notice that some files are pretty short and 
a lot of the files are pretty large and the same size (2578 and 2565). 
When we take a look at a few of these larger files by hand, 
it looks like the large 
files are nothing but a generic bit of identical HTML that came 
in from mail sent to my system from my T-Mobile phone:</span></p><pre class="verbatim"><span class="c004">&lt;html&gt;
        &lt;head&gt;
                &lt;title&gt;T-Mobile&lt;/title&gt;
...
</span></pre><p><span class="c006">Skimming through the file, it looks like there is no good information
in these files so we can probably delete them.</span></p><p><span class="c006">But before we delete the files, we will write a program to look for files
that are more than one line long and show the contents of the file.
We will not bother showing ourselves those files that are exactly
2578 or 2565 characters long since we know that these files have no useful
information.</span></p><p><span class="c006">So we write the following program:</span></p><pre class="verbatim"><span class="c004">import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           size = os.path.getsize(thefile)
           if size == 2578 or size == 2565:
               continue
           fhand = open(thefile,'r')
           lines = list()
           for line in fhand:
               lines.append(line)
           fhand.close()
           if len(lines) &gt; 1:
                print len(lines), thefile
                print lines[:4]
</span></pre><p><span class="c006">We use a <span class="c001">continue</span> to skip files with the two 
&#X201C;bad sizes&#X201D;, then open the rest of the files
and read the lines of the file into a Python list
and if the file has more than one line we print
out how many lines are in the file and print out
the first three lines.</span></p><p><span class="c006">It looks like filtering out those two bad file sizes, and assuming
that all one-line files are correct, we are down to some pretty clean
data:</span></p><pre class="verbatim"><span class="c004">python txtcheck.py 
3 ./2004/03/22-03-04_2015.txt
['Little horse rider\r\n', '\r\n', '\r']
2 ./2004/11/30-11-04_1834001.txt
['Testing 123.\n', '\n']
3 ./2007/09/15-09-07_074202_03.txt
['\r\n', '\r\n', 'Sent from my iPhone\r\n']
3 ./2007/09/19-09-07_124857_01.txt
['\r\n', '\r\n', 'Sent from my iPhone\r\n']
3 ./2007/09/20-09-07_115617_01.txt
...
</span></pre><p><span class="c006">But there is one more annoying pattern of files: 
there are some three-line files that consist of
two blank lines followed by a line that says
&#X201C;Sent from my iPhone&#X201D; that have slipped 
into my data. So we make the following change
to the program to deal with these files as well.</span></p><pre class="verbatim"><span class="c004">           lines = list()
           for line in fhand:
               lines.append(line)
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               continue
           if len(lines) &gt; 1:
                print len(lines), thefile
                print lines[:4]
</span></pre><p><span class="c006">We simply check if we have a three-line file, and if the third 
line starts with the specified text, we skip it.</span></p><p><span class="c006">Now when we run the program, we only see four remaining 
multi-line files and all of those files look pretty reasonable:</span></p><pre class="verbatim"><span class="c004">python txtcheck2.py 
3 ./2004/03/22-03-04_2015.txt
['Little horse rider\r\n', '\r\n', '\r']
2 ./2004/11/30-11-04_1834001.txt
['Testing 123.\n', '\n']
2 ./2006/03/17-03-06_1806001.txt
['On the road again...\r\n', '\r\n']
2 ./2006/03/24-03-06_1740001.txt
['On the road again...\r\n', '\r\n']
</span></pre><p><span class="c006">If you look at the overall pattern of this program,
we have successively refined how we accept or reject
files and once we found a pattern that was &#X201C;bad&#X201D; we used
<span class="c001">continue</span> to skip the bad files so we could refine
our code to find more file patterns that were bad.</span></p><p><span class="c006">Now we are getting ready to delete the files, so 
we are going to flip the logic and instead of printing out 
the remaining good files, we will print out the &#X201C;bad&#X201D;
files that we are about to delete.</span></p><pre class="verbatim"><span class="c004">import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           size = os.path.getsize(thefile)
           if size == 2578 or size == 2565:
               print 'T-Mobile:',thefile
               continue
           fhand = open(thefile,'r')
           lines = list()
           for line in fhand:
               lines.append(line)
           fhand.close()
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               print 'iPhone:', thefile
               continue
</span></pre><p><span class="c006">We can now see a list of candidate files that we are about
to delete and why these files are up for deleting.
The program produces the following output:</span></p><pre class="verbatim"><span class="c004">python txtcheck3.py
...
T-Mobile: ./2006/05/31-05-06_1540001.txt
T-Mobile: ./2006/05/31-05-06_1648001.txt
iPhone: ./2007/09/15-09-07_074202_03.txt
iPhone: ./2007/09/15-09-07_144641_01.txt
iPhone: ./2007/09/19-09-07_124857_01.txt
...
</span></pre><p><span class="c006">We can spot-check these files to make sure that we did not inadvertently
end up introducing a bug in our program or perhaps our logic 
caught some files we did not want to catch.</span></p><p><span class="c006">Once we are satisfied that this is the list of files we want to delete,
we make the following change to the program:</span></p><pre class="verbatim"><span class="c004">           if size == 2578 or size == 2565:
               print 'T-Mobile:',thefile
               os.remove(thefile)
               continue
...
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               print 'iPhone:', thefile
               os.remove(thefile)
               continue
</span></pre><p><span class="c006">In this version of the program, we will both print the file out 
and remove the bad files
using <span class="c001">os.remove</span>.</span></p><pre class="verbatim"><span class="c004">python txtdelete.py 
T-Mobile: ./2005/01/02-01-05_1356001.txt
T-Mobile: ./2005/01/02-01-05_1858001.txt
...
</span></pre><p><span class="c006">Just for fun, run the program a second time and it will produce no output
since the bad files are already gone.</span></p><p><span class="c006">If we rerun <span class="c001">txtcount.py</span> we can see that we have removed
899 bad files:
</span></p><pre class="verbatim"><span class="c004">python txtcount.py 
Files: 1018
</span></pre><p><span class="c006">In this section, we have followed a sequence where we use Python 
to first look through directories and files seeking
patterns. We slowly use Python to help determine what we 
want to do to clean up our directories. Once we
figure out which files are good and which files are 
not useful, we use Python to delete the files and 
perform the cleanup.</span></p><p><span class="c006">The problem you may need to solve can either be quite simple 
and might only depend on looking at the names of files,
or perhaps you need to read every single file and
look for patterns within the files. Sometimes 
you will need to read all the files and make a change 
to some of the files. All of these are pretty 
straightforward once you understand how <span class="c001">os.walk</span>
and the other <span class="c001">os</span> utilities can be used.</span></p><span class="c005">
</span><!--TOC section id="sec193" <span class="c000"><span class="c005">Command-line arguments</span></span>-->
<h2 class="section" id="sec193"><span class="c006">16.3&#XA0;&#XA0;Command-line arguments</span></h2><!--SEC END --><p><a id="hevea_default828"></a></p><p><span class="c006">In earlier chapters, we had a number of programs that prompted
for a file name using <code>raw_input</code> and then read data 
from the file and processed the data as follows:</span></p><pre class="verbatim"><span class="c004">name = raw_input('Enter file:')
handle = open(name, 'r')
text = handle.read()
...
</span></pre><p><span class="c006">We can simplify this program a bit by taking the file name
from the command line when we start Python. Up to now,
we simply run our Python programs and respond to the 
prompts as follows:</span></p><pre class="verbatim"><span class="c004">python words.py
Enter file: mbox-short.txt
...
</span></pre><p><span class="c006">We can place additional strings after the Python file and access
those <span class="c009">command-line arguments</span> in our Python program. Here is a simple program 
that demonstrates reading arguments from the command line:</span></p><pre class="verbatim"><span class="c004">import sys
print 'Count:', len(sys.argv)
print 'Type:', type(sys.argv)
for arg in sys.argv:
   print 'Argument:', arg
</span></pre><p><span class="c006">The contents of <span class="c001">sys.argv</span> are a list of strings where the first string
is the name of the Python program and the remaining strings are the arguments
on the command line after the Python file.</span></p><p><span class="c006">The following shows our program reading several command-line arguments from the command
line:</span></p><pre class="verbatim"><span class="c004">python argtest.py hello there
Count: 3
Type: &lt;type 'list'&gt;
Argument: argtest.py
Argument: hello
Argument: there
</span></pre><p><span class="c006">There are three arguments are passed into our program as a three-element list. 
The first element of the list is the file name (argtest.py) and the others are 
the two command-line arguments after the file name.</span></p><p><span class="c006">We can rewrite our program to read the file, taking the file name 
from the command-line argument as follows:</span></p><pre class="verbatim"><span class="c004">import sys

name = sys.argv[1]
handle = open(name, 'r')
text = handle.read()
print name, 'is', len(text), 'bytes'
</span></pre><p><span class="c006">We take the second command-line argument as the name of the file (skipping past
the program name in the <span class="c001">[0]</span> entry). We open the file and read 
the contents as follows:</span></p><pre class="verbatim"><span class="c004">python argfile.py mbox-short.txt
mbox-short.txt is 94626 bytes
</span></pre><p><span class="c006">Using command-line arguments as input can make it easier to reuse your Python programs, 
especially when you only need to input one or two strings.</span></p><span class="c005">
</span><!--TOC section id="sec194" <span class="c000"><span class="c005">Pipes</span></span>-->
<h2 class="section" id="sec194"><span class="c006">16.4&#XA0;&#XA0;Pipes</span></h2><!--SEC END --><p><a id="hevea_default829"></a><span class="c005">
</span><a id="hevea_default830"></a></p><p><span class="c006">Most operating systems provide a command-line interface,
also known as a <span class="c009">shell</span>. Shells usually provide commands
to navigate the file system and launch applications. For
example, in Unix, you can change directories with <span class="c001">cd</span>,
display the contents of a directory with <span class="c001">ls</span>, and launch
a web browser by typing (for example) <span class="c001">firefox</span>.</span></p><p><a id="hevea_default831"></a><span class="c005">
</span><a id="hevea_default832"></a></p><p><span class="c006">Any program that you can launch from the shell can also be
launched from Python using a <span class="c009">pipe</span>. A pipe is an object
that represents a running process.</span></p><p><span class="c006">For example, the Unix command</span><sup><a id="text17" href="#note17"><span class="c006">1</span></a></sup><span class="c006">
<span class="c001">ls -l</span> normally displays the
contents of the current directory (in long format). You can
launch <span class="c001">ls</span> with <span class="c001">os.popen</span>:</span></p><p><a id="hevea_default833"></a><span class="c005">
</span><a id="hevea_default834"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; cmd = 'ls -l'
&gt;&gt;&gt; fp = os.popen(cmd)
</span></pre><p><span class="c006">The argument is a string that contains a shell command. The
return value is a file pointer that behaves just like an open
file. You can read the output from the <span class="c001">ls</span> process one
line at a time with <span class="c001">readline</span> or get the whole thing at
once with <span class="c001">read</span>:</span></p><p><a id="hevea_default835"></a><span class="c005">
</span><a id="hevea_default836"></a><span class="c005">
</span><a id="hevea_default837"></a><span class="c005">
</span><a id="hevea_default838"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; res = fp.read()
</span></pre><p><span class="c006">When you are done, you close the pipe like a file:</span></p><p><a id="hevea_default839"></a><span class="c005">
</span><a id="hevea_default840"></a></p><pre class="verbatim"><span class="c004">&gt;&gt;&gt; stat = fp.close()
&gt;&gt;&gt; print stat
None
</span></pre><p><span class="c006">The return value is the final status of the <span class="c001">ls</span> process;
<span class="c001">None</span> means that it ended normally (with no errors).</span></p><span class="c005">
</span><!--TOC section id="sec195" <span class="c000"><span class="c005">Glossary</span></span>-->
<h2 class="section" id="sec195"><span class="c006">16.5&#XA0;&#XA0;Glossary</span></h2><!--SEC END --><dl class="description"><dt class="dt-description"><span class="c010">absolute path:</span></dt><dd class="dd-description"><span class="c006"> A string that describes where a file or
directory is stored that starts at the &#X201C;top of the tree of directories&#X201D;
so that it can be used to access the file or directory, regardless
of the current working directory.
</span><a id="hevea_default841"></a></dd><dt class="dt-description"><span class="c010">checksum:</span></dt><dd class="dd-description"><span class="c006"> See also <span class="c009">hashing</span>. The term &#X201C;checksum&#X201D; 
comes from the need to verify if data was garbled as it was 
sent across a network or written to a backup medium and then
read back in. When the data is written or sent, the sending system
computes a checksum and also sends the checksum. When the 
data is read or received, the receiving system re-computes
the checksum from the received data and compares it to the 
received checksum. If the checksums do not match, we must
assume that the data was garbled as it was transferred.
</span><a id="hevea_default842"></a></dd><dt class="dt-description"><span class="c010">command-line argument:</span></dt><dd class="dd-description"><span class="c006"> Parameters on the command line after the Python file name.</span></dd><dt class="dt-description"><span class="c010">current working directory:</span></dt><dd class="dd-description"><span class="c006"> The current directory that you 
are &#X201C;in&#X201D;. You can change your working directory using the 
<span class="c001">cd</span> command on most systems in their command-line interfaces.
When you open a file in Python using just the file name with no path 
information, the file must be in the current working directory
where you are running the program.
</span><a id="hevea_default843"></a><span class="c005">
</span><a id="hevea_default844"></a><span class="c005">
</span><a id="hevea_default845"></a></dd><dt class="dt-description"><span class="c010">hashing:</span></dt><dd class="dd-description"><span class="c006"> Reading through a potentially large amount of data
and producing a unique checksum for the data. The best hash functions
produce very few &#X201C;collisions&#X201D; where you can give two different
streams of data to the hash function and get back the same hash. 
MD5, SHA1, and SHA256 are examples of commonly used hash functions.
</span><a id="hevea_default846"></a></dd><dt class="dt-description"><span class="c010">pipe:</span></dt><dd class="dd-description"><span class="c006"> A pipe is a connection to a running program. Using
a pipe, you can write a program to send data to another program
or receive data from that program. A pipe is similar to a 
<span class="c009">socket</span> except that a pipe can only be used to 
connect programs running on the same computer (i.e., not
across a network).
</span><a id="hevea_default847"></a></dd><dt class="dt-description"><span class="c010">relative path:</span></dt><dd class="dd-description"><span class="c006"> A string that describes where a file or
directory is stored relative to the current working 
directory.
</span><a id="hevea_default848"></a></dd><dt class="dt-description"><span class="c010">shell:</span></dt><dd class="dd-description"><span class="c006"> A command-line interface to an operating system.
Also called a &#X201C;terminal program&#X201D; in some systems. In this interface
you type a command and parameters on a line and press &#X201C;enter&#X201D;
to execute the command.
</span><a id="hevea_default849"></a></dd><dt class="dt-description"><span class="c010">walk:</span></dt><dd class="dd-description"><span class="c006"> A term we use to describe the notion of visiting
the entire tree of directories, sub-directories, sub-sub-directories, 
until we have visited the all of the directories. We call this
&#X201C;walking the directory tree&#X201D;.
</span><a id="hevea_default850"></a></dd></dl><span class="c005">
</span><!--TOC section id="sec196" <span class="c000"><span class="c005">Exercises</span></span>-->
<h2 class="section" id="sec196"><span class="c006">16.6&#XA0;&#XA0;Exercises</span></h2><!--SEC END --><div class="theorem"><span class="c006"><span class="c009">Exercise&#XA0;1</span>&#XA0;&#XA0;
</span><a id="checksum"></a><p><a id="hevea_default851"></a></p><p><span class="c006"><em>In a large collection of MP3 files there may be more than one
copy of the same song, stored in different directories or with
different file names. The goal of this exercise is to search for
these duplicates.</em></span></p><ol class="enumerate" type="1"><li class="li-enumerate"><span class="c006"><em>Write a program that walks a directory and all of its
subdirectories for all files with a given suffix (like <span class="c001">.mp3</span>)
and lists pairs of files with that are the same size.
Hint: Use a dictionary where the key of the dictionary is the size
of the file from <span class="c001">os.path.getsize</span> and the value in the 
dictionary is the path name concatenated with the file name. 
As you encounter each file, check to see if you already have a
file that has the same size as the current file. If so, you have a
duplicate size file, so print out the file size and the two file names 
(one from the hash and the other file you are looking at).</em></span><p><a id="hevea_default852"></a><span class="c005">
</span><a id="hevea_default853"></a><span class="c005">
</span><a id="hevea_default854"></a><span class="c005">
</span><a id="hevea_default855"></a></p></li><li class="li-enumerate"><span class="c006"><em>Adapt the previous program to look for files that 
have duplicate content using a hashing or <span class="c009">checksum</span>
algorithm. For example,
MD5 (Message-Digest algorithm 5) takes an arbitrarily-long
&#X201C;message&#X201D; and returns a 128-bit &#X201C;checksum&#X201D;. The probability
is very small that two files with different contents will
return the same checksum.</em></span><p><span class="c006"><em>You can read about MD5 at <span class="c001">wikipedia.org/wiki/Md5</span>. The 
following code snippet opens a file, reads it, and computes
its checksum.</em></span></p><pre class="verbatim"><span class="c004"><em>import hashlib 
...
           fhand = open(thefile,'r')
           data = fhand.read()
           fhand.close()
           checksum = hashlib.md5(data).hexdigest()
</em></span></pre><p><span class="c006"><em>You should create a dictionary where the checksum is the key 
and the file name is the value. When you compute a checksum
and it is already in the dictionary as a key, you have two files with 
duplicate content, so print out the file in the dictionary
and the file you just read. Here is some sample output
from a run in a folder of image files:</em></span></p><pre class="verbatim"><span class="c004"><em>./2004/11/15-11-04_0923001.jpg ./2004/11/15-11-04_1016001.jpg
./2005/06/28-06-05_1500001.jpg ./2005/06/28-06-05_1502001.jpg
./2006/08/11-08-06_205948_01.jpg ./2006/08/12-08-06_155318_02.jpg
</em></span></pre><p><span class="c006"><em>Apparently I sometimes sent the same photo more than once 
or made a copy of a photo from time to time without deleting
the original.</em></span></p></li></ol></div><span class="c005">
</span><!--BEGIN NOTES chapter-->
<hr class="footnoterule" /><dl class="thefootnotes"><dt class="dt-thefootnotes"><span class="c005">
</span><a id="note17" href="#text17"><span class="c006">1</span></a></dt><dd class="dd-thefootnotes"><span class="c006"><div class="footnotetext">When using pipes to talk 
to operating system commands like <span class="c001">ls</span>, it is important 
for you to know which operating system you are using and only
open pipes to commands that are supported on your operating system.</div>
</span></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec197" <span class="c000"><span class="c005">Python Programming on Windows</span></span>-->
<h1 class="chapter" id="sec197"><span class="c006">Appendix&#XA0;A&#XA0;&#XA0;Python Programming on Windows</span></h1><!--SEC END --><p><span class="c006">In this appendix, we walk through a series of steps
so you can run Python on Windows. There are many different 
approaches you can take, and this is just one
approach to keep things simple.</span></p><p><span class="c006">First, you need to install a programmer editor. You
do not want to use Notepad or Microsoft Word to edit
Python programs. Programs must be in "flat-text" files
and so you need an editor that is good at
editing text files.</span></p><p><span class="c006">Our recommended editor for Windows is NotePad++ which
can be downloaded and installed from:</span></p><p><span class="c002">https://notepad-plus-plus.org/</span></p><p><span class="c006">Then download a recent version of Python 2 from the
<span class="c001">www.python.org</span> web site.</span></p><p><span class="c002">https://www.python.org/downloads/</span></p><p><span class="c006">Once you have installed Python, you should have a new
folder on your computer like <span class="c001">C:\Python27</span>.</span></p><p><span class="c006">To create a Python program, run NotePad++ from the Start Menu
and save the file with a suffix of &#X201C;.py&#X201D;. For this
exercise, put a folder on your Desktop named 
<span class="c001">py4inf</span>. It is best to keep your folder names short
and not to have any spaces in your folder or file name.</span></p><p><span class="c006">Let&#X2019;s make our first Python program be:</span></p><pre class="verbatim"><span class="c004">print 'Hello Chuck'
</span></pre><p><span class="c006">Except that you should change it to be your name. Save the file
into <span class="c001">Desktop\py4inf\prog1.py</span>.</span></p><p><span class="c006">Then open a command-line window. Different versions of Windows
do this differently:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">
Windows Vista and Windows 7: Press <span class="c009">Start</span>
and then in the command search window enter the word
<span class="c001">command</span> and press enter.</span></li><li class="li-itemize"><span class="c006">Windows XP: Press <span class="c009">Start</span>, then <span class="c009">Run</span>, and 
then enter <span class="c001">cmd</span> in the dialog box and press <span class="c009">OK</span>.
</span></li></ul><p><span class="c006">You will find yourself in a text window with a prompt that
tells you what folder you are currently &#X201C;in&#X201D;. </span></p><p><span class="c006">Windows Vista and Windows-7: <span class="c001">C:\Users\csev</span><br />
Windows XP: <span class="c001">C:\Documents and Settings\csev</span></span></p><p><span class="c006">This is your &#X201C;home directory&#X201D;. Now we need to move into 
the folder where you have saved your Python program using
the following commands:</span></p><pre class="verbatim"><span class="c004">C:\Users\csev\&gt; cd Desktop
C:\Users\csev\Desktop&gt; cd py4inf
</span></pre><p><span class="c006">Then type </span></p><pre class="verbatim"><span class="c004">C:\Users\csev\Desktop\py4inf&gt; dir 
</span></pre><p><span class="c006">to list your files. You should see the <span class="c001">prog1.py</span> when 
you type the <span class="c001">dir</span> command.</span></p><p><span class="c006">To run your program, simply type the name of your file at the 
command prompt and press enter.</span></p><pre class="verbatim"><span class="c004">C:\Users\csev\Desktop\py4inf&gt; prog1.py
Hello Chuck
C:\Users\csev\Desktop\py4inf&gt; 
</span></pre><p><span class="c006">You can edit the file in NotePad++, save it, and then switch back
to the command line and execute the program again by typing
the file name again at the command-line prompt.</span></p><p><span class="c006">If you get confused in the command-line window, just close it
and open a new one.</span></p><p><span class="c006">Hint: You can also press the &#X201C;up arrow&#X201D; at the command line to 
scroll back and run a previously entered command again.</span></p><p><span class="c006">You should also look in the preferences for NotePad++ and set it 
to expand tab characters to be four spaces. This will save you lots
of effort looking for indentation errors.</span></p><p><span class="c006">You can also find further information on editing and running 
Python programs at <span class="c001">www.py4inf.com</span>.</span></p><span class="c005">
</span><!--TOC chapter id="sec198" <span class="c000"><span class="c005">Python Programming on Macintosh</span></span>-->
<h1 class="chapter" id="sec198"><span class="c006">Appendix&#XA0;B&#XA0;&#XA0;Python Programming on Macintosh</span></h1><!--SEC END --><p><span class="c006">In this appendix, we walk through a series of steps
so you can run Python on Macintosh. Since Python is
already included in the Macintosh Operating system, we only
need to learn how to edit Python files and run Python programs
in the terminal window.</span></p><p><span class="c006">There are many approaches you can take to editing and running
Python programs, and this is just one approach we have found
to be very simple.</span></p><p><span class="c006">First, you need to install a programmer editor. You
do not want to use TextEdit or Microsoft Word to edit
Python programs. Programs must be in "flat-text" files
and so you need an editor that is good at
editing text files.</span></p><p><span class="c006">Our recommended editor for Macintosh is TextWrangler which
can be downloaded and installed from:</span></p><p><span class="c002">http://www.barebones.com/products/TextWrangler/</span></p><p><span class="c006">To create a Python program, run 
<span class="c009">TextWrangler</span> from your <span class="c009">Applications</span> folder.</span></p><p><span class="c006">Let&#X2019;s make our first Python program be:</span></p><pre class="verbatim"><span class="c004">print 'Hello Chuck'
</span></pre><p><span class="c006">Except that you should change it to be your name. 
Save the file in a folder on your Desktop named 
<span class="c001">py4inf</span>. It is best to keep your folder names short
and not to have any spaces in your folder or file name.
Once you have made the folder, save the file 
into <span class="c001">Desktop\py4inf\prog1.py</span>.</span></p><p><span class="c006">Then run the <span class="c009">Terminal</span> program. The easiest way is to 
press the Spotlight icon (the magnifying glass) in the upper
right of your screen, enter &#X201C;terminal&#X201D;, and launch the
application that comes up.</span></p><p><span class="c006">You start in your &#X201C;home directory&#X201D;. You can see the current 
directory by typing the <span class="c001">pwd</span> command in the terminal window.</span></p><pre class="verbatim"><span class="c004">67-194-80-15:~ csev$ pwd
/Users/csev
67-194-80-15:~ csev$ 
</span></pre><p><span class="c006">you must be in the folder that contains your Python program 
to run the program. Use the <span class="c001">cd</span> command to move to a new 
folder and then the <span class="c001">ls</span> command to list the files in the 
folder.</span></p><pre class="verbatim"><span class="c004">67-194-80-15:~ csev$ cd Desktop
67-194-80-15:Desktop csev$ cd py4inf
67-194-80-15:py4inf csev$ ls
prog1.py
67-194-80-15:py4inf csev$ 
</span></pre><p><span class="c006">To run your program, simply type the <span class="c001">python</span> command followed
by the name of your file at the command prompt and press enter.</span></p><pre class="verbatim"><span class="c004">67-194-80-15:py4inf csev$ python prog1.py
Hello Chuck
67-194-80-15:py4inf csev$ 
</span></pre><p><span class="c006">You can edit the file in TextWrangler, save it, and then switch back
to the command line and execute the program again by typing
the file name again at the command-line prompt.</span></p><p><span class="c006">If you get confused in the command-line window, just close it
and open a new one.</span></p><p><span class="c006">Hint: You can also press the &#X201C;up-arrow&#X201D; in the command line to 
scroll back and run a previously entered command again.</span></p><p><span class="c006">You should also look in the preferences for TextWrangler and set it 
to expand tab characters to be four spaces. It will save you lots
of effort looking for indentation errors.</span></p><p><span class="c006">You can also find further information on editing and running 
Python programs at <span class="c001">www.py4inf.com</span>.</span></p><span class="c005">
</span><!--TOC chapter id="sec199" <span class="c000"><span class="c005">Contributions</span></span>-->
<h1 class="chapter" id="sec199"><span class="c006">Appendix&#XA0;C&#XA0;&#XA0;Contributions</span></h1><!--SEC END --><!--TOC section id="sec200" <span class="c000"><span class="c005">Contributor List for &#X201C;Python for Informatics&#X201D;</span></span>-->
<h2 class="section" id="sec200"><span class="c006">Contributor List for &#X201C;Python for Informatics&#X201D;</span></h2><!--SEC END --><p><span class="c006">Bruce Shields for copy editing early drafts,
Sarah Hegge,
Steven Cherry,
Sarah Kathleen Barbarow,
Andrea Parker,
Radaphat Chongthammakun,
Megan Hixon,
Kirby Urner,
Sarah Kathleen Barbrow,
Katie Kujala,
Noah Botimer,
Emily Alinder,
Mark Thompson-Kular,
James Perry,
Eric Hofer,
Eytan Adar,
Peter Robinson,
Deborah J. Nelson,
Jonathan C. Anthony,
Eden Rassette,
Jeannette Schroeder,
Justin Feezell,
Chuanqi Li,
Gerald Gordinier,
Gavin Thomas Strassel,
Ryan Clement,
Alissa Talley,
Caitlin Holman,
Yong-Mi Kim,
Karen Stover,
Cherie Edmonds,
Maria Seiferle,
Romer Kristi D. Aranas (RK),
Grant Boyer,
Hedemarrie Dussan,</span></p><!--TOC section id="sec201" <span class="c000"><span class="c005">Preface for &#X201C;Think Python&#X201D;</span></span>-->
<h2 class="section" id="sec201"><span class="c006">Preface for &#X201C;Think Python&#X201D;</span></h2><!--SEC END --><!--TOC subsection id="sec202" <span class="c000"><span class="c005">The strange history of &#X201C;Think Python&#X201D;</span></span>-->
<h3 class="subsection" id="sec202"><span class="c006">The strange history of &#X201C;Think Python&#X201D;</span></h3><!--SEC END --><p><span class="c006">(Allen B. Downey)</span></p><p><span class="c006">In January 1999 I was preparing to teach an introductory programming
class in Java. I had taught it three times and I was getting
frustrated. The failure rate in the class was too high and, even for
students who succeeded, the overall level of achievement was too low.</span></p><p><span class="c006">One of the problems I saw was the books. 
They were too big, with too much unnecessary detail about Java, and
not enough high-level guidance about how to program. And they all
suffered from the trap door effect: they would start out easy,
proceed gradually, and then somewhere around Chapter 5 the bottom would
fall out. The students would get too much new material, too fast,
and I would spend the rest of the semester picking up the pieces.</span></p><p><span class="c006">Two weeks before the first day of classes, I decided to write my
own book. 
My goals were:</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">Keep it short. It is better for students to read 10 pages
than not read 50 pages.</span></li><li class="li-itemize"><span class="c006">Be careful with vocabulary. I tried to minimize the jargon
and define each term at first use.</span></li><li class="li-itemize"><span class="c006">Build gradually. To avoid trap doors, I took the most difficult
topics and split them into a series of small steps. </span></li><li class="li-itemize"><span class="c006">Focus on programming, not the programming language. I included
the minimum useful subset of Java and left out the rest.</span></li></ul><p><span class="c006">I needed a title, so on a whim I chose <em>How to Think Like
a Computer Scientist</em>.</span></p><p><span class="c006">My first version was rough, but it worked. Students did the reading,
and they understood enough that I could spend class time on the hard
topics, the interesting topics and (most important) letting the
students practice.</span></p><p><span class="c006">I released the book under the GNU Free Documentation License,
which allows users to copy, modify, and distribute the book.</span></p><p><a id="hevea_default856"></a><span class="c005">
</span><a id="hevea_default857"></a></p><p><span class="c006">What happened next is the cool part. Jeff Elkner, a high school
teacher in Virginia, adopted my book and translated it into
Python. He sent me a copy of his translation, and I had the
unusual experience of learning Python by reading my own book.</span></p><p><span class="c006">Jeff and I revised the book, incorporated a case study by
Chris Meyers, and in 2001 we released <em>How to Think Like
a Computer Scientist: Learning with Python</em>, also under
the GNU Free Documentation License.
As Green Tea Press, I published the book and started selling
hard copies through Amazon.com and college book stores.
Other books from Green Tea Press are available at
<span class="c001">greenteapress.com</span>.</span></p><p><span class="c006">In 2003 I started teaching at Olin College and I got to teach
Python for the first time. The contrast with Java was striking.
Students struggled less, learned more, worked on more interesting
projects, and generally had a lot more fun.</span></p><p><span class="c006">Over the last five years I have continued to develop the book,
correcting errors, improving some of the examples and
adding material, especially exercises. In 2008 I started work
on a major revision&#X2014;at the same time, I was
contacted by an editor at Cambridge University Press who
was interested in publishing the next edition. Good timing!</span></p><p><span class="c006">I hope you enjoy working with this book, and that it helps
you learn to program and think, at least a little bit, like
a computer scientist.</span></p><!--TOC subsection id="sec203" <span class="c000"><span class="c005">Acknowledgements for &#X201C;Think Python&#X201D;</span></span>-->
<h3 class="subsection" id="sec203"><span class="c006">Acknowledgements for &#X201C;Think Python&#X201D;</span></h3><!--SEC END --><p><span class="c006">(Allen B. Downey)</span></p><p><span class="c006">First and most importantly, I thank Jeff Elkner, who
translated my Java book into Python, which got this project
started and introduced me to what has turned out to be my
favorite language.</span></p><p><span class="c006">I also thank Chris Meyers, who contributed several sections
to <em>How to Think Like a Computer Scientist</em>.</span></p><p><span class="c006">And I thank the Free Software Foundation for developing
the GNU Free Documentation License, which helped make
my collaboration with Jeff and Chris possible.</span></p><p><a id="hevea_default858"></a><span class="c005">
</span><a id="hevea_default859"></a></p><p><span class="c006">I also thank the editors at Lulu who worked on
<em>How to Think Like a Computer Scientist</em>.</span></p><p><span class="c006">I thank all the students who worked with earlier
versions of this book and all the contributors (listed
in an Appendix) who sent in corrections and suggestions.</span></p><p><span class="c006">And I thank my wife, Lisa, for her work on this book, and Green
Tea Press, and everything else, too.</span></p><p><span class="c006">Allen B. Downey <br />
Needham MA<br />

Allen Downey is an Associate Professor of Computer Science at 
the Franklin W. Olin College of Engineering.</span></p><!--TOC section id="sec204" <span class="c000"><span class="c005">Contributor List for &#X201C;Think Python&#X201D;</span></span>-->
<h2 class="section" id="sec204"><span class="c006">Contributor List for &#X201C;Think Python&#X201D;</span></h2><!--SEC END --><p><a id="hevea_default860"></a></p><p><span class="c006">(Allen B. Downey)</span></p><p><span class="c006">More than 100 sharp-eyed and thoughtful readers have sent in
suggestions and corrections over the past few years. Their
contributions, and enthusiasm for this project, have been a
huge help.</span></p><p><span class="c006">For the detail on the nature of each of the contributions from
these individuals, see the &#X201C;Think Python&#X201D; text.</span></p><p><span class="c006">Lloyd Hugh Allen,
Yvon Boulianne,
Fred Bremmer,
Jonah Cohen,
Michael Conlon,
Benoit Girard,
Courtney Gleason and Katherine Smith,
Lee Harr,
James Kaylin,
David Kershaw,
Eddie Lam,
Man-Yong Lee,
David Mayo,
Chris McAloon,
Matthew J. Moelter,
Simon Dicon Montford,
John Ouzts,
Kevin Parks,
David Pool,
Michael Schmitt,
Robin Shaw,
Paul Sleigh,
Craig T. Snydal,
Ian Thomas,
Keith Verheyden,
Peter Winstanley,
Chris Wrobel,
Moshe Zadka,
Christoph Zwerschke,
James Mayer,
Hayden McAfee,
Angel Arnal,
Tauhidul Hoque and Lex Berezhny,
Dr. Michele Alzetta,
Andy Mitchell,
Kalin Harvey,
Christopher P. Smith,
David Hutchins,
Gregor Lingl,
Julie Peters,
Florin Oprina,
D.&#XA0;J.&#XA0;Webre,
Ken,
Ivo Wever,
Curtis Yanko,
Ben Logan,
Jason Armstrong,
Louis Cordier,
Brian Cain,
Rob Black,
Jean-Philippe Rey at Ecole Centrale Paris,
Jason Mader at George Washington University made a number
Jan Gundtofte-Bruun,
Abel David and Alexis Dinno,
Charles Thayer,
Roger Sperberg,
Sam Bull,
Andrew Cheung,
C. Corey Capel,
Alessandra,
Wim Champagne,
Douglas Wright,
Jared Spindor,
Lin Peiheng,
Ray Hagtvedt,
Torsten H&#XFC;bsch,
Inga Petuhhov,
Arne Babenhauserheide,
Mark E. Casida,
Scott Tyler,
Gordon Shephard,
Andrew Turner,
Adam Hobart,
Daryl Hammond and Sarah Zimmerman,
George Sass,
Brian Bingham,
Leah Engelbert-Fenton,
Joe Funke,
Chao-chao Chen,
Jeff Paine,
Lubos Pintes,
Gregg Lind and Abigail Heithoff,
Max Hailperin,
Chotipat Pornavalai,
Stanislaw Antol,
Eric Pashman,
Miguel Azevedo,
Jianhua Liu,
Nick King,
Martin Zuther,
Adam Zimmerman,
Ratnakar Tiwari,
Anurag Goel,
Kelli Kratzer,
Mark Griffiths,
Roydan Ongie,
Patryk Wolowiec,
Mark Chonofsky,
Russell Coleman,
Wei Huang,
Karen Barber,
Nam Nguyen,
St&#XE9;phane Morin,
and
Paul Stoop.</span></p><span class="c005">
</span><!--TOC chapter id="sec205" <span class="c000"><span class="c005">Copyright Detail</span></span>-->
<h1 class="chapter" id="sec205"><span class="c006">Appendix&#XA0;D&#XA0;&#XA0;Copyright Detail</span></h1><!--SEC END --><p><span class="c006">This work is licensed under a 
Creative Common
Attribution-NonCommercial-ShareAlike 3.0 Unported License.
This license is 
available at
<span class="c001">creativecommons.org/licenses/by-nc-sa/3.0/</span>. </span></p><p><span class="c006">I would have preferred to license the book under the less 
restrictive CC-BY-SA license. But unfortunately there are
a few unscrupulous
organizations who search for and find freely licensed books,
and then publish and sell virtually unchanged copies of the books on a 
print on demand service such as LuLu or CreateSpace. CreateSpace
has (thankfully) added a policy that gives the wishes of the actual 
copyright holder preference over a non-copyright holder attempting 
to publish a freely licensed work. Unfortunately there are many 
print-on-demand services and very few have as well-considered a policy 
as CreateSpace.</span></p><p><span class="c006">Regretfully, I added the NC element to the license
this book to give me recourse in case someone tries to clone this 
book and sell it commercially. Unfortunately, adding NC limits uses
of this material that I would like to permit. So I have added this 
section of the document to describe specific situations where 
I am giving my permission in advance to use the material in this book
in situations that some might consider commercial.</span></p><ul class="itemize"><li class="li-itemize"><span class="c006">
If you are printing a limited number of copies of all or part of 
this book for use in a course (e.g., like a coursepack), then 
you are granted CC-BY license to these materials for that purpose.</span></li><li class="li-itemize"><span class="c006">If you are a teacher at a university and you translate this book 
into a language other than English and teach using the translated book, then 
you can contact me and I will granted you a CC-BY-SA 
license to these materials with respect to the publication of your 
translation. In particular, you will be permitted 
to sell the resulting translated book commercially. 
</span></li></ul><p><span class="c006">If you are intending to translate the book, you may want to contact me
so we can make sure that you have all of the related course materials so 
you can translate them as well.</span></p><p><span class="c006">Of course, you are welcome to contact me and ask for permission if these
clauses are not sufficient. In all cases, permission to reuse and
remix this material will be granted as long as there is clear added value
or benefit to students or teachers that will accrue as a result of the 
new work.</span></p><p><span class="c006">Charles Severance<br />
www.dr-chuck.com<br />
Ann Arbor, MI, USA<br />
September 9, 2013</span></p><!--TOC chapter id="sec206" <span class="c000"><span class="c005">Index</span></span>-->
<h1 class="chapter" id="sec206"><span class="c006">Index</span></h1><!--SEC END --><p></p><table class="cellpading0" style="border-spacing:6px;border-collapse:separate;"><tr><td class="c011"><ul class="indexenv"><li class="li-indexenv"><span class="c006">
API, </span><a href="#hevea_default777"><span class="c006">13.9</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
key, </span><a href="#hevea_default776"><span class="c006">13.8</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">absolute path, </span><a href="#hevea_default824"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">access, </span><a href="#hevea_default457"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">accumulator, </span><a href="#hevea_default313"><span class="c006">5.9</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
sum, </span><a href="#hevea_default306"><span class="c006">5.7.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">algorithm, </span><a href="#hevea_default264"><span class="c006">4.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
MD5, </span><a href="#hevea_default854"><span class="c006">16.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">aliasing, </span><a href="#hevea_default539"><span class="c006">8.11</span></a><span class="c006">, </span><a href="#hevea_default546"><span class="c006">8.12</span></a><span class="c006">, </span><a href="#hevea_default568"><span class="c006">8.15</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
copying to avoid, </span><a href="#hevea_default566"><span class="c006">8.14</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">alternative execution, </span><a href="#hevea_default149"><span class="c006">3.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">and operator, </span><a href="#hevea_default133"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">append method, </span><a href="#hevea_default502"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default556"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">argument, </span><a href="#hevea_default193"><span class="c006">4.1</span></a><span class="c006">, </span><a href="#hevea_default234"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default248"><span class="c006">4.9</span></a><span class="c006">, </span><a href="#hevea_default252"><span class="c006">4.9</span></a><span class="c006">, </span><a href="#hevea_default265"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default552"><span class="c006">8.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
keyword, </span><a href="#hevea_default669"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default553"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">optional, </span><a href="#hevea_default376"><span class="c006">6.9</span></a><span class="c006">, </span><a href="#hevea_default530"><span class="c006">8.9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">arguments, </span><a href="#hevea_default828"><span class="c006">16.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">arithmetic operator, </span><a href="#hevea_default57"><span class="c006">2.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">assignment, </span><a href="#hevea_default99"><span class="c006">2.14</span></a><span class="c006">, </span><a href="#hevea_default455"><span class="c006">8.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
item, </span><a href="#hevea_default356"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default465"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default658"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default672"><span class="c006">10.3</span></a><span class="c006">, </span><a href="#hevea_default718"><span class="c006">10.10</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">assignment statement, </span><a href="#hevea_default48"><span class="c006">2.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">attribute, </span><a href="#hevea_default794"><span class="c006">14.13</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">BeautifulSoup, </span><a href="#hevea_default753"><span class="c006">12.7</span></a><span class="c006">, </span><a href="#hevea_default754"><span class="c006">12.7</span></a><span class="c006">, </span><a href="#hevea_default759"><span class="c006">12.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">BY-SA, </span><a href="#hevea_default2"><span class="c006">0</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">binary file, </span><a href="#hevea_default757"><span class="c006">12.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bisection, debugging by, </span><a href="#hevea_default312"><span class="c006">5.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">body, </span><a href="#hevea_default175"><span class="c006">3.10</span></a><span class="c006">, </span><a href="#hevea_default237"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default266"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default297"><span class="c006">5.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bool type, </span><a href="#hevea_default127"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">boolean expression, </span><a href="#hevea_default119"><span class="c006">3.1</span></a><span class="c006">, </span><a href="#hevea_default176"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">boolean operator, </span><a href="#hevea_default366"><span class="c006">6.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bracket</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
squiggly, </span><a href="#hevea_default589"><span class="c006">9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bracket operator, </span><a href="#hevea_default321"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default459"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default649"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">branch, </span><a href="#hevea_default152"><span class="c006">3.4</span></a><span class="c006">, </span><a href="#hevea_default178"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">break statement, </span><a href="#hevea_default300"><span class="c006">5.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bug, </span><a href="#hevea_default11"><span class="c006">1.12</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">CC-BY-SA, </span><a href="#hevea_default1"><span class="c006">0</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">CPU, </span><a href="#hevea_default13"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Creative Commons License, </span><a href="#hevea_default0"><span class="c006">0</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">cache, </span><a href="#hevea_default808"><span class="c006">15.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">case-sensitivity, variable names, </span><a href="#hevea_default95"><span class="c006">2.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">catch, </span><a href="#hevea_default440"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">celsius, </span><a href="#hevea_default161"><span class="c006">3.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">central processing unit, </span><a href="#hevea_default12"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">chained conditional, </span><a href="#hevea_default153"><span class="c006">3.5</span></a><span class="c006">, </span><a href="#hevea_default179"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">character, </span><a href="#hevea_default320"><span class="c006">6.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">checksum, </span><a href="#hevea_default842"><span class="c006">16.5</span></a><span class="c006">, </span><a href="#hevea_default855"><span class="c006">16.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">choice function, </span><a href="#hevea_default213"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">close method, </span><a href="#hevea_default432"><span class="c006">7.8</span></a><span class="c006">, </span><a href="#hevea_default839"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">colon, </span><a href="#hevea_default239"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comment, </span><a href="#hevea_default85"><span class="c006">2.11</span></a><span class="c006">, </span><a href="#hevea_default101"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comparable, </span><a href="#hevea_default642"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default708"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comparison</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
string, </span><a href="#hevea_default369"><span class="c006">6.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default659"><span class="c006">10.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comparison operator, </span><a href="#hevea_default129"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">compile, </span><a href="#hevea_default14"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">composition, </span><a href="#hevea_default251"><span class="c006">4.9</span></a><span class="c006">, </span><a href="#hevea_default267"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">compound statement, </span><a href="#hevea_default145"><span class="c006">3.3</span></a><span class="c006">, </span><a href="#hevea_default184"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">concatenation, </span><a href="#hevea_default76"><span class="c006">2.9</span></a><span class="c006">, </span><a href="#hevea_default100"><span class="c006">2.14</span></a><span class="c006">, </span><a href="#hevea_default358"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default534"><span class="c006">8.9</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
list, </span><a href="#hevea_default485"><span class="c006">8.4</span></a><span class="c006">, </span><a href="#hevea_default559"><span class="c006">8.13</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">condition, </span><a href="#hevea_default144"><span class="c006">3.3</span></a><span class="c006">, </span><a href="#hevea_default183"><span class="c006">3.10</span></a><span class="c006">, </span><a href="#hevea_default295"><span class="c006">5.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">conditional</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
chained, </span><a href="#hevea_default154"><span class="c006">3.5</span></a><span class="c006">, </span><a href="#hevea_default180"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested, </span><a href="#hevea_default158"><span class="c006">3.6</span></a><span class="c006">, </span><a href="#hevea_default188"><span class="c006">3.10</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">conditional execution, </span><a href="#hevea_default143"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">conditional statement, </span><a href="#hevea_default139"><span class="c006">3.3</span></a><span class="c006">, </span><a href="#hevea_default181"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">connect function, </span><a href="#hevea_default789"><span class="c006">14.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">consistency check, </span><a href="#hevea_default623"><span class="c006">9.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">constraint, </span><a href="#hevea_default795"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">continue statement, </span><a href="#hevea_default302"><span class="c006">5.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">contributors, </span><a href="#hevea_default860"><span class="c006">C</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">conversion</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
type, </span><a href="#hevea_default195"><span class="c006">4.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">copy</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
slice, </span><a href="#hevea_default347"><span class="c006">6.4</span></a><span class="c006">, </span><a href="#hevea_default496"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">to avoid aliasing, </span><a href="#hevea_default567"><span class="c006">8.14</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">count method, </span><a href="#hevea_default377"><span class="c006">6.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">counter, </span><a href="#hevea_default314"><span class="c006">5.9</span></a><span class="c006">, </span><a href="#hevea_default359"><span class="c006">6.6</span></a><span class="c006">, </span><a href="#hevea_default388"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default418"><span class="c006">7.4</span></a><span class="c006">, </span><a href="#hevea_default602"><span class="c006">9.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">counting and looping, </span><a href="#hevea_default360"><span class="c006">6.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">curl, </span><a href="#hevea_default758"><span class="c006">12.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">cursor, </span><a href="#hevea_default796"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">cursor function, </span><a href="#hevea_default791"><span class="c006">14.4</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">DSU pattern, </span><a href="#hevea_default663"><span class="c006">10.2</span></a><span class="c006">, </span><a href="#hevea_default710"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">data structure, </span><a href="#hevea_default701"><span class="c006">10.9</span></a><span class="c006">, </span><a href="#hevea_default709"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">database, </span><a href="#hevea_default785"><span class="c006">14.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
indexes, </span><a href="#hevea_default786"><span class="c006">14.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">database browser, </span><a href="#hevea_default797"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">database normalization, </span><a href="#hevea_default802"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">debugging, </span><a href="#hevea_default87"><span class="c006">2.13</span></a><span class="c006">, </span><a href="#hevea_default166"><span class="c006">3.9</span></a><span class="c006">, </span><a href="#hevea_default262"><span class="c006">4.12</span></a><span class="c006">, </span><a href="#hevea_default385"><span class="c006">6.12</span></a><span class="c006">, </span><a href="#hevea_default434"><span class="c006">7.9</span></a><span class="c006">, </span><a href="#hevea_default562"><span class="c006">8.14</span></a><span class="c006">, </span><a href="#hevea_default621"><span class="c006">9.5</span></a><span class="c006">, </span><a href="#hevea_default700"><span class="c006">10.9</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
by bisection, </span><a href="#hevea_default311"><span class="c006">5.8</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">decorate-sort-undecorate pattern, </span><a href="#hevea_default665"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">decrement, </span><a href="#hevea_default289"><span class="c006">5.1</span></a><span class="c006">, </span><a href="#hevea_default315"><span class="c006">5.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">def keyword, </span><a href="#hevea_default232"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">definition</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
function, </span><a href="#hevea_default231"><span class="c006">4.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">del operator, </span><a href="#hevea_default516"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">deletion, element of list, </span><a href="#hevea_default513"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">delimiter, </span><a href="#hevea_default531"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default569"><span class="c006">8.15</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">deterministic, </span><a href="#hevea_default205"><span class="c006">4.4</span></a><span class="c006">, </span><a href="#hevea_default268"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">development plan</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
random walk programming, </span><a href="#hevea_default707"><span class="c006">10.9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">dict function, </span><a href="#hevea_default586"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">dictionary, </span><a href="#hevea_default580"><span class="c006">9</span></a><span class="c006">, </span><a href="#hevea_default581"><span class="c006">9</span></a><span class="c006">, </span><a href="#hevea_default625"><span class="c006">9.6</span></a><span class="c006">, </span><a href="#hevea_default680"><span class="c006">10.4</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
looping with, </span><a href="#hevea_default614"><span class="c006">9.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traversal, </span><a href="#hevea_default685"><span class="c006">10.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">directory, </span><a href="#hevea_default814"><span class="c006">16.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
current, </span><a href="#hevea_default843"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">cwd, </span><a href="#hevea_default845"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">working, </span><a href="#hevea_default821"><span class="c006">16.1</span></a><span class="c006">, </span><a href="#hevea_default844"><span class="c006">16.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">divisibility, </span><a href="#hevea_default73"><span class="c006">2.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">division</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
floating-point, </span><a href="#hevea_default64"><span class="c006">2.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">floor, </span><a href="#hevea_default63"><span class="c006">2.5</span></a><span class="c006">, </span><a href="#hevea_default174"><span class="c006">3.9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">dot notation, </span><a href="#hevea_default219"><span class="c006">4.5</span></a><span class="c006">, </span><a href="#hevea_default269"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default372"><span class="c006">6.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">duplicate, </span><a href="#hevea_default852"><span class="c006">16.6</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">ElementTree, </span><a href="#hevea_default764"><span class="c006">13.2</span></a><span class="c006">, </span><a href="#hevea_default778"><span class="c006">13.9</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
find, </span><a href="#hevea_default766"><span class="c006">13.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">findall, </span><a href="#hevea_default767"><span class="c006">13.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">fromstring, </span><a href="#hevea_default765"><span class="c006">13.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">get, </span><a href="#hevea_default768"><span class="c006">13.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">element, </span><a href="#hevea_default448"><span class="c006">8.1</span></a><span class="c006">, </span><a href="#hevea_default570"><span class="c006">8.15</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">element deletion, </span><a href="#hevea_default512"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">elif keyword, </span><a href="#hevea_default155"><span class="c006">3.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">ellipses, </span><a href="#hevea_default240"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">else keyword, </span><a href="#hevea_default150"><span class="c006">3.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">email address, </span><a href="#hevea_default679"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">empty list, </span><a href="#hevea_default453"><span class="c006">8.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">empty string, </span><a href="#hevea_default389"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default535"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">encapsulation, </span><a href="#hevea_default363"><span class="c006">6.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">end of line character, </span><a href="#hevea_default439"><span class="c006">7.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">equivalence, </span><a href="#hevea_default542"><span class="c006">8.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">equivalent, </span><a href="#hevea_default571"><span class="c006">8.15</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">error</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
runtime, </span><a href="#hevea_default94"><span class="c006">2.13</span></a><span class="c006">, </span><a href="#hevea_default169"><span class="c006">3.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">semantic, </span><a href="#hevea_default45"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default97"><span class="c006">2.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">shape, </span><a href="#hevea_default703"><span class="c006">10.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">syntax, </span><a href="#hevea_default89"><span class="c006">2.13</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">error message, </span><a href="#hevea_default46"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default90"><span class="c006">2.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">evaluate, </span><a href="#hevea_default66"><span class="c006">2.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">eXtensible Markup Language, </span><a href="#hevea_default784"><span class="c006">13.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">exception, </span><a href="#hevea_default92"><span class="c006">2.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
IndexError, </span><a href="#hevea_default331"><span class="c006">6.2</span></a><span class="c006">, </span><a href="#hevea_default466"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">IOError, </span><a href="#hevea_default427"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">KeyError, </span><a href="#hevea_default590"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">OverflowError, </span><a href="#hevea_default171"><span class="c006">3.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">TypeError, </span><a href="#hevea_default327"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default353"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default383"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default655"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">ValueError, </span><a href="#hevea_default84"><span class="c006">2.10</span></a><span class="c006">, </span><a href="#hevea_default675"><span class="c006">10.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">exists function, </span><a href="#hevea_default826"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">experimental debugging, </span><a href="#hevea_default705"><span class="c006">10.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">expression, </span><a href="#hevea_default59"><span class="c006">2.5</span></a><span class="c006">, </span><a href="#hevea_default65"><span class="c006">2.6</span></a><span class="c006">, </span><a href="#hevea_default102"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
boolean, </span><a href="#hevea_default120"><span class="c006">3.1</span></a><span class="c006">, </span><a href="#hevea_default177"><span class="c006">3.10</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">extend method, </span><a href="#hevea_default504"><span class="c006">8.6</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">False special value, </span><a href="#hevea_default124"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Free Documentation License, GNU, </span><a href="#hevea_default857"><span class="c006">C</span></a><span class="c006">, </span><a href="#hevea_default859"><span class="c006">C</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">fahrenheit, </span><a href="#hevea_default160"><span class="c006">3.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">file, </span><a href="#hevea_default408"><span class="c006">7</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
open, </span><a href="#hevea_default412"><span class="c006">7.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">reading, </span><a href="#hevea_default417"><span class="c006">7.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">writing, </span><a href="#hevea_default430"><span class="c006">7.8</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">file handle, </span><a href="#hevea_default415"><span class="c006">7.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">file name, </span><a href="#hevea_default812"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">filter pattern, </span><a href="#hevea_default419"><span class="c006">7.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">findall, </span><a href="#hevea_default730"><span class="c006">11.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">flag, </span><a href="#hevea_default394"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">float function, </span><a href="#hevea_default199"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">float type, </span><a href="#hevea_default41"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">floating-point, </span><a href="#hevea_default103"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">floating-point division, </span><a href="#hevea_default62"><span class="c006">2.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">floor division, </span><a href="#hevea_default61"><span class="c006">2.5</span></a><span class="c006">, </span><a href="#hevea_default104"><span class="c006">2.14</span></a><span class="c006">, </span><a href="#hevea_default173"><span class="c006">3.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">flow control, </span><a href="#hevea_default746"><span class="c006">12.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">flow of execution, </span><a href="#hevea_default245"><span class="c006">4.8</span></a><span class="c006">, </span><a href="#hevea_default270"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default294"><span class="c006">5.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">folder, </span><a href="#hevea_default815"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">for loop, </span><a href="#hevea_default337"><span class="c006">6.3</span></a><span class="c006">, </span><a href="#hevea_default475"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">for statement, </span><a href="#hevea_default304"><span class="c006">5.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">foreign key, </span><a href="#hevea_default798"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">format operator, </span><a href="#hevea_default379"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default390"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">format sequence, </span><a href="#hevea_default382"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default392"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">format string, </span><a href="#hevea_default381"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default393"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">frequency, </span><a href="#hevea_default605"><span class="c006">9.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
letter, </span><a href="#hevea_default720"><span class="c006">10.11</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">fruitful function, </span><a href="#hevea_default253"><span class="c006">4.10</span></a><span class="c006">, </span><a href="#hevea_default271"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, </span><a href="#hevea_default229"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default272"><span class="c006">4.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
choice, </span><a href="#hevea_default214"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">connect, </span><a href="#hevea_default790"><span class="c006">14.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">cursor, </span><a href="#hevea_default792"><span class="c006">14.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">dict, </span><a href="#hevea_default587"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">exists, </span><a href="#hevea_default827"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">float, </span><a href="#hevea_default200"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">getcwd, </span><a href="#hevea_default819"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">int, </span><a href="#hevea_default198"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">len, </span><a href="#hevea_default330"><span class="c006">6.2</span></a><span class="c006">, </span><a href="#hevea_default593"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default526"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">log, </span><a href="#hevea_default221"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">open, </span><a href="#hevea_default414"><span class="c006">7.2</span></a><span class="c006">, </span><a href="#hevea_default426"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">popen, </span><a href="#hevea_default834"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">randint, </span><a href="#hevea_default212"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random, </span><a href="#hevea_default210"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">raw_input, </span><a href="#hevea_default80"><span class="c006">2.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">repr, </span><a href="#hevea_default437"><span class="c006">7.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">reversed, </span><a href="#hevea_default699"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sorted, </span><a href="#hevea_default697"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sqrt, </span><a href="#hevea_default228"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">str, </span><a href="#hevea_default202"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default648"><span class="c006">10.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function argument, </span><a href="#hevea_default249"><span class="c006">4.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function call, </span><a href="#hevea_default191"><span class="c006">4.1</span></a><span class="c006">, </span><a href="#hevea_default273"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function definition, </span><a href="#hevea_default230"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default243"><span class="c006">4.7</span></a><span class="c006">, </span><a href="#hevea_default274"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default275"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function object, </span><a href="#hevea_default241"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function parameter, </span><a href="#hevea_default247"><span class="c006">4.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, fruitful, </span><a href="#hevea_default255"><span class="c006">4.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, math, </span><a href="#hevea_default216"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, reasons for, </span><a href="#hevea_default261"><span class="c006">4.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, trigonometric, </span><a href="#hevea_default225"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, void, </span><a href="#hevea_default256"><span class="c006">4.10</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">GNU Free Documentation License, </span><a href="#hevea_default856"><span class="c006">C</span></a><span class="c006">, </span><a href="#hevea_default858"><span class="c006">C</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Google, </span><a href="#hevea_default771"><span class="c006">13.7</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
map, </span><a href="#hevea_default806"><span class="c006">15.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">page rank, </span><a href="#hevea_default809"><span class="c006">15.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">gather, </span><a href="#hevea_default711"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">geocoding, </span><a href="#hevea_default772"><span class="c006">13.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">get method, </span><a href="#hevea_default608"><span class="c006">9.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">getcwd function, </span><a href="#hevea_default818"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">greedy, </span><a href="#hevea_default729"><span class="c006">11.1</span></a><span class="c006">, </span><a href="#hevea_default737"><span class="c006">11.8</span></a><span class="c006">, </span><a href="#hevea_default749"><span class="c006">12.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">greedy matching, </span><a href="#hevea_default738"><span class="c006">11.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">grep, </span><a href="#hevea_default736"><span class="c006">11.6</span></a><span class="c006">, </span><a href="#hevea_default739"><span class="c006">11.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">guardian pattern, </span><a href="#hevea_default164"><span class="c006">3.8</span></a><span class="c006">, </span><a href="#hevea_default185"><span class="c006">3.10</span></a><span class="c006">, </span><a href="#hevea_default386"><span class="c006">6.12</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">HTML, </span><a href="#hevea_default755"><span class="c006">12.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hardware, </span><a href="#hevea_default3"><span class="c006">1.2</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
architecture, </span><a href="#hevea_default4"><span class="c006">1.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hash function, </span><a href="#hevea_default627"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hash table, </span><a href="#hevea_default599"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hashable, </span><a href="#hevea_default641"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default688"><span class="c006">10.7</span></a><span class="c006">, </span><a href="#hevea_default712"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hashing, </span><a href="#hevea_default846"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">hashtable, </span><a href="#hevea_default626"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">header, </span><a href="#hevea_default236"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default276"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">high-level language, </span><a href="#hevea_default15"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">histogram, </span><a href="#hevea_default604"><span class="c006">9.1</span></a><span class="c006">, </span><a href="#hevea_default607"><span class="c006">9.1</span></a><span class="c006">, </span><a href="#hevea_default628"><span class="c006">9.6</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">IndexError, </span><a href="#hevea_default332"><span class="c006">6.2</span></a><span class="c006">, </span><a href="#hevea_default467"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">IOError, </span><a href="#hevea_default428"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">identical, </span><a href="#hevea_default573"><span class="c006">8.15</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">identity, </span><a href="#hevea_default543"><span class="c006">8.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">idiom, </span><a href="#hevea_default565"><span class="c006">8.14</span></a><span class="c006">, </span><a href="#hevea_default610"><span class="c006">9.1</span></a><span class="c006">, </span><a href="#hevea_default617"><span class="c006">9.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">if statement, </span><a href="#hevea_default141"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">image</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
jpg, </span><a href="#hevea_default742"><span class="c006">12.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">immutability, </span><a href="#hevea_default350"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default357"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default396"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default550"><span class="c006">8.12</span></a><span class="c006">, </span><a href="#hevea_default643"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default695"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">implementation, </span><a href="#hevea_default603"><span class="c006">9.1</span></a><span class="c006">, </span><a href="#hevea_default629"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">import statement, </span><a href="#hevea_default277"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">in operator, </span><a href="#hevea_default364"><span class="c006">6.7</span></a><span class="c006">, </span><a href="#hevea_default471"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default595"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">increment, </span><a href="#hevea_default288"><span class="c006">5.1</span></a><span class="c006">, </span><a href="#hevea_default316"><span class="c006">5.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">indentation, </span><a href="#hevea_default238"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">index, </span><a href="#hevea_default323"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default326"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default397"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default458"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default572"><span class="c006">8.15</span></a><span class="c006">, </span><a href="#hevea_default585"><span class="c006">9</span></a><span class="c006">, </span><a href="#hevea_default799"><span class="c006">14.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
looping with, </span><a href="#hevea_default479"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">negative, </span><a href="#hevea_default333"><span class="c006">6.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default343"><span class="c006">6.4</span></a><span class="c006">, </span><a href="#hevea_default491"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">starting at zero, </span><a href="#hevea_default324"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default462"><span class="c006">8.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">infinite loop, </span><a href="#hevea_default298"><span class="c006">5.3</span></a><span class="c006">, </span><a href="#hevea_default317"><span class="c006">5.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">initialization (before update), </span><a href="#hevea_default287"><span class="c006">5.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">int function, </span><a href="#hevea_default197"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">int type, </span><a href="#hevea_default39"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">integer, </span><a href="#hevea_default105"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">interactive mode, </span><a href="#hevea_default8"><span class="c006">1.5</span></a><span class="c006">, </span><a href="#hevea_default16"><span class="c006">1.12</span></a><span class="c006">, </span><a href="#hevea_default54"><span class="c006">2.4</span></a><span class="c006">, </span><a href="#hevea_default257"><span class="c006">4.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">interpret, </span><a href="#hevea_default17"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">invocation, </span><a href="#hevea_default374"><span class="c006">6.9</span></a><span class="c006">, </span><a href="#hevea_default395"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">is operator, </span><a href="#hevea_default540"><span class="c006">8.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">item, </span><a href="#hevea_default398"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default450"><span class="c006">8.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
dictionary, </span><a href="#hevea_default630"><span class="c006">9.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">item assignment, </span><a href="#hevea_default355"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default464"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default657"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">item update, </span><a href="#hevea_default480"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">items method, </span><a href="#hevea_default681"><span class="c006">10.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">iteration, </span><a href="#hevea_default284"><span class="c006">5</span></a><span class="c006">, </span><a href="#hevea_default293"><span class="c006">5.2</span></a><span class="c006">, </span><a href="#hevea_default318"><span class="c006">5.9</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">JavaScript Object Notation, </span><a href="#hevea_default770"><span class="c006">13.4</span></a><span class="c006">, </span><a href="#hevea_default780"><span class="c006">13.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">JSON, </span><a href="#hevea_default769"><span class="c006">13.4</span></a><span class="c006">, </span><a href="#hevea_default779"><span class="c006">13.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">join method, </span><a href="#hevea_default532"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">jpg, </span><a href="#hevea_default743"><span class="c006">12.3</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">KeyError, </span><a href="#hevea_default591"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">key, </span><a href="#hevea_default583"><span class="c006">9</span></a><span class="c006">, </span><a href="#hevea_default631"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">key-value pair, </span><a href="#hevea_default584"><span class="c006">9</span></a><span class="c006">, </span><a href="#hevea_default632"><span class="c006">9.6</span></a><span class="c006">, </span><a href="#hevea_default683"><span class="c006">10.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">keyboard input, </span><a href="#hevea_default77"><span class="c006">2.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">keys method, </span><a href="#hevea_default618"><span class="c006">9.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">keyword, </span><a href="#hevea_default50"><span class="c006">2.3</span></a><span class="c006">, </span><a href="#hevea_default52"><span class="c006">2.3</span></a><span class="c006">, </span><a href="#hevea_default106"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
def, </span><a href="#hevea_default233"><span class="c006">4.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">elif, </span><a href="#hevea_default156"><span class="c006">3.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">else, </span><a href="#hevea_default151"><span class="c006">3.4</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">keyword argument, </span><a href="#hevea_default668"><span class="c006">10.2</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">language</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
programming, </span><a href="#hevea_default7"><span class="c006">1.4</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">len function, </span><a href="#hevea_default329"><span class="c006">6.2</span></a><span class="c006">, </span><a href="#hevea_default592"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">letter frequency, </span><a href="#hevea_default719"><span class="c006">10.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default446"><span class="c006">8</span></a><span class="c006">, </span><a href="#hevea_default522"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default574"><span class="c006">8.15</span></a><span class="c006">, </span><a href="#hevea_default692"><span class="c006">10.8</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
as argument, </span><a href="#hevea_default551"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">concatenation, </span><a href="#hevea_default486"><span class="c006">8.4</span></a><span class="c006">, </span><a href="#hevea_default558"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">copy, </span><a href="#hevea_default494"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">element, </span><a href="#hevea_default456"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">empty, </span><a href="#hevea_default454"><span class="c006">8.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">function, </span><a href="#hevea_default525"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">index, </span><a href="#hevea_default468"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">membership, </span><a href="#hevea_default469"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">method, </span><a href="#hevea_default500"><span class="c006">8.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested, </span><a href="#hevea_default452"><span class="c006">8.1</span></a><span class="c006">, </span><a href="#hevea_default483"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">operation, </span><a href="#hevea_default484"><span class="c006">8.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">repetition, </span><a href="#hevea_default488"><span class="c006">8.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default492"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traversal, </span><a href="#hevea_default473"><span class="c006">8.3</span></a><span class="c006">, </span><a href="#hevea_default575"><span class="c006">8.15</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li></ul></td><td class="c011"><ul class="indexenv"><li class="li-indexenv"><span class="c006">log function, </span><a href="#hevea_default220"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">logical key, </span><a href="#hevea_default800"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">logical operator, </span><a href="#hevea_default121"><span class="c006">3.1</span></a><span class="c006">, </span><a href="#hevea_default131"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">lookup, </span><a href="#hevea_default633"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">loop, </span><a href="#hevea_default296"><span class="c006">5.2</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
for, </span><a href="#hevea_default338"><span class="c006">6.3</span></a><span class="c006">, </span><a href="#hevea_default476"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">infinite, </span><a href="#hevea_default299"><span class="c006">5.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">maximum, </span><a href="#hevea_default307"><span class="c006">5.7.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">minimum, </span><a href="#hevea_default308"><span class="c006">5.7.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested, </span><a href="#hevea_default612"><span class="c006">9.2</span></a><span class="c006">, </span><a href="#hevea_default635"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traversal, </span><a href="#hevea_default336"><span class="c006">6.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">while, </span><a href="#hevea_default292"><span class="c006">5.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">looping</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
with dictionaries, </span><a href="#hevea_default615"><span class="c006">9.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">with indices, </span><a href="#hevea_default478"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">with strings, </span><a href="#hevea_default362"><span class="c006">6.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">looping and counting, </span><a href="#hevea_default361"><span class="c006">6.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">low-level language, </span><a href="#hevea_default18"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">ls (Unix command), </span><a href="#hevea_default831"><span class="c006">16.4</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">MD5 algorithm, </span><a href="#hevea_default853"><span class="c006">16.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">MP3, </span><a href="#hevea_default851"><span class="c006">16.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">machine code, </span><a href="#hevea_default19"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">main memory, </span><a href="#hevea_default20"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">math function, </span><a href="#hevea_default215"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">membership</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
dictionary, </span><a href="#hevea_default594"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default470"><span class="c006">8.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">set, </span><a href="#hevea_default601"><span class="c006">9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">method, </span><a href="#hevea_default370"><span class="c006">6.9</span></a><span class="c006">, </span><a href="#hevea_default399"><span class="c006">6.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
append, </span><a href="#hevea_default503"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default557"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">close, </span><a href="#hevea_default433"><span class="c006">7.8</span></a><span class="c006">, </span><a href="#hevea_default840"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">count, </span><a href="#hevea_default378"><span class="c006">6.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">extend, </span><a href="#hevea_default505"><span class="c006">8.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">get, </span><a href="#hevea_default609"><span class="c006">9.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">items, </span><a href="#hevea_default682"><span class="c006">10.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">join, </span><a href="#hevea_default533"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">keys, </span><a href="#hevea_default619"><span class="c006">9.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pop, </span><a href="#hevea_default515"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">read, </span><a href="#hevea_default838"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">readline, </span><a href="#hevea_default836"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">remove, </span><a href="#hevea_default519"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sort, </span><a href="#hevea_default507"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default564"><span class="c006">8.14</span></a><span class="c006">, </span><a href="#hevea_default662"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">split, </span><a href="#hevea_default528"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default678"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string, </span><a href="#hevea_default407"><span class="c006">6.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">values, </span><a href="#hevea_default598"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">void, </span><a href="#hevea_default509"><span class="c006">8.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">method, list, </span><a href="#hevea_default501"><span class="c006">8.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">mnemonic, </span><a href="#hevea_default86"><span class="c006">2.12</span></a><span class="c006">, </span><a href="#hevea_default107"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">module, </span><a href="#hevea_default217"><span class="c006">4.5</span></a><span class="c006">, </span><a href="#hevea_default279"><span class="c006">4.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
os, </span><a href="#hevea_default817"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random, </span><a href="#hevea_default208"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sqlite3, </span><a href="#hevea_default788"><span class="c006">14.4</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">module object, </span><a href="#hevea_default218"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">modulus operator, </span><a href="#hevea_default71"><span class="c006">2.8</span></a><span class="c006">, </span><a href="#hevea_default108"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">mutability, </span><a href="#hevea_default349"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default461"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default497"><span class="c006">8.5</span></a><span class="c006">, </span><a href="#hevea_default549"><span class="c006">8.12</span></a><span class="c006">, </span><a href="#hevea_default640"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default694"><span class="c006">10.8</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">None special value, </span><a href="#hevea_default259"><span class="c006">4.10</span></a><span class="c006">, </span><a href="#hevea_default309"><span class="c006">5.7.2</span></a><span class="c006">, </span><a href="#hevea_default510"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default520"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">negative index, </span><a href="#hevea_default334"><span class="c006">6.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested conditional, </span><a href="#hevea_default157"><span class="c006">3.6</span></a><span class="c006">, </span><a href="#hevea_default187"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested list, </span><a href="#hevea_default451"><span class="c006">8.1</span></a><span class="c006">, </span><a href="#hevea_default482"><span class="c006">8.3</span></a><span class="c006">, </span><a href="#hevea_default576"><span class="c006">8.15</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">nested loops, </span><a href="#hevea_default611"><span class="c006">9.2</span></a><span class="c006">, </span><a href="#hevea_default634"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">newline, </span><a href="#hevea_default82"><span class="c006">2.10</span></a><span class="c006">, </span><a href="#hevea_default416"><span class="c006">7.3</span></a><span class="c006">, </span><a href="#hevea_default431"><span class="c006">7.8</span></a><span class="c006">, </span><a href="#hevea_default441"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">non-greedy, </span><a href="#hevea_default750"><span class="c006">12.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">normalization, </span><a href="#hevea_default801"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">not operator, </span><a href="#hevea_default135"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">number, random, </span><a href="#hevea_default204"><span class="c006">4.4</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">OAuth, </span><a href="#hevea_default775"><span class="c006">13.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">OverflowError, </span><a href="#hevea_default172"><span class="c006">3.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">object, </span><a href="#hevea_default354"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default400"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default537"><span class="c006">8.11</span></a><span class="c006">, </span><a href="#hevea_default544"><span class="c006">8.11</span></a><span class="c006">, </span><a href="#hevea_default577"><span class="c006">8.15</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
function, </span><a href="#hevea_default242"><span class="c006">4.6</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">open function, </span><a href="#hevea_default413"><span class="c006">7.2</span></a><span class="c006">, </span><a href="#hevea_default425"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">operand, </span><a href="#hevea_default58"><span class="c006">2.5</span></a><span class="c006">, </span><a href="#hevea_default110"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">operator, </span><a href="#hevea_default111"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
and, </span><a href="#hevea_default136"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">boolean, </span><a href="#hevea_default367"><span class="c006">6.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">bracket, </span><a href="#hevea_default322"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default460"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default650"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comparison, </span><a href="#hevea_default130"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">del, </span><a href="#hevea_default517"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">format, </span><a href="#hevea_default380"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default391"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">in, </span><a href="#hevea_default365"><span class="c006">6.7</span></a><span class="c006">, </span><a href="#hevea_default472"><span class="c006">8.2</span></a><span class="c006">, </span><a href="#hevea_default596"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">is, </span><a href="#hevea_default541"><span class="c006">8.11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">logical, </span><a href="#hevea_default122"><span class="c006">3.1</span></a><span class="c006">, </span><a href="#hevea_default132"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">modulus, </span><a href="#hevea_default72"><span class="c006">2.8</span></a><span class="c006">, </span><a href="#hevea_default109"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">not, </span><a href="#hevea_default138"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">or, </span><a href="#hevea_default137"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default342"><span class="c006">6.4</span></a><span class="c006">, </span><a href="#hevea_default490"><span class="c006">8.5</span></a><span class="c006">, </span><a href="#hevea_default561"><span class="c006">8.13</span></a><span class="c006">, </span><a href="#hevea_default652"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string, </span><a href="#hevea_default75"><span class="c006">2.9</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">operator, arithmetic, </span><a href="#hevea_default56"><span class="c006">2.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">optional argument, </span><a href="#hevea_default375"><span class="c006">6.9</span></a><span class="c006">, </span><a href="#hevea_default529"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">or operator, </span><a href="#hevea_default134"><span class="c006">3.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">order of operations, </span><a href="#hevea_default67"><span class="c006">2.7</span></a><span class="c006">, </span><a href="#hevea_default98"><span class="c006">2.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">os module, </span><a href="#hevea_default816"><span class="c006">16.1</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">PEMDAS, </span><a href="#hevea_default69"><span class="c006">2.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Python 3.0, </span><a href="#hevea_default60"><span class="c006">2.5</span></a><span class="c006">, </span><a href="#hevea_default78"><span class="c006">2.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Pythonic, </span><a href="#hevea_default429"><span class="c006">7.7</span></a><span class="c006">, </span><a href="#hevea_default442"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parameter, </span><a href="#hevea_default246"><span class="c006">4.9</span></a><span class="c006">, </span><a href="#hevea_default280"><span class="c006">4.13</span></a><span class="c006">, </span><a href="#hevea_default555"><span class="c006">8.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parentheses</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
argument in, </span><a href="#hevea_default192"><span class="c006">4.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">empty, </span><a href="#hevea_default235"><span class="c006">4.6</span></a><span class="c006">, </span><a href="#hevea_default373"><span class="c006">6.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">overriding precedence, </span><a href="#hevea_default70"><span class="c006">2.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parameters in, </span><a href="#hevea_default250"><span class="c006">4.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">regular expression, </span><a href="#hevea_default735"><span class="c006">11.3</span></a><span class="c006">, </span><a href="#hevea_default752"><span class="c006">12.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuples in, </span><a href="#hevea_default644"><span class="c006">10.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parse, </span><a href="#hevea_default21"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parsing</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
HTML, </span><a href="#hevea_default756"><span class="c006">12.7</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parsing HTML, </span><a href="#hevea_default748"><span class="c006">12.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pass statement, </span><a href="#hevea_default147"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">path, </span><a href="#hevea_default813"><span class="c006">16.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
absolute, </span><a href="#hevea_default825"><span class="c006">16.1</span></a><span class="c006">, </span><a href="#hevea_default841"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">relative, </span><a href="#hevea_default823"><span class="c006">16.1</span></a><span class="c006">, </span><a href="#hevea_default848"><span class="c006">16.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pattern</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
DSU, </span><a href="#hevea_default664"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">decorate-sort-undecorate, </span><a href="#hevea_default666"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">filter, </span><a href="#hevea_default420"><span class="c006">7.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">guardian, </span><a href="#hevea_default165"><span class="c006">3.8</span></a><span class="c006">, </span><a href="#hevea_default186"><span class="c006">3.10</span></a><span class="c006">, </span><a href="#hevea_default387"><span class="c006">6.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">search, </span><a href="#hevea_default402"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">swap, </span><a href="#hevea_default674"><span class="c006">10.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">persistence, </span><a href="#hevea_default410"><span class="c006">7.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pi, </span><a href="#hevea_default226"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pipe, </span><a href="#hevea_default830"><span class="c006">16.4</span></a><span class="c006">, </span><a href="#hevea_default847"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pop method, </span><a href="#hevea_default514"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">popen function, </span><a href="#hevea_default833"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">port, </span><a href="#hevea_default760"><span class="c006">12.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">portability, </span><a href="#hevea_default22"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">precedence, </span><a href="#hevea_default113"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">primary key, </span><a href="#hevea_default803"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">print statement, </span><a href="#hevea_default23"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">problem solving, </span><a href="#hevea_default5"><span class="c006">1.3</span></a><span class="c006">, </span><a href="#hevea_default25"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">program, </span><a href="#hevea_default10"><span class="c006">1.8</span></a><span class="c006">, </span><a href="#hevea_default26"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">programming language, </span><a href="#hevea_default6"><span class="c006">1.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">prompt, </span><a href="#hevea_default27"><span class="c006">1.12</span></a><span class="c006">, </span><a href="#hevea_default81"><span class="c006">2.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pseudorandom, </span><a href="#hevea_default206"><span class="c006">4.4</span></a><span class="c006">, </span><a href="#hevea_default281"><span class="c006">4.13</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">QA, </span><a href="#hevea_default422"><span class="c006">7.7</span></a><span class="c006">, </span><a href="#hevea_default444"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Quality Assurance, </span><a href="#hevea_default421"><span class="c006">7.7</span></a><span class="c006">, </span><a href="#hevea_default443"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">quotation mark, </span><a href="#hevea_default35"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default43"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default346"><span class="c006">6.4</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">Romeo and Juliet, </span><a href="#hevea_default579"><span class="c006">8.16</span></a><span class="c006">, </span><a href="#hevea_default613"><span class="c006">9.2</span></a><span class="c006">, </span><a href="#hevea_default620"><span class="c006">9.4</span></a><span class="c006">, </span><a href="#hevea_default667"><span class="c006">10.2</span></a><span class="c006">, </span><a href="#hevea_default686"><span class="c006">10.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">radian, </span><a href="#hevea_default223"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">randint function, </span><a href="#hevea_default211"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random function, </span><a href="#hevea_default209"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random module, </span><a href="#hevea_default207"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random number, </span><a href="#hevea_default203"><span class="c006">4.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">random walk programming, </span><a href="#hevea_default706"><span class="c006">10.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">rate limiting, </span><a href="#hevea_default774"><span class="c006">13.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">raw_input function, </span><a href="#hevea_default79"><span class="c006">2.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">re module, </span><a href="#hevea_default723"><span class="c006">11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">read method, </span><a href="#hevea_default837"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">readline method, </span><a href="#hevea_default835"><span class="c006">16.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">reference, </span><a href="#hevea_default548"><span class="c006">8.12</span></a><span class="c006">, </span><a href="#hevea_default554"><span class="c006">8.13</span></a><span class="c006">, </span><a href="#hevea_default578"><span class="c006">8.15</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
aliasing, </span><a href="#hevea_default547"><span class="c006">8.12</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">regex, </span><a href="#hevea_default722"><span class="c006">11</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
character sets(brackets), </span><a href="#hevea_default732"><span class="c006">11.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">findall, </span><a href="#hevea_default731"><span class="c006">11.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">parentheses, </span><a href="#hevea_default734"><span class="c006">11.3</span></a><span class="c006">, </span><a href="#hevea_default751"><span class="c006">12.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">search, </span><a href="#hevea_default724"><span class="c006">11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">wild card, </span><a href="#hevea_default728"><span class="c006">11.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">regular expressions, </span><a href="#hevea_default721"><span class="c006">11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">relation, </span><a href="#hevea_default804"><span class="c006">14.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">relative path, </span><a href="#hevea_default822"><span class="c006">16.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">remove method, </span><a href="#hevea_default518"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">repetition</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
list, </span><a href="#hevea_default487"><span class="c006">8.4</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">repr function, </span><a href="#hevea_default436"><span class="c006">7.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">return value, </span><a href="#hevea_default194"><span class="c006">4.1</span></a><span class="c006">, </span><a href="#hevea_default282"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">reversed function, </span><a href="#hevea_default698"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">rules of precedence, </span><a href="#hevea_default68"><span class="c006">2.7</span></a><span class="c006">, </span><a href="#hevea_default112"><span class="c006">2.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">runtime error, </span><a href="#hevea_default93"><span class="c006">2.13</span></a><span class="c006">, </span><a href="#hevea_default170"><span class="c006">3.9</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">Service Oriented Architecture, </span><a href="#hevea_default782"><span class="c006">13.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">SOA, </span><a href="#hevea_default781"><span class="c006">13.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sanity check, </span><a href="#hevea_default622"><span class="c006">9.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">scaffolding, </span><a href="#hevea_default624"><span class="c006">9.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">scatter, </span><a href="#hevea_default713"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">script, </span><a href="#hevea_default9"><span class="c006">1.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">script mode, </span><a href="#hevea_default55"><span class="c006">2.4</span></a><span class="c006">, </span><a href="#hevea_default258"><span class="c006">4.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">search pattern, </span><a href="#hevea_default401"><span class="c006">6.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">secondary memory, </span><a href="#hevea_default28"><span class="c006">1.12</span></a><span class="c006">, </span><a href="#hevea_default411"><span class="c006">7.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">semantic error, </span><a href="#hevea_default30"><span class="c006">1.12</span></a><span class="c006">, </span><a href="#hevea_default44"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default96"><span class="c006">2.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">semantics, </span><a href="#hevea_default29"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sequence, </span><a href="#hevea_default319"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default403"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default449"><span class="c006">8.1</span></a><span class="c006">, </span><a href="#hevea_default524"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default639"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default690"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">set membership, </span><a href="#hevea_default600"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">shape, </span><a href="#hevea_default714"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">shape error, </span><a href="#hevea_default702"><span class="c006">10.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">shell, </span><a href="#hevea_default829"><span class="c006">16.4</span></a><span class="c006">, </span><a href="#hevea_default849"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">short circuit, </span><a href="#hevea_default163"><span class="c006">3.8</span></a><span class="c006">, </span><a href="#hevea_default190"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sine function, </span><a href="#hevea_default222"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">singleton, </span><a href="#hevea_default645"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default715"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default404"><span class="c006">6.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
copy, </span><a href="#hevea_default348"><span class="c006">6.4</span></a><span class="c006">, </span><a href="#hevea_default495"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default493"><span class="c006">8.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string, </span><a href="#hevea_default345"><span class="c006">6.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default654"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">update, </span><a href="#hevea_default498"><span class="c006">8.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice operator, </span><a href="#hevea_default341"><span class="c006">6.4</span></a><span class="c006">, </span><a href="#hevea_default489"><span class="c006">8.5</span></a><span class="c006">, </span><a href="#hevea_default560"><span class="c006">8.13</span></a><span class="c006">, </span><a href="#hevea_default651"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">socket, </span><a href="#hevea_default761"><span class="c006">12.9</span></a><span class="c006">, </span><a href="#hevea_default762"><span class="c006">12.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sort method, </span><a href="#hevea_default506"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default563"><span class="c006">8.14</span></a><span class="c006">, </span><a href="#hevea_default661"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sorted function, </span><a href="#hevea_default696"><span class="c006">10.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">source code, </span><a href="#hevea_default31"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">special value</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
False, </span><a href="#hevea_default126"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">None, </span><a href="#hevea_default260"><span class="c006">4.10</span></a><span class="c006">, </span><a href="#hevea_default310"><span class="c006">5.7.2</span></a><span class="c006">, </span><a href="#hevea_default511"><span class="c006">8.6</span></a><span class="c006">, </span><a href="#hevea_default521"><span class="c006">8.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">True, </span><a href="#hevea_default125"><span class="c006">3.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">spider, </span><a href="#hevea_default763"><span class="c006">12.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">split method, </span><a href="#hevea_default527"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default677"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sqlite3 module, </span><a href="#hevea_default787"><span class="c006">14.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">sqrt function, </span><a href="#hevea_default227"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">squiggly bracket, </span><a href="#hevea_default588"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">statement, </span><a href="#hevea_default53"><span class="c006">2.4</span></a><span class="c006">, </span><a href="#hevea_default114"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
assignment, </span><a href="#hevea_default49"><span class="c006">2.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">break, </span><a href="#hevea_default301"><span class="c006">5.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">compound, </span><a href="#hevea_default146"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">conditional, </span><a href="#hevea_default140"><span class="c006">3.3</span></a><span class="c006">, </span><a href="#hevea_default182"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">continue, </span><a href="#hevea_default303"><span class="c006">5.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">for, </span><a href="#hevea_default305"><span class="c006">5.6</span></a><span class="c006">, </span><a href="#hevea_default339"><span class="c006">6.3</span></a><span class="c006">, </span><a href="#hevea_default477"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">if, </span><a href="#hevea_default142"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">import, </span><a href="#hevea_default278"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">pass, </span><a href="#hevea_default148"><span class="c006">3.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">print, </span><a href="#hevea_default24"><span class="c006">1.12</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">try, </span><a href="#hevea_default424"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">while, </span><a href="#hevea_default290"><span class="c006">5.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">str function, </span><a href="#hevea_default201"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string, </span><a href="#hevea_default34"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default115"><span class="c006">2.14</span></a><span class="c006">, </span><a href="#hevea_default523"><span class="c006">8.9</span></a><span class="c006">, </span><a href="#hevea_default691"><span class="c006">10.8</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
comparison, </span><a href="#hevea_default368"><span class="c006">6.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">empty, </span><a href="#hevea_default536"><span class="c006">8.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">find, </span><a href="#hevea_default725"><span class="c006">11</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">immutable, </span><a href="#hevea_default351"><span class="c006">6.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">method, </span><a href="#hevea_default371"><span class="c006">6.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">operation, </span><a href="#hevea_default74"><span class="c006">2.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default344"><span class="c006">6.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">split, </span><a href="#hevea_default733"><span class="c006">11.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">startswith, </span><a href="#hevea_default726"><span class="c006">11</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string method, </span><a href="#hevea_default406"><span class="c006">6.14</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string representation, </span><a href="#hevea_default438"><span class="c006">7.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">string type, </span><a href="#hevea_default37"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">swap pattern, </span><a href="#hevea_default673"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">syntax error, </span><a href="#hevea_default88"><span class="c006">2.13</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">True special value, </span><a href="#hevea_default123"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">TypeError, </span><a href="#hevea_default328"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default352"><span class="c006">6.5</span></a><span class="c006">, </span><a href="#hevea_default384"><span class="c006">6.11</span></a><span class="c006">, </span><a href="#hevea_default656"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">temperature conversion, </span><a href="#hevea_default162"><span class="c006">3.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">text file, </span><a href="#hevea_default445"><span class="c006">7.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">time, </span><a href="#hevea_default744"><span class="c006">12.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">time.sleep, </span><a href="#hevea_default745"><span class="c006">12.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traceback, </span><a href="#hevea_default159"><span class="c006">3.7</span></a><span class="c006">, </span><a href="#hevea_default167"><span class="c006">3.9</span></a><span class="c006">, </span><a href="#hevea_default189"><span class="c006">3.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traversal, </span><a href="#hevea_default335"><span class="c006">6.3</span></a><span class="c006">, </span><a href="#hevea_default340"><span class="c006">6.3</span></a><span class="c006">, </span><a href="#hevea_default405"><span class="c006">6.13</span></a><span class="c006">, </span><a href="#hevea_default606"><span class="c006">9.1</span></a><span class="c006">, </span><a href="#hevea_default616"><span class="c006">9.3</span></a><span class="c006">, </span><a href="#hevea_default670"><span class="c006">10.2</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
list, </span><a href="#hevea_default474"><span class="c006">8.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">traverse</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
dictionary, </span><a href="#hevea_default684"><span class="c006">10.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">trigonometric function, </span><a href="#hevea_default224"><span class="c006">4.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">try statement, </span><a href="#hevea_default423"><span class="c006">7.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default637"><span class="c006">10.1</span></a><span class="c006">, </span><a href="#hevea_default693"><span class="c006">10.8</span></a><span class="c006">, </span><a href="#hevea_default716"><span class="c006">10.10</span></a><span class="c006">, </span><a href="#hevea_default805"><span class="c006">14.13</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
as key in dictionary, </span><a href="#hevea_default687"><span class="c006">10.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">assignment, </span><a href="#hevea_default671"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">comparison, </span><a href="#hevea_default660"><span class="c006">10.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">in brackets, </span><a href="#hevea_default689"><span class="c006">10.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">singleton, </span><a href="#hevea_default646"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default653"><span class="c006">10.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple assignment, </span><a href="#hevea_default717"><span class="c006">10.10</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple function, </span><a href="#hevea_default647"><span class="c006">10.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">type, </span><a href="#hevea_default33"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default36"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default116"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
bool, </span><a href="#hevea_default128"><span class="c006">3.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">dict, </span><a href="#hevea_default582"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">file, </span><a href="#hevea_default409"><span class="c006">7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">float, </span><a href="#hevea_default42"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">int, </span><a href="#hevea_default40"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">list, </span><a href="#hevea_default447"><span class="c006">8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">str, </span><a href="#hevea_default38"><span class="c006">2.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">tuple, </span><a href="#hevea_default638"><span class="c006">10.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">type conversion, </span><a href="#hevea_default196"><span class="c006">4.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">typographical error, </span><a href="#hevea_default704"><span class="c006">10.9</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">Unicode, </span><a href="#hevea_default793"><span class="c006">14.4</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Unix command</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
ls, </span><a href="#hevea_default832"><span class="c006">16.4</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">underscore character, </span><a href="#hevea_default51"><span class="c006">2.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">update, </span><a href="#hevea_default285"><span class="c006">5.1</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
item, </span><a href="#hevea_default481"><span class="c006">8.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">slice, </span><a href="#hevea_default499"><span class="c006">8.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">urllib</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
image, </span><a href="#hevea_default741"><span class="c006">12.3</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">use before def, </span><a href="#hevea_default91"><span class="c006">2.13</span></a><span class="c006">, </span><a href="#hevea_default244"><span class="c006">4.7</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">ValueError, </span><a href="#hevea_default83"><span class="c006">2.10</span></a><span class="c006">, </span><a href="#hevea_default676"><span class="c006">10.3</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">Visualization</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
map, </span><a href="#hevea_default807"><span class="c006">15.1</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">networks, </span><a href="#hevea_default810"><span class="c006">15.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">page rank, </span><a href="#hevea_default811"><span class="c006">15.2</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">value, </span><a href="#hevea_default32"><span class="c006">2.1</span></a><span class="c006">, </span><a href="#hevea_default117"><span class="c006">2.14</span></a><span class="c006">, </span><a href="#hevea_default538"><span class="c006">8.11</span></a><span class="c006">, </span><a href="#hevea_default545"><span class="c006">8.11</span></a><span class="c006">, </span><a href="#hevea_default636"><span class="c006">9.6</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">values method, </span><a href="#hevea_default597"><span class="c006">9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">variable, </span><a href="#hevea_default47"><span class="c006">2.2</span></a><span class="c006">, </span><a href="#hevea_default118"><span class="c006">2.14</span></a><span class="c005">
</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
updating, </span><a href="#hevea_default286"><span class="c006">5.1</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">void function, </span><a href="#hevea_default254"><span class="c006">4.10</span></a><span class="c006">, </span><a href="#hevea_default283"><span class="c006">4.13</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">void method, </span><a href="#hevea_default508"><span class="c006">8.6</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">walk, </span><a href="#hevea_default850"><span class="c006">16.5</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">web</span><ul class="indexenv"><li class="li-indexenv"><span class="c006">
scraping, </span><a href="#hevea_default747"><span class="c006">12.5</span></a><span class="c005">
</span></li></ul><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">web service, </span><a href="#hevea_default773"><span class="c006">13.7</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">while loop, </span><a href="#hevea_default291"><span class="c006">5.2</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">whitespace, </span><a href="#hevea_default168"><span class="c006">3.9</span></a><span class="c006">, </span><a href="#hevea_default263"><span class="c006">4.12</span></a><span class="c006">, </span><a href="#hevea_default435"><span class="c006">7.9</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">wild card, </span><a href="#hevea_default727"><span class="c006">11.1</span></a><span class="c006">, </span><a href="#hevea_default740"><span class="c006">11.8</span></a><span class="c005">
</span></li><li class="li-indexenv"><span class="c006">working directory, </span><a href="#hevea_default820"><span class="c006">16.1</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">XML, </span><a href="#hevea_default783"><span class="c006">13.9</span></a><span class="c005">
<br />
<br />
</span></li><li class="li-indexenv"><span class="c006">zero, index starting at, </span><a href="#hevea_default325"><span class="c006">6.1</span></a><span class="c006">, </span><a href="#hevea_default463"><span class="c006">8.2</span></a><span class="c005">
</span></li></ul></td></tr>
</table><!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2" /><blockquote class="quote"><em>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</em><a href="http://hevea.inria.fr/index.html"><em>H<span style="font-size:small"><sup>E</sup></span>V<span style="font-size:small"><sup>E</sup></span>A</em></a><em>.</em></blockquote></body>
</html>
